  <div id="formss" class="page-layout simple fullwidth doc-page" layout="column" >

    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="space-between" >
        <div layout="column" layout-align="space-between" style="height: 10px !important;">
            <div class="breadcrumb" layout="row" layout-align="start center" >
                <md-icon md-font-icon="icon-home" class="s16"></md-icon>
                <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                <span class="parent">Suivi convention CISCO/FEFFI</span>
                
                <!--md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                <span class="parent" href="javascript:;"> Convention CISCO/FEFFI</span-->
            </div>

            <!--div class="title">Convention CISCO/FEFFI</div-->
                                       
            
        </div>
        
    </div>    
    
    <!-- / HEADER -->
    
    <!-- CONTENT -->
    <div class="content" layout="column">
      <div class="form-wrapper md-whiteframe-1dp" >
        <div style="clear:both;"></div>            
            <div style="float: top !important">
              <md-progress-circular ng-if="vm.affiche_load" class="md-accent" aria-label="Rating" md-mode="indeterminate" md-diameter="48"></md-progress-circular> 
              <div ng-if="vm.affiche_load" style="position:relative;top: -30px;  left: 60px;color: #039be5">
                      Chargement,veuillez patienter s'il vous plait ...
              </div>
            </div>
<!----------------------------------------------DEBUT TABS MERE-------------------------------------------------------------->
         <ms-form-wizard flex>
          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true" style="">

    <!------------------------------------DEBUT CONVENTION CISCO/FEFFI--------------------------------------------------->
            
            <md-tab>
              <md-tab-label >
                <span class="ms-form-wizard-step-label">
                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                        <i class="icon-basket-fill s16"></i>
                    </span-->
                    <span class="ms-form-wizard-step-text">Convention</span>
                </span>
               
              </md-tab-label>
              
              <md-tab-body>
               <ms-form-wizard flex id="sousmenu"> 
                <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                  <!------------------------------DEBUT ESTIMATION CONVENTION---------------------------------------------> 
                    <md-tab>
                      <md-tab-label >
                        <span class="ms-form-wizard-step-label">
                            
                            <!--span class="ms-form-wizard-step-number md-accent-bg">
                                <i class="icon-basket-fill s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Estimation convention</span>
                            <!--span class="ms-form-wizard-step-number md-accent-bg notification" >{{+vm.nbr_demande_feffi_creer + +vm.nbr_decaiss_feffi}}</span-->
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                        <div>
                          <form name="filtreform" class="md-inline-form" novalidate >
                                <br>
                              <div layout="column" layout-gt-xs="row">
                                  <md-input-container>
                                    <span>Date du</span>
                                  </md-input-container>

                                  <md-datepicker ng-model="vm.filtre.date_debut" md-max-date="vm.datenow" required>                     
                                  </md-datepicker>

                                  <md-input-container>
                                    <span>&nbsp &nbsp jusqu'au &nbsp &nbsp</span>
                                  </md-input-container>

                                  <md-datepicker ng-model="vm.filtre.date_fin" md-min-date="vm.filtre.date_debut" md-max-date="vm.datenow" ng-disabled="!vm.filtre.date_debut" required>                        
                                  </md-datepicker>

                                  <!--md-datepicker ng-model="vm.filtre.date_fin" md-placeholder="Enter date de fin"
                                md-min-date="vm.filtre.date_debut" md-max-date="vm.datenow"  md-date-locale="monthFormat" md-open-on-focus="true" ng-disabled="!vm.filtre.date_debut" required md-mode="'month'">                        
                                  </md-datepicker-->
                                </div>
                                <div layout="column" layout-gt-xs="row" ng-show="vm.session=='ADMIN' || vm.session=='ODAAF' || vm.session=='DAAF' || vm.session=='ODPFI' || vm.session=='DPFI' || vm.session=='UFP'">

                                  <md-input-container flex="100" flex-gt-xs="90">
                                    <label>Lot</label>
                                    <md-select ng-model="vm.filtre.lot" name="lot" style="overflow: hidden;text-overflow: ellipsis;">
                                      <md-option value="1">Lot 1</md-option>
                                      <md-option value="2">Lot 2</md-option>
                                      <md-option value="3">Lot 3</md-option>
                                      <md-option value="4">Lot 4</md-option>
                                    </md-select>
                                    <div ng-messages="filtreform.lot.$error" role="alert">
                                      <div ng-message="required"><span>Lot</span></div>
                                    </div>
                                  </md-input-container>
                                  <md-input-container flex="100" flex-gt-xs="90">
                                    <label>Région</label>
                                    <md-select ng-model="vm.filtre.id_region" name="region" ng-change="vm.filtre_change_region(vm.filtre)">
                                      <md-option  value="*">*</md-option>
                                      <md-option ng-repeat="region in vm.regions" value="{{region.id}}" > {{region.nom}}</md-option>
                                    </md-select>
                                    <div ng-messages="filtreform.region.$error" role="alert">
                                      <div ng-message="required"><span>Région</span></div>
                                    </div>
                                  </md-input-container>
                                  
                                  <md-input-container flex="100" flex-gt-xs="90">
                                    <label>Cisco</label>
                                    <md-select ng-model="vm.filtre.id_cisco" ng-disabled="!vm.filtre.id_region" ng-change="vm.filtre_change_cisco(vm.filtre)" name="cisco">
                                      <md-option  value="*">*</md-option>
                                      <md-option ng-repeat="d in vm.ciscos" value="{{d.id}}"> {{d.code}}</md-option>
                                                  
                                     </md-select>
                                     <div ng-messages="filtreform.cisco.$error" role="alert">
                                      <div ng-message="required"><span>Cisco</span></div>
                                    </div>
                                  </md-input-container>
                                  
                                  <md-input-container flex="100" flex-gt-xs="90">
                                    <label>Commune</label>
                                    <md-select ng-model="vm.filtre.id_commune" ng-disabled="!vm.filtre.id_cisco" name="commune" ng-change="vm.filtre_change_commune(vm.filtre)">
                                      <md-option  value="*">*</md-option>
                                      <md-option ng-repeat="eco in vm.communes" value="{{eco.id}}"> {{eco.nom}}</md-option>
                                    </md-select>
                                    <div ng-messages="filtreform.commune.$error" role="alert">
                                      <div ng-message="required"><span>Commune</span></div>
                                    </div>
                                  </md-input-container>
                                  
                                  <md-input-container flex="100" flex-gt-xs="90">
                                    <label>Ecole</label>
                                    <md-select ng-model="vm.filtre.id_ecole" name="ecole" ng-disabled="!vm.filtre.id_commune" ng-change="vm.filtre_change_ecole(vm.filtre)">
                                      <md-option  value="*">*</md-option>
                                      <md-option ng-repeat="eco in vm.ecoles" value="{{eco.id}}"> {{eco.code}}
                                      </md-option>
                                    </md-select>
                                    <div ng-messages="filtreform.ecole.$error" role="alert">
                                      <div ng-message="required"><span>Ecole</span></div>
                                    </div>
                                  </md-input-container>
                                  <md-input-container flex="100" flex-gt-xs="90">
                                    <label>Convention</label>
                                    <md-select ng-model="vm.filtre.id_convention_entete" name="convention" ng-disabled="!vm.filtre.id_ecole">
                                      <md-option  value="*">*</md-option>
                                      <md-option ng-repeat="eco in vm.convention_cisco_feffi_entetes" value="{{eco.id}}"> {{eco.ref_convention}}
                                      </md-option>
                                    </md-select>  
                                    <div ng-messages="filtreform.convention_entete.$error" role="alert">
                                      <div ng-message="required"><span>Convention</span></div>
                                    </div>
                                  </md-input-container>
                                </div>

                                <div>
                                 <md-button type="submit" class="md-raised md-accent" aria-label="Enregistrer"
                                      ng-disabled="filtreform.$invalid" ng-click="vm.recherchefiltre(vm.filtre)">
                                      Recherche
                                </md-button>
                                 <md-button type="submit" class="md-raised md-accent" aria-label="Enregistrer"
                                      ng-disabled="filtreform.$invalid" ng-click="vm.importerfiltre(vm.filtre)" ng-show="vm.session=='ADMIN' || vm.session=='DAAF' || vm.session=='DPFI' || vm.session=='UFP'">
                                      Importer
                                </md-button>
                                <md-button type="submit" class="md-raised md-primary" aria-label="Annuler" ng-click="vm.annulerfiltre()">
                                  Annuler
                                </md-button>
                                </div>
                          </form>
                          <md-divider></md-divider><br>
                        </div>

                        <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                              <thead>
                                <tr>
                                  <th class="secondary-text" ng-repeat="conv_ente in ::vm.convention_entete_column">
                                    <div class="table-header">
                                        <span class="column-title">{{conv_ente.titre}}</span>
                                    </div>
                                  </th>
                                </tr>
                              </thead>
                                             
                              <tbody>
                                <tr ng-repeat="convention_entete in vm.allconvention_entete"  ng-class="{selected: convention_entete.$selected}" ng-click="vm.selectionConvention_entete(convention_entete)">           
                                  <td>
                                    <span>{{convention_entete.cisco.code}}</span>
                                  </td>

                                  <td>
                                          <span>{{convention_entete.feffi.denomination}}</span>
                                  </td>

                                  <td>
                                    <span>{{convention_entete.site.denomination_epp}}</span>
                                  </td>

                                  <td>                         
                                    <span>{{convention_entete.ref_convention}}</span>
                                  </td>

                                  <td>                         
                                    <span>{{convention_entete.objet}}</span>
                                  </td>

                                  <td>                                    
                                    <span>{{convention_entete.ref_financement}}</span>
                                  </td>

                                  <td>                          
                                    <span>{{convention_entete.montant_total}}</span>
                                  </td>

                                  <td>                          
                                    <span>{{convention_entete.avancement}}</span>
                                  </td>

                                  <td>                          
                                    <span>{{convention_entete.user.nom}}</span>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </md-tab-body>
                    </md-tab>

                  <!----------------------------DEBUT ESTIMATION CONVENTION-convention cisco/feffi---------------->

                  <!----------------------------DEBUT SUIVI FINANCIER FEFFI---------------------------------------->
                  <md-tab ng-disabled="vm.stepMenu_feffi==false" ng-if="vm.session!='ODPFI'">
                    <md-tab-label >
                      <span class="ms-form-wizard-step-label">
                          
                          <!--span class="ms-form-wizard-step-number md-accent-bg" style="">
                            <i class="icon-currency-eur s20"></i>
                          </span-->
                          <span class="ms-form-wizard-step-text">Suivi financier FEFFI</span>
                          <span class="ms-form-wizard-step-number md-accent-bg notification" ng-show="vm.nbr_demande_feffi_creer>0">{{+vm.nbr_demande_feffi_creer+ +vm.nbr_decaiss_feffi}}</span>
                          <span class="ms-form-wizard-step-number md-accent-bg notification" ng-show="vm.nbr_demande_feffi_emidaaf+vm.nbr_demande_feffi_encourdaaf>0">{{+vm.nbr_demande_feffi_emidaaf+ +vm.nbr_demande_feffi_encourdaaf+ +vm.nbr_decaiss_feffi}}</span>
                          <span class="ms-form-wizard-step-number md-accent-bg notification" ng-show="(vm.nbr_demande_feffi_emidpfi+vm.nbr_demande_feffi_encourdpfi)>0">{{+vm.nbr_demande_feffi_emidpfi+ +vm.nbr_demande_feffi_encourdpfi}}</span>
                      </span>
                     
                    </md-tab-label>
                    
                    <md-tab-body>

               <!---------------------------------FILS SUIVI FINANCIER FEFFI----------------------------------------------->       
                     <ms-form-wizard flex id="soussousmenu"> 
                      <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                    <!---------------------------------DEBUT DEMANDE PAYEMENT-----------------------------------------------> 
                          <md-tab>
                            <md-tab-label>
                              <span class="ms-form-wizard-step-label">
                                  <!--span class="ms-form-wizard-step-number md-accent-bg">
                                    <i class="icon-basket-fill s16"></i>
                                  </span-->                          
                                  
                                  <span class="ms-form-wizard-step-text">Demande réalimentation FEFFI</span>
                                  <span class="ms-form-wizard-step-number md-accent-bg notification" ng-if="vm.nbr_demande_feffi_creer>0">{{vm.nbr_demande_feffi_creer}}</span>
                                  <span class="ms-form-wizard-step-number md-accent-bg notification" ng-if="vm.nbr_demande_feffi_emidaaf+vm.nbr_demande_feffi_encourdaaf>0">{{+vm.nbr_demande_feffi_emidaaf+ +vm.nbr_demande_feffi_encourdaaf}}</span>
                                  <span class="ms-form-wizard-step-number md-accent-bg notification" ng-if="vm.nbr_demande_feffi_emidpfi+vm.nbr_demande_feffi_encourdpfi>0">{{+vm.nbr_demande_feffi_emidpfi+ +vm.nbr_demande_feffi_encourdpfi}}</span>
                              </span>
                             
                            </md-tab-label>
                            
                            <md-tab-body>
                              <div style="widht:100%;">  
                                  <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_realimentation()" style="width:10%;" ng-if="vm.showbuttonNeauveaudemande">
                                    Nouveau
                                  </md-button>
                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_demandecreer(1)" style="width:10%;" ng-if="vm.showbuttonValidation && vm.permissionboutonValidercreer && vm.validation==0">
                                      Validation
                                    </md-button>

                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_demandeemidpfi(2)" style="width:12%;" ng-if="vm.showbuttonValidationencourdpfi && vm.permissionboutonValiderdpfi && vm.validation==1">
                                     Mettre en-cours
                                    </md-button>

                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.rejeter_demandedpfi(3)" style="width:10%;" ng-if="vm.showbuttonValidationenrejedpfi && vm.permissionboutonValiderdpfi && vm.validation==2">
                                     Rejeter
                                    </md-button>

                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_demandedpfi(4)" style="width:10%;" ng-if="vm.showbuttonValidationdpfi && vm.permissionboutonValiderdpfi && vm.validation==2">
                                     Valider
                                    </md-button>

                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_demandeemidaaf(5)" style="width:12%;" ng-if="vm.showbuttonValidationencourdaaf && vm.permissionboutonvaliderdaaf && vm.validation==4">
                                     Mettre en-cours
                                    </md-button>

                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.rejeter_demandedaaf(6)" style="width:10%;" ng-if="vm.showbuttonValidationenrejedaaf && vm.permissionboutonvaliderdaaf && vm.validation==5">
                                     Rejeter
                                    </md-button>

                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_demande_final(7)" style="width:10%;" ng-if="vm.showbuttonValidationdaaf && vm.permissionboutonvaliderdaaf && vm.validation==5">
                                     Valider
                                    </md-button>
                              </div> <br>

                              <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                <thead>
                                  <tr>
                                    <th class="secondary-text" ng-repeat="cisc in ::vm.demande_realimentation_column">
                                      <div class="table-header">
                                        <span class="column-title">{{cisc.titre}}</span>
                                      </div>
                                    </th>
                                  </tr>
                                </thead>                     
                                <tbody>
                                  <tr ng-repeat="demande_realimentation in vm.alldemande_realimentation_invalide"  ng-class="{selected: demande_realimentation.$selected}" ng-click="vm.selectionDemande_realimentation(demande_realimentation)">                             

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Tranche</label>
                                          <md-select ng-model="demande_realimentation.id_tranche_deblocage_feffi"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange(demande_realimentation)" ng-disabled="demande_realimentation.validation!=0 || !vm.NouvelItemDemande_realimentation">
                                            <md-option ng-repeat="tranche in vm.allcurenttranche_deblocage_feffi" value="{{tranche.id}}">
                                                                                        {{tranche.libelle}}
                                            </md-option>
                                          </md-select>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.tranche.libelle}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Prévu</label>
                                          <input name="prevu" type="text" ng-model="demande_realimentation.prevu" disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.prevu}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Cumul</label>
                                          <input name="cumul" type="text" ng-model="demande_realimentation.cumul" disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.cumul}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Anterieur</label>
                                          <input name="anterieur" type="text" ng-model="demande_realimentation.anterieur" disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.anterieur}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Periode</label>
                                          <input name="periode" type="text" ng-model="demande_realimentation.periode"disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.tranche.periode}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Pourcentage</label>
                                          <input name="pourcentage" type="text" ng-model="demande_realimentation.pourcentage" disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.tranche.pourcentage}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Reste</label>
                                          <input name="reste" type="text" ng-model="demande_realimentation.reste" disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.reste}}</span>
                                    </td>
                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Compte feffi</label>
                                          <md-select ng-model="demande_realimentation.id_compte_feffi"style="overflow: hidden;text-overflow: ellipsis;" ng-disabled="demande_realimentation.validation!=0" ng-change="vm.change_compte(demande_realimentation)">
                                            <md-option ng-repeat="compte_feffi in vm.allcompte_feffi" value="{{compte_feffi.id}}">
                                                                                        {{compte_feffi.nom_banque}}
                                            </md-option>
                                          </md-select>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.compte_feffi.numero_compte}}</span>
                                    </td>
                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Numero compte</label>
                                          <input name="numero_compte" type="text" ng-model="demande_realimentation.numero_compte" disabled/>
                                        </md-input-container>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{demande_realimentation.compte_feffi.numero_compte}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="demande_realimentation.$edit">
                                        <md-datepicker ng-model="demande_realimentation.date" md-placeholder="Date de signature" md-max-date="vm.datenow" required ng-disabled="demande_realimentation.validation!=0">
                                          
                                        </md-datepicker>  
                                      </span>
                                      <span ng-if="!demande_realimentation.$edit">{{vm.formatDate(demande_realimentation.date)}}</span>
                                    </td>
                                    <td>
                                      <span >{{vm.situationdemande(demande_realimentation.validation)}}</span>
                                    </td>
                                                                 
                                    <td>  
                                      <a ng-if="!demande_realimentation.$edit && demande_realimentation.validation<3" ng-click="vm.modifierDemande_realimentation(demande_realimentation)" title="Modifier">
                                        <span class="icon-table-edit"></span>
                                      </a>
                                                
                                      <a ng-if="!demande_realimentation.$edit && demande_realimentation.validation<3" ng-click="vm.supprimerDemande_realimentation(demande_realimentation)" title="Supprimer">
                                        <span class="icon-delete"></span>
                                      </a>
                                      <span ng-if="demande_realimentation.validation>2" > Aucune action disponible</span>        
                                      <a ng-if="demande_realimentation.$edit" ng-click="vm.annulerDemande_realimentation(demande_realimentation)" title="Annuler modification">
                                        <span class="icon-cancel"></span>
                                      </a>
                                                
                                      <a ng-if="demande_realimentation.$edit && demande_realimentation.date && demande_realimentation.id_tranche_deblocage_feffi && demande_realimentation.id_compte_feffi>''" ng-click="vm.ajoutDemande_realimentation(demande_realimentation,0)" title="Sauvegarder">
                                        <span class="icon-content-save"></span>
                                      </a>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                             
                            </md-tab-body>
                          </md-tab>
                    <!---------------------------------FIN DEMANDE PAYEMENT----------------------------------------------->


                    <!---------------------------------DEBUT PIECE JUSTIFICATIVE------------------------------------------->
                          <md-tab ng-disabled="vm.steppiecefeffi==false || vm.session=='ODAAF'">
                            <md-tab-label>
                              <span class="ms-form-wizard-step-label">
                                  <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                                  <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                                    <i class="icon-attachment s16"></i>
                                  </span-->
                                  <!--span class="ms-form-wizard-step-number md-accent-bg">
                                    <i class="icon-attachment s16"></i>
                                  </span-->
                                  <span class="ms-form-wizard-step-text">Pièce jointe</span>
                              </span>
                             
                            </md-tab-label>
                            
                           <md-tab-body>
                               <div style="widht:100%;">  
                                  <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPiece_justificatif_feffi()" style="width:10%;" ng-if="vm.validation==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                    Nouveau
                                  </md-button>
                              </div> <br>

                              <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text" ng-repeat="cisc in ::vm.piece_justificatif_feffi_column">
                                  <div class="table-header">
                                    <span class="column-title">{{cisc.titre}}</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>                     
                            <tbody>
                              <tr ng-repeat="piece_justificatif_feffi in vm.allpiece_justificatif_feffi"  ng-class="{selected: piece_justificatif_feffi.$selected}" ng-click="vm.selectionPiece_justificatif_feffi(piece_justificatif_feffi)">

                                <td>
                                  <span ng-if="piece_justificatif_feffi.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Description</label>
                                      <input name="description" type="text" ng-model="piece_justificatif_feffi.description"/>
                                    </md-input-container>  
                                  </span>
                                  <span ng-if="!piece_justificatif_feffi.$edit">{{piece_justificatif_feffi.description}}</span>
                                </td>

                                <td>
                                  <span ng-if="piece_justificatif_feffi.$edit" style="display: inline-block !important;">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Fichier</label>
                                        <input name="fichier" type="text" ng-model="piece_justificatif_feffi.fichier" disabled/>
                                      </md-input-container>   
                                  </span>
                                  <span ng-if="piece_justificatif_feffi.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <!--label>Fichier</label-->
                                    <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile"  ng-model="fichier" id="fileid"/>
                                    </md-input-container>  
                                  </span>
                                            
                                  <span ng-if="!piece_justificatif_feffi.$edit">{{piece_justificatif_feffi.fichier}}</span>
                                </td>

                                <td>
                                  <span ng-if="piece_justificatif_feffi.$edit">
                                    <md-datepicker ng-model="piece_justificatif_feffi.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                  </md-datepicker>  
                                  </span>
                                            
                                  <span ng-if="!piece_justificatif_feffi.$edit">{{vm.formatDate(piece_justificatif_feffi.date)}}</span>
                                </td>
                                                             
                                <td>  
                                  <a ng-if="!piece_justificatif_feffi.$edit && vm.validation==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')" ng-click="vm.modifierPiece_justificatif_feffi(piece_justificatif_feffi)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!piece_justificatif_feffi.$edit && vm.validation==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')" ng-click="vm.supprimerPiece_justificatif_feffi(piece_justificatif_feffi)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>
                                                  
                                  <a ng-if="!piece_justificatif_feffi.$edit" ng-click="vm.download_piece_justificatif(piece_justificatif_feffi)" title="Telecharger fichier">
                                    <span class="icon-box-download"></span>
                                  </a>
                                            
                                  <a ng-if="piece_justificatif_feffi.$edit" ng-click="vm.annulerPiece_justificatif_feffi(piece_justificatif_feffi)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="piece_justificatif_feffi.$edit && piece_justificatif_feffi.description && piece_justificatif_feffi.date>''" ng-click="vm.ajoutPiece_justificatif_feffi(piece_justificatif_feffi,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                            </md-tab-body>
                          </md-tab>

                   <!---------------------------------FIN PIECE JUSTIFICATIVE------------------------------------------->

                   <!---------------------------------------DEBUT Transfert daaf----------------------------------------->

                        <md-tab ng-disabled="vm.steptransdaaf==false || vm.validation!=7" ng-if="vm.session!='ODPFI' || vm.session!='OBCAF' ">
                          <md-tab-label>
                            <span class="ms-form-wizard-step-label">
                                <!--span class="ms-form-wizard-step-number md-accent-bg">
                                    <i class="icon-currency-eur s16"></i>
                                </span-->
                              <span class="ms-form-wizard-step-text">Transfert</span>
                            </span>
                          </md-tab-label>
                          
                          <md-tab-body>
                             <div style="widht:100%;">  
                                <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterTransfert_daaf()" style="width:10%;" ng-if="vm.showbuttonNouvtransfert_daaf && (vm.session=='ODAFF' || vm.session=='DAAF' || vm.session=='ADMIN')">
                                  Nouveau
                                </md-button>
                                <span>{{vm.showbuttonNouvtransfert_daaf}}</span>
                                <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_transfert_daaf()" style="width:10%;" ng-if="vm.showbuttonValidation_trans_daaf && vm.permissionboutonvalidertrans_daaf && vm.validation_transfert_daaf==0">
                                     Valider
                                </md-button>
                            </div> <br>

                            <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                          <thead>
                            <tr>
                              <th class="secondary-text" ng-repeat="cisc in ::vm.transfert_daaf_column">
                                <div class="table-header">
                                  <span class="column-title">{{cisc.titre}}</span>
                                </div>
                              </th>
                            </tr>
                          </thead>                     
                          <tbody>
                            <tr ng-repeat="transfert_daaf in vm.alltransfert_daaf"  ng-class="{selected: transfert_daaf.$selected}" ng-click="vm.selectionTransfert_daaf(transfert_daaf)">
                                              
                                    <td>
                                      <span ng-if="transfert_daaf.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Montant transfert</label>
                                          <input name="montant_transfert" type="number" ng-model="transfert_daaf.montant_transfert" disabled/>
                                        </md-input-container>   
                                      </span>
                                                
                                      <span ng-if="!transfert_daaf.$edit">{{transfert_daaf.montant_transfert}}</span>
                                    </td>
                                              
                                    <td>
                                      <span ng-if="transfert_daaf.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Frais bancaire</label>
                                          <input name="frais_bancaire" type="text" ng-model="transfert_daaf.frais_bancaire" ng-change="vm.changeFraibancaire(transfert_daaf)"/>
                                        </md-input-container>   
                                      </span>
                                                
                                      <span ng-if="!transfert_daaf.$edit">{{transfert_daaf.frais_bancaire}}</span>
                                    </td>
                                              
                                    <td>
                                      <span ng-if="transfert_daaf.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Montant total</label>
                                          <input name="montant_total" type="text" ng-model="transfert_daaf.montant_total" disabled/>
                                        </md-input-container>   
                                      </span>
                                                
                                      <span ng-if="!transfert_daaf.$edit">{{transfert_daaf.montant_total}}</span>
                                    </td>

                                     <td>
                                      <span ng-if="transfert_daaf.$edit">
                                        <md-datepicker ng-model="transfert_daaf.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                        </md-datepicker>
                                      </span>                          
                                      <span ng-if="!transfert_daaf.$edit">{{vm.formatDate(transfert_daaf.date)}}</span>
                                    </td>
                                    <td>                                                
                                      <span>{{vm.affichage_trans(transfert_daaf.validation)}}</span>
                                    </td>
                                              
                                    <td>
                                      <span ng-if="transfert_daaf.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Observation</label>
                                          <input name="observation" type="text" ng-model="transfert_daaf.observation"/>
                                        </md-input-container>   
                                      </span>
                                                
                                      <span ng-if="!transfert_daaf.$edit">{{transfert_daaf.observation}}</span>
                                    </td>
                                                                 
                                    <td>
                                      <a ng-if="!transfert_daaf.$edit && transfert_daaf.validation==0" ng-click="vm.modifierTransfert_daaf(transfert_daaf)" title="Modifier">
                                        <span class="icon-table-edit"></span>
                                      </a>
                                                
                                      <a ng-if="!transfert_daaf.$edit && transfert_daaf.validation==0" ng-click="vm.supprimerTransfert_daaf(transfert_daaf)" title="Supprimer">
                                        <span class="icon-delete"></span>
                                      </a>
                                      <span ng-if=" transfert_daaf.validation==1">Aucune action disponible</span>        
                                      <a ng-if="transfert_daaf.$edit" ng-click="vm.annulerTransfert_daaf(transfert_daaf)" title="Annuler modification">
                                        <span class="icon-cancel"></span>
                                      </a>
                                                
                                      <a ng-if="transfert_daaf.$edit && transfert_daaf.montant_transfert && transfert_daaf.date && transfert_daaf.frais_bancaire && transfert_daaf.montant_total >''" ng-click="vm.ajoutTransfert_daaf(transfert_daaf,0)" title="Sauvegarder">
                                        <span class="icon-content-save"></span>
                                      </a>
                                    </td>
                                  </tr>
                          </tbody>
                        </table>
                          </md-tab-body>
                        </md-tab>
                    <!--------------------------------------Fin Transfert daaf-------------------------------------------->


                    <!-----------------------DEBUT DECAISSEMENT FONCTIONNEMENT FEFFI------------------------------------->
                          <md-tab ng-disabled="vm.session=='ODAAF' || vm.session=='ODPFI'">
                            <md-tab-label>
                              <span class="ms-form-wizard-step-label">
                                  <!--span class="ms-form-wizard-step-number md-accent-bg">
                                    <i class="icon-basket-unfill s16"></i>
                                  </span-->
                                  <span class="ms-form-wizard-step-text">Décaissement fonctionnement</span>
                                  <span class="ms-form-wizard-step-number md-accent-bg notification">{{vm.nbr_decaiss_feffi}}</span>
                              </span>
                             
                            </md-tab-label>
                            
                           <md-tab-body>
                               <div style="widht:100%;">  
                                  <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDecaiss_fonct_feffi()" style="width:10%;" ng-show="vm.session=='OBCAF'">
                                    Nouveau
                                  </md-button>  
                                  <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDecaiss_fonct_feffi()" style="width:10%;" ng-show="vm.showbuttonValidation_dec_feffi && vm.permissionboutonvaliderdecais_fef && vm.validation_decais_fef==0">
                                    Validation
                                  </md-button>
                              </div>

                              <div>        
                              <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                <thead>
                                  <tr>
                                    <th class="secondary-text">
                                      <div class="table-header">
                                        <span class="column-title">montant</span>
                                      </div>
                                    </th>
                                    <th class="secondary-text">
                                      <div class="table-header">
                                        <span class="column-title">Date Decaissement</span>
                                      </div>
                                    </th>
                                    <th class="secondary-text">
                                      <div class="table-header">
                                        <span class="column-title">Situation</span>
                                      </div>
                                    </th>
                                    <th class="secondary-text">
                                      <div class="table-header">
                                        <span class="column-title">Observation</span>
                                      </div>
                                    </th>
                                    <th class="secondary-text">
                                      <div class="table-header">
                                        <span class="column-title">Action</span>
                                      </div>
                                    </th>
                                  </tr>
                                </thead>
                                         
                                <tbody>
                                  <tr ng-repeat="decaiss_fonct_feffi in vm.alldecaiss_fonct_feffi"  ng-class="{selected: decaiss_fonct_feffi.$selected}" ng-click="vm.selectionDecaiss_fonct_feffi(decaiss_fonct_feffi)">

                                    <td>
                                      <span ng-if="decaiss_fonct_feffi.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Montant</label>
                                          <input name="montant" type="text" ng-model="decaiss_fonct_feffi.montant"/>
                                        </md-input-container>   
                                      </span>
                                                
                                      <span ng-if="!decaiss_fonct_feffi.$edit">{{decaiss_fonct_feffi.montant}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="decaiss_fonct_feffi.$edit">
                                        <md-datepicker ng-model="decaiss_fonct_feffi.date_decaissement" md-placeholder="Date de decaissement" md-max-date="vm.datenow" required>                       
                                        </md-datepicker>
                                      </span>                          
                                      <span ng-if="!decaiss_fonct_feffi.$edit">{{vm.formatDate(decaiss_fonct_feffi.date_decaissement)}}</span>
                                    </td>
                                    <td>                                                
                                      <span>{{vm.affichage_situa_decais(decaiss_fonct_feffi.validation)}}</span>
                                    </td>

                                    <td>
                                      <span ng-if="decaiss_fonct_feffi.$edit">
                                        <md-input-container style="width:100%;display: flex !important;">
                                          <label>Observation</label>
                                          <input name="observation" type="text" ng-model="decaiss_fonct_feffi.observation"/>
                                        </md-input-container>   
                                      </span>
                                                
                                      <span ng-if="!decaiss_fonct_feffi.$edit">{{decaiss_fonct_feffi.observation}}</span>
                                    </td>

                                    <td>
                                      <a ng-if="!decaiss_fonct_feffi.$edit && decaiss_fonct_feffi.validation==0" ng-click="vm.modifierDecaiss_fonct_feffi(decaiss_fonct_feffi)" title="Modifier">
                                        <span class="icon-table-edit"></span>
                                      </a>
                                                
                                      <a ng-if="!decaiss_fonct_feffi.$edit && decaiss_fonct_feffi.validation==0" ng-click="vm.supprimerDecaiss_fonct_feffi(decaiss_fonct_feffi)" title="Supprimer">
                                        <span class="icon-delete"></span>
                                      </a>
                                      <span ng-if="decaiss_fonct_feffi.validation==1">Aucune action disponible</span>          
                                      <a ng-if="decaiss_fonct_feffi.$edit" ng-click="vm.annulerDecaiss_fonct_feffi(decaiss_fonct_feffi)" title="Annuler modification">
                                        <span class="icon-cancel"></span>
                                      </a>
                                                
                                      <a ng-if="decaiss_fonct_feffi.$edit && decaiss_fonct_feffi.montant && decaiss_fonct_feffi.date_decaissement >''" ng-click="vm.ajoutDecaiss_fonct_feffi(decaiss_fonct_feffi,0)" title="Sauvegarder">
                                        <span class="icon-content-save"></span>
                                      </a>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            </md-tab-body>
                          </md-tab>

                   <!---------------------------FIN DECAISSEMENT FONCTIONNEMENT FEFFI-------------------------------------->         
                          <md-tab>
                          </md-tab>
                  <!---------------------convention cisco/feffi---------------->
                  
                        </md-tabs> 
                      </ms-form-wizard>
                <!---------------------------------FILS SUIVI FINANCIER FEFFI-----------------------------------------------> 

                    </md-tab-body>
                  </md-tab>

                  <md-tab ng-disabled="vm.stepMenu_feffi==false">                    
                      <md-tab-label >
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Avenant</span>
                        </span>
                       
                      </md-tab-label>

                      <md-tab-body>
                        <div style="widht:100%;">  
                                    <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvenant_convention()" style="width:10%;" ng-show="vm.showbuttonNouvavenant_convention">
                                      Nouveau
                                    </md-button>
                                  <md-button type="submit" ng-show="vm.showbuttonValidation_avenant_convention && vm.permissionboutonvalideravenant_convention && vm.validation_avenant_convention==0" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerAvenant_convention()" style="width:10%;">
                                    Valider
                                  </md-button>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.avenant_convention_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="avenant_convention in vm.allavenant_convention"  ng-class="{selected: avenant_convention.$selected}" ng-click="vm.selectionAvenant_convention(avenant_convention)">
                                                
                                      <td>
                                        <span ng-if="avenant_convention.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Descriprtion</label>
                                            <input name="description" type="text" ng-model="avenant_convention.description"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_convention.$edit">{{avenant_convention.description}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_convention.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout batiment</label>
                                            <input name="montant" type="text" ng-model="avenant_convention.montant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_convention.$edit">{{avenant_convention.montant}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_convention.$edit">
                                          <md-datepicker ng-model="avenant_convention.date_signature" md-placeholder="Date de signature" md-max-date="vm.date_now" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!avenant_convention.$edit">{{vm.formatDate(avenant_convention.date_signature)}}</span>
                                      </td>                      
                                      <td>
                                        <a ng-if="!avenant_convention.$edit && avenant_convention.validation==0" ng-click="vm.modifierAvenant_convention(avenant_convention)" title="Modifier">
                                          <span class="icon-table-edit"></span>
                                        </a>
                                                  
                                        <a ng-if="!avenant_convention.$edit && avenant_convention.validation==0" ng-click="vm.supprimerAvenant_convention(avenant_convention)" title="Supprimer">
                                          <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!avenant_convention.$edit && avenant_convention.validation==1">Aucune action disponible</span>          
                                        <a ng-if="avenant_convention.$edit" ng-click="vm.annulerAvenant_convention(avenant_convention)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="avenant_convention.$edit && avenant_convention.description &&  avenant_convention.montant &&  avenant_convention.date_signature>''" ng-click="vm.ajoutAvenant_convention(avenant_convention,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                        <!--ms-form-wizard flex id="soussousmenu"> 
                          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">
                            <md-tab>
                    
                                <md-tab-label >
                                  <span class="ms-form-wizard-step-label">
                                      <span class="ms-form-wizard-step-text">Avenant</span>
                                  </span>
                                 
                                </md-tab-label>
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                    <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvenant_convention()" style="width:10%;" ng-show="vm.showbuttonNouvavenant_convention">
                                      Nouveau
                                    </md-button>
                                  <md-button type="submit" ng-show="vm.showbuttonValidation_avenant_convention && vm.permissionboutonvalideravenant_convention" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerAvenant_convention()" style="width:10%;">
                                    Valider
                                  </md-button>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.avenant_convention_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="avenant_convention in vm.allavenant_convention"  ng-class="{selected: avenant_convention.$selected}" ng-click="vm.selectionAvenant_convention(avenant_convention)">
                                                
                                      <td>
                                        <span ng-if="avenant_convention.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Descriprtion</label>
                                            <input name="description" type="text" ng-model="avenant_convention.description"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_convention.$edit">{{avenant_convention.description}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_convention.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout batiment</label>
                                            <input name="montant" type="text" ng-model="avenant_convention.montant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_convention.$edit">{{avenant_convention.montant}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_convention.$edit">
                                          <md-datepicker ng-model="avenant_convention.date_signature" md-placeholder="Date de signature" md-max-date="vm.date_now" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!avenant_convention.$edit">{{vm.formatDate(avenant_convention.date_signature)}}</span>
                                      </td>                      
                                      <td>
                                        <a ng-if="!avenant_convention.$edit && avenant_convention.validation==0" ng-click="vm.modifierAvenant_convention(avenant_convention)" title="Modifier">
                                          <span class="icon-table-edit"></span>
                                        </a>
                                                  
                                        <a ng-if="!avenant_convention.$edit && avenant_convention.validation==0" ng-click="vm.supprimerAvenant_convention(avenant_convention)" title="Supprimer">
                                          <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!avenant_convention.$edit && avenant_convention.validation==1"></span>          
                                        <a ng-if="avenant_convention.$edit" ng-click="vm.annulerAvenant_convention(avenant_convention)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="avenant_convention.$edit && avenant_convention.description &&  avenant_convention.montant &&  avenant_convention.date_signature>''" ng-click="vm.ajoutAvenant_convention(avenant_convention,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                                </md-tab-body>
                            </md-tab>
                            <md-tab ng-disabled="vm.stepPai_avenan_conve==false || vm.validation_avenant_convention=0">
                    
                                <md-tab-label >
                                  <span class="ms-form-wizard-step-label">
                                      <span class="ms-form-wizard-step-text">Payement</span>
                                  </span>
                                 
                                </md-tab-label>
                                <md-tab-body>
                                </md-tab-body>
                            </md-tab>
                          </md-tabs> 
                        </ms-form-wizard-->
                      </md-tab-body>
                  </md-tab>
          <!------------------------------------FIN CONVENTION CISCO/FEFFI--------------------------------------------------->
                          
                          
                    <!-------------------------------Debut document feffi -------------------------------------------->
                    <md-tab >
                        <md-tab-label>
                          <span class="ms-form-wizard-step-label">
                              <span class="ms-form-wizard-step-text">Importer document</span>
                          </span>
                        </md-tab-label>
                        
                        <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDocument_feffi_scan()" style="width:10%;" ng-show="vm.showbuttonValidation_document_feffi_scan && vm.permissionboutonvaliderdocument_feffi_scan && vm.validation_document_feffi_scan==0">
                                Validation
                              </md-button>
                          </div><br>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Code</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Intitule</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Existance</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Fichier</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Date Elaboration</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Observation</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Action</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="document_feffi_scan in vm.alldocument_feffi_scan"  ng-class="{selected: document_feffi_scan.$selected}" ng-click="vm.selectionDocument_feffi_scan(document_feffi_scan)">

                                <td>                                            
                                  <span>{{document_feffi_scan.code}}</span>
                                </td>

                                <td>                                            
                                  <span>{{document_feffi_scan.intitule}}</span>
                                </td>
                                
                                <td>                                 
                                   <md-checkbox ng-model="document_feffi_scan.existance" aria-label="Checkbox 1" disabled>
                                  </md-checkbox>
                                </td>
                                          
                                <td>
                                  <span ng-if="document_feffi_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                      <input name="fichier" type="text" ng-model="document_feffi_scan.fichier" disabled/>
                                    </md-input-container>   
                                  </span>

                                  <span ng-if="document_feffi_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                    <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile_doc_feffi"  ng-model="fichier" id="fileid"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_feffi_scan.$edit">{{document_feffi_scan.fichier}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_feffi_scan.$edit">
                                    <md-datepicker ng-model="document_feffi_scan.date_elaboration" md-placeholder="Date de elaboration" md-max-date="vm.date_now" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!document_feffi_scan.$edit">{{vm.formatDate(document_feffi_scan.date_elaboration)}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_feffi_scan.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Observation</label>
                                      <input name="observation" type="text" ng-model="document_feffi_scan.observation"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_feffi_scan.$edit">{{document_feffi_scan.observation}}</span>
                                </td>

                                <td>
                                  <a ng-if="!document_feffi_scan.$edit && (document_feffi_scan.validation==0 || document_feffi_scan.validation==null)" ng-click="vm.modifierDocument_feffi_scan(document_feffi_scan)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!document_feffi_scan.$edit && document_feffi_scan.validation==0" ng-click="vm.supprimerDocument_feffi_scan(document_feffi_scan)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>                        
                                            
                                  <a ng-if="!document_feffi_scan.$edit && document_feffi_scan.existance" ng-click="vm.download_document_feffi_scan(document_feffi_scan)" title="Telecharger fichier">
                                    <span class="icon-box-download"></span>
                                  </a>
                                            
                                  <a ng-if="document_feffi_scan.$edit" ng-click="vm.annulerDocument_feffi_scan(document_feffi_scan)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="document_feffi_scan.$edit && document_feffi_scan.fichier && document_feffi_scan.date_elaboration >''" ng-click="vm.ajoutDocument_feffi_scan(document_feffi_scan,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <!--------------------------------------FIN document moe --------------------------------------------> 
                  </md-tabs> 
                </ms-form-wizard>
              </md-tab-body>
            </md-tab>
    <!------------------------------------FIN CONVENTION CISCO/FEFFI--------------------------------------------------->

    
            <md-tab ng-disabled="vm.stepMenu_pr==false || vm.session=='ODAAF'">
              <md-tab-label >
                <span class="ms-form-wizard-step-label">
                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                      <i class="icon-arrange-send-to-back s16"></i>
                    </span-->
                    <span class="ms-form-wizard-step-text">PARTENAIRES RELAIS</span>
                    <span class="ms-form-wizard-step-number md-accent-bg notification" >3</span>
                </span>
               
              </md-tab-label>
              
              <md-tab-body>
               <ms-form-wizard flex id="sousmenu"> 
                <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                    <!-------------------convention cisco/feffi----------------->
                    <md-tab ng-disabled="vm.session=='OBCAF'">
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">DF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Passation des marchés</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPassation_marches_pr()" style="width:10%;" ng-show="vm.showbuttonNouvPassation_pr">
                                Nouveau
                              </md-button> 
                              <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validation_passation_marche_pr()" style="width:10%;" ng-show="vm.showbuttonValidationpassation_pr && vm.permissionboutonvaliderpassation_pr && vm.validation_passation_pr==0">
                                    Validation
                              </md-button>
                          </div><br>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text" ng-repeat="mem in ::vm.passation_marches_pr_column">
                                  <div class="table-header">
                                    <span class="column-title">{{mem.titre}}</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="passation_marches_pr in vm.allpassation_marches_pr"  ng-class="{selected: passation_marches_pr.$selected}" ng-click="vm.selectionPassation_marches_pr(passation_marches_pr)">

                                <td>
                                  <span ng-if="passation_marches_pr.$edit">
                                    <md-datepicker ng-model="passation_marches_pr.date_manifestation" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_pr.$edit">{{vm.formatDate(passation_marches_pr.date_manifestation)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_pr.$edit">
                                    <md-datepicker ng-model="passation_marches_pr.date_lancement_dp" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_pr.$edit">{{vm.formatDate(passation_marches_pr.date_lancement_dp)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_pr.$edit">
                                    <md-datepicker ng-model="passation_marches_pr.date_remise" md-placeholder="Date de signature" md-min-date="passation_marches_pr.date_lancement_dp" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches_pr.$edit">{{vm.formatDate(passation_marches_pr.date_remise)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_pr.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Nombre offre recu</label>
                                      <input name="nbr_offre_recu" type="number" ng-model="passation_marches_pr.nbr_offre_recu"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches_pr.$edit">{{passation_marches_pr.nbr_offre_recu}}</span>
                                </td>                      

                                <td>
                                  <span ng-if="passation_marches_pr.$edit">
                                    <md-datepicker ng-model="passation_marches_pr.date_os" md-placeholder="Date de signature" md-min-date="passation_marches_pr.date_signature_contrat" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_pr.$edit">{{vm.formatDate(passation_marches_pr.date_os)}}</span>
                                </td>
                                                             
                                <td>
                                  <a ng-if="!passation_marches_pr.$edit && passation_marches_pr.validation ==0" ng-click="vm.modifierPassation_marches_pr(passation_marches_pr)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!passation_marches_pr.$edit && passation_marches_pr.validation ==0" ng-click="vm.supprimerPassation_marches_pr(passation_marches_pr)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>
                                  <span ng-if="!passation_marches_pr.$edit && passation_marches_pr.validation ==1">Aucune action disponible</span>       
                                  <a ng-if="passation_marches_pr.$edit" ng-click="vm.annulerPassation_marches_pr(passation_marches_pr)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="passation_marches_pr.$edit && passation_marches_pr.date_manifestation && passation_marches_pr.date_lancement_dp && passation_marches_pr.date_remise && passation_marches_pr.nbr_offre_recu >''" ng-click="vm.ajoutPassation_marches_pr(passation_marches_pr,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Contrat</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                        <div style="widht:100%;">  
                            <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterContrat_partenaire_relai()" style="width:10%;" ng-show="vm.showbuttonNouvcontrat_pr">
                              Nouveau
                            </md-button>
                            <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_contrat()" style="width:10%;" ng-show="vm.showbuttonValidationcontrat_pr && vm.permissionboutonvalidercontrat_pr && vm.validation_contrat_pr==0">
                              Validation
                            </md-button><br>
                        </div>
                       <div>        
                        <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                          <thead>
                            <tr>
                              <th class="secondary-text" ng-repeat="mem in ::vm.contrat_partenaire_relai_column">
                                <div class="table-header">
                                  <span class="column-title">{{mem.titre}}</span>
                                </div>
                              </th>
                            </tr>
                          </thead>
                                   
                          <tbody>
                            <tr ng-repeat="contrat_partenaire_relai in vm.allcontrat_partenaire_relai"  ng-class="{selected: contrat_partenaire_relai.$selected}" ng-click="vm.selectionContrat_partenaire_relai(contrat_partenaire_relai)">                            

                              <td>
                                <span ng-if="contrat_partenaire_relai.$edit">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>partenaire_relai</label>
                                    <md-select ng-model="contrat_partenaire_relai.id_partenaire_relai"style="overflow: hidden;text-overflow: ellipsis;">
                                      <md-option ng-repeat="partenaire_relai in vm.allpartenaire_relai" value="{{partenaire_relai.id}}">
                                                                            {{partenaire_relai.nom}}
                                      </md-option>
                                    </md-select>
                                  </md-input-container>   
                                </span>
                                          
                                <span ng-if="!contrat_partenaire_relai.$edit">{{contrat_partenaire_relai.partenaire_relai.nom}}</span>
                              </td>
                                        
                              <td>
                                <span ng-if="contrat_partenaire_relai.$edit">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>Intitule objet</label>
                                    <input name="intitule" type="text" ng-model="contrat_partenaire_relai.intitule"/>
                                  </md-input-container>   
                                </span>
                                          
                                <span ng-if="!contrat_partenaire_relai.$edit">{{contrat_partenaire_relai.intitule}}</span>
                              </td>
                                        
                              <td>
                                <span ng-if="contrat_partenaire_relai.$edit">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>Réference contrat</label>
                                    <input name="ref_contrat" type="text" ng-model="contrat_partenaire_relai.ref_contrat"/>
                                  </md-input-container>   
                                </span>
                                          
                                <span ng-if="!contrat_partenaire_relai.$edit">{{contrat_partenaire_relai.ref_contrat}}</span>
                              </td>
                                        
                              <td>
                                <span ng-if="contrat_partenaire_relai.$edit">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>Montant contrat</label>
                                    <input name="montant_contrat" type="number" ng-model="contrat_partenaire_relai.montant_contrat"/>
                                  </md-input-container>   
                                </span>
                                          
                                <span ng-if="!contrat_partenaire_relai.$edit">{{contrat_partenaire_relai.montant_contrat}}</span>
                              </td>

                              <td>
                                <span ng-if="contrat_partenaire_relai.$edit">
                                  <md-datepicker ng-model="contrat_partenaire_relai.date_signature" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                  </md-datepicker>
                                </span>                          
                                <span ng-if="!contrat_partenaire_relai.$edit">{{vm.formatDate(contrat_partenaire_relai.date_signature)}}</span>
                              </td>
                               <!--td>           
                                <span ng-if="!contrat_partenaire_relai.$edit">{{contrat_partenaire_relai.delai_execution}}</span>
                              </td-->
                                                           
                              <td>
                                <a ng-if="!contrat_partenaire_relai.$edit && contrat_partenaire_relai.validation==0" ng-click="vm.modifierContrat_partenaire_relai(contrat_partenaire_relai)" title="Modifier">
                                  <span class="icon-table-edit"></span>
                                </a>
                                          
                                <a ng-if="!contrat_partenaire_relai.$edit && contrat_partenaire_relai.validation==0" ng-click="vm.supprimerContrat_partenaire_relai(contrat_partenaire_relai)" title="Supprimer">
                                  <span class="icon-delete"></span>
                                </a>
                               <span ng-if="contrat_partenaire_relai.validation==1">Aucune action disponible</span>
                                <a ng-if="contrat_partenaire_relai.$edit" ng-click="vm.annulerContrat_partenaire_relai(contrat_partenaire_relai)" title="Annuler modification">
                                  <span class="icon-cancel"></span>
                                </a>
                                          
                                <a ng-if="contrat_partenaire_relai.$edit && contrat_partenaire_relai.intitule && contrat_partenaire_relai.ref_contrat && contrat_partenaire_relai.montant_contrat &&  contrat_partenaire_relai.date_signature && contrat_partenaire_relai.id_partenaire_relai>''" ng-click="vm.ajoutContrat_partenaire_relai(contrat_partenaire_relai,0)" title="Sauvegarder">
                                  <span class="icon-content-save"></span>
                                </a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>

                    </md-tab-body>
                    </md-tab>
                    <md-tab ng-disabled="!vm.stepprestaion_pr || vm.validation_contrat_pr==0">
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Prestation</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>

               <!---------------------------------FILS PRESTATION----------------------------------------------->       
                         <ms-form-wizard flex id="soussousmenu"> 
                          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                        <!-----------------------------DEBUT FORMATION DPP--------------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Formation dpp</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterModule_dpp()" style="width:10%;" ng-show="vm.showbuttonNouvformdpp">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerModule_dpp()" style="width:10%;" ng-show="vm.showbuttonValidationformdpp && vm.permissionboutonvaliderformdpp && vm.validation_formationdpp==0">
                                          Validation
                                        </md-button><br>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.module_dpp_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="module_dpp in vm.allmodule_dpp"  ng-class="{selected: module_dpp.$selected}" ng-click="vm.selectionModule_dpp(module_dpp)">
                                        <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-datepicker ng-model="module_dpp.date_debut_previ_form" md-placeholder="Date de debut prévisionnelle" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!module_dpp.$edit">{{vm.formatDate(module_dpp.date_debut_previ_form)}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-datepicker ng-model="module_dpp.date_fin_previ_form" md-placeholder="Date de fin prévisionnelle" md-max-date="vm.datenow" md-min-date="module_dpp.date_debut_previ_form" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!module_dpp.$edit">{{vm.formatDate(module_dpp.date_fin_previ_form)}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-datepicker ng-model="module_dpp.date_previ_resti" md-placeholder="Date prévisionnelle de restitution" md-max-date="vm.datenow" md-min-date="module_dpp.date_debut_previ_form" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!module_dpp.$edit">{{vm.formatDate(module_dpp.date_previ_resti)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-datepicker ng-model="module_dpp.date_debut_reel_form" md-placeholder="Date de debut réelle" md-min-date="module_dpp.date_previ_resti" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{vm.formatDate(module_dpp.date_debut_reel_form)}}</span>
                                          </td>
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-datepicker ng-model="module_dpp.date_fin_reel_form" md-placeholder="Date de fin réelle" md-min-date="module_dpp.date_debut_reel_form" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!module_dpp.$edit">{{vm.formatDate(module_dpp.date_fin_reel_form)}}</span>
                                          </td>
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-datepicker ng-model="module_dpp.date_reel_resti" md-placeholder="Date réelle de restitution" md-min-date="module_dpp.date_previ_resti" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!module_dpp.$edit">{{vm.formatDate(module_dpp.date_reel_resti)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nombre previsionnel participant</label>
                                                <input name="nbr_previ_parti" type="number" ng-model="module_dpp.nbr_previ_parti"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{module_dpp.nbr_previ_parti}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nombre participant</label>
                                                <input name="nbr_parti" type="number" ng-model="module_dpp.nbr_parti" disabled />
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{module_dpp.nbr_parti}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nombre previsionnel femme participant</label>
                                                <input name="nbr_previ_fem_parti" type="number" ng-model="module_dpp.nbr_previ_fem_parti"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{module_dpp.nbr_previ_fem_parti}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nombre réel femme participant</label>
                                                <input name="nbr_reel_fem_parti" type="number" ng-model="module_dpp.nbr_reel_fem_parti" disabled />
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{module_dpp.nbr_reel_fem_parti}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Lieu formation</label>
                                                <input name="lieu_formation" type="text" ng-model="module_dpp.lieu_formation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{module_dpp.lieu_formation}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="module_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Observation</label>
                                                <input name="observation" type="text" ng-model="module_dpp.observation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!module_dpp.$edit">{{module_dpp.observation}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!module_dpp.$edit && module_dpp.validation==0" ng-click="vm.modifierModule_dpp(module_dpp)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!module_dpp.$edit && module_dpp.validation==0" ng-click="vm.supprimerModule_dpp(module_dpp)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            <span ng-if="!module_dpp.$edit && module_dpp.validation==1">Aucune action disponible</span>        
                                            <a ng-if="module_dpp.$edit" ng-click="vm.annulerModule_dpp(module_dpp)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="module_dpp.$edit && module_dpp.date_debut_previ_form && module_dpp.date_fin_previ_form && module_dpp.date_previ_resti && module_dpp.date_debut_reel_form && module_dpp.nbr_previ_parti && module_dpp.date_fin_reel_form && module_dpp.date_reel_resti && module_dpp.nbr_previ_fem_parti && module_dpp.lieu_formation && module_dpp.observation >''" ng-click="vm.ajoutModule_dpp(module_dpp,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN FORMATION DPP----------------------------------------------->

                        <!----------------------------------Debut participant_dpp ----------------------------------------->
                              <md-tab ng-disabled="!vm.stepparticipantdpp">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                        <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                          <i class="icon-check s16"></i>
                                        </span-->
                                          <!--span class="ms-form-wizard-step-number md-accent-bg">
                                            <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Participant ddp</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterParticipant_dpp()" style="width:10%;" ng-show="vm.validation_formationdpp==0">
                                          Nouveau
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" >
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.participant_dpp_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="participant_dpp in vm.allparticipant_dpp"  ng-class="{selected: participant_dpp.$selected}" ng-click="vm.selectionParticipant_dpp(participant_dpp)">           
                                          <td>
                                            <span ng-if="participant_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nom</label>
                                                <input name="nom" type="text" ng-model="participant_dpp.nom"/>
                                              </md-input-container>
                                            </span>                          
                                            <span ng-if="!participant_dpp.$edit">{{participant_dpp.nom}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="participant_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Prenom</label>
                                                <input name="prenom" type="text" ng-model="participant_dpp.prenom"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!participant_dpp.$edit">{{participant_dpp.prenom}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="participant_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Sexe</label>
                                                <md-select ng-model="participant_dpp.sexe"style="overflow: hidden;text-overflow: ellipsis;">
                                                    <md-option value="1">Masculin
                                                    </md-option>
                                                    <md-option value="2">Femimin
                                                    </md-option>
                                                  </md-select>
                                              </md-input-container>
                                            </span>                          
                                            <span ng-if="!participant_dpp.$edit">{{vm.affichage_sexe(participant_dpp.sexe)}}</span>
                                          </td> 

                                          <td>
                                            <span ng-if="participant_dpp.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Site</label>
                                                <md-select ng-model="participant_dpp.id_situation_participant_dpp"style="overflow: hidden;text-overflow: ellipsis;">
                                                  <md-option ng-repeat="situation_participant_dpp in vm.allsituation_participant_dpp" value="{{situation_participant_dpp.id}}">
                                                                                        {{situation_participant_dpp.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!participant_dpp.$edit">{{participant_dpp.situation_participant_dpp.libelle}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!participant_dpp.$edit && vm.validation_formationdpp==0" ng-click="vm.modifierParticipant_dpp(participant_dpp)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!participant_dpp.$edit && vm.validation_formationdpp==0" ng-click="vm.supprimerParticipant_dpp(participant_dpp)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                             <span ng-if="!participant_dpp.$edit && vm.validation_formationdpp==1">Aucune action disponible</span>         
                                            <a ng-if="participant_dpp.$edit" ng-click="vm.annulerParticipant_dpp(participant_dpp)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="participant_dpp.$edit && participant_dpp.nom && participant_dpp.prenom && participant_dpp.sexe && participant_dpp.id_situation_participant_dpp>''" ng-click="vm.ajoutParticipant_dpp(participant_dpp,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN participant_dpp ------------------------------------------>


                        <!---------------------------------DEBUT FORMATION ODC------------------------------------------->
                              <md-tab >
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                                      <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Formation ODC</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                               <md-tab-body>
                                  <div style="widht:100%;"> 
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterModule_odc()" style="width:10%;" ng-show="vm.showbuttonNouvformodc">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerModule_odc()" style="width:10%;" ng-show="vm.showbuttonValidationformodc && vm.permissionboutonvaliderformodc && vm.validation_formationodc==0">
                                          Validation
                                        </md-button><br>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="mem in ::vm.module_odc_column">
                                          <div class="table-header">
                                            <span class="column-title">{{mem.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="module_odc in vm.allmodule_odc"  ng-class="{selected: module_odc.$selected}" ng-click="vm.selectionModule_odc(module_odc)">
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-datepicker ng-model="module_odc.date_debut_previ_form" md-placeholder="Date de debut prévisionnelle" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_odc.$edit">{{vm.formatDate(module_odc.date_debut_previ_form)}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-datepicker ng-model="module_odc.date_fin_previ_form" md-placeholder="Date de fin prévisionnelle" md-max-date="vm.datenow" md-min-date="module_odc.date_debut_previ_form" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_odc.$edit">{{vm.formatDate(module_odc.date_fin_previ_form)}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-datepicker ng-model="module_odc.date_previ_resti" md-placeholder="Date prévisionnelle de restitution" md-max-date="vm.datenow" md-min-date="module_odc.date_debut_previ_form" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_odc.$edit">{{vm.formatDate(module_odc.date_previ_resti)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-datepicker ng-model="module_odc.date_debut_reel_form" md-placeholder="Date de debut réelle" md-min-date="module_odc.date_previ_resti" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{vm.formatDate(module_odc.date_debut_reel_form)}}</span>
                                        </td>
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-datepicker ng-model="module_odc.date_fin_reel_form" md-placeholder="Date de fin réelle" md-min-date="module_odc.date_debut_reel_form" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_odc.$edit">{{vm.formatDate(module_odc.date_fin_reel_form)}}</span>
                                        </td>
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-datepicker ng-model="module_odc.date_reel_resti" md-placeholder="Date réelle de restitution" md-min-date="module_odc.date_previ_resti" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_odc.$edit">{{vm.formatDate(module_odc.date_reel_resti)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre previsionnel participant</label>
                                              <input name="nbr_previ_parti" type="number" ng-model="module_odc.nbr_previ_parti"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{module_odc.nbr_previ_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre participant</label>
                                              <input name="nbr_parti" type="number" ng-model="module_odc.nbr_parti" disabled />
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{module_odc.nbr_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre previsionnel femme participant</label>
                                              <input name="nbr_previ_fem_parti" type="number" ng-model="module_odc.nbr_previ_fem_parti"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{module_odc.nbr_previ_fem_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre réel femme participant</label>
                                              <input name="nbr_reel_fem_parti" type="number" ng-model="module_odc.nbr_reel_fem_parti" disabled />
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{module_odc.nbr_reel_fem_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Lieu formation</label>
                                              <input name="lieu_formation" type="text" ng-model="module_odc.lieu_formation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{module_odc.lieu_formation}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_odc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="module_odc.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_odc.$edit">{{module_odc.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!module_odc.$edit && module_odc.validation==0" ng-click="vm.modifierModule_odc(module_odc)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!module_odc.$edit && module_odc.validation==0" ng-click="vm.supprimerModule_odc(module_odc)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            <span ng-if="!module_odc.$edit && module_odc.validation==1">Aucune action disponible</span>
                                                    
                                          <a ng-if="module_odc.$edit" ng-click="vm.annulerModule_odc(module_odc)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="module_odc.$edit && module_odc.date_debut_previ_form && module_odc.date_fin_previ_form && module_odc.date_previ_resti && module_odc.date_debut_reel_form && module_odc.nbr_previ_parti && module_odc.date_fin_reel_form && module_odc.date_reel_resti && module_odc.nbr_previ_fem_parti && module_odc.lieu_formation && module_odc.observation >''" ng-click="vm.ajoutModule_odc(module_odc,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                              </md-tab>

                       <!---------------------------------FIN FORMATION ODC------------------------------------------->

                       <!---------------------------------FIN participant ODC------------------------------------------->
                              <md-tab ng-disabled="!vm.stepparticipantodc">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                        <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                          <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Participant odc</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterParticipant_odc()" style="width:10%;" ng-show="vm.validation_formationodc==0">
                                          Nouveau
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" >
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.participant_odc_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="participant_odc in vm.allparticipant_odc"  ng-class="{selected: participant_odc.$selected}" ng-click="vm.selectionParticipant_odc(participant_odc)">           
                                          <td>
                                            <span ng-if="participant_odc.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nom</label>
                                                <input name="nom" type="text" ng-model="participant_odc.nom"/>
                                              </md-input-container>
                                            </span>                          
                                            <span ng-if="!participant_odc.$edit">{{participant_odc.nom}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="participant_odc.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Prenom</label>
                                                <input name="prenom" type="text" ng-model="participant_odc.prenom"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!participant_odc.$edit">{{participant_odc.prenom}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="participant_odc.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Sexe</label>
                                                <md-select ng-model="participant_odc.sexe"style="overflow: hidden;text-overflow: ellipsis;">
                                                    <md-option value="1">Masculin
                                                    </md-option>
                                                    <md-option value="2">Femimin
                                                    </md-option>
                                                  </md-select>
                                              </md-input-container>
                                            </span>                          
                                            <span ng-if="!participant_odc.$edit">{{vm.affichage_sexe(participant_odc.sexe)}}</span>
                                          </td> 

                                          <td>
                                            <span ng-if="participant_odc.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Site</label>
                                                <md-select ng-model="participant_odc.id_situation_participant_odc"style="overflow: hidden;text-overflow: ellipsis;">
                                                  <md-option ng-repeat="situation_participant_odc in vm.allsituation_participant_odc" value="{{situation_participant_odc.id}}">
                                                                                        {{situation_participant_odc.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!participant_odc.$edit">{{participant_odc.situation_participant_odc.libelle}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!participant_odc.$edit && vm.validation_formationodc==0" ng-click="vm.modifierParticipant_odc(participant_odc)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!participant_odc.$edit && vm.validation_formationodc==0" ng-click="vm.supprimerParticipant_odc(participant_odc)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                             <span ng-if="!participant_odc.$edit && vm.validation_formationodc==1">Aucune action disponible</span> 
                                                      
                                            <a ng-if="participant_odc.$edit" ng-click="vm.annulerParticipant_odc(participant_odc)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="participant_odc.$edit && participant_odc.nom && participant_odc.prenom && participant_odc.sexe && participant_odc.id_situation_participant_odc>''" ng-click="vm.ajoutParticipant_odc(participant_odc,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                       <!--------------------------------DEBUT participant emies----------------------------------------->

                       <!--------------------------------DEBUT Formation emies----------------------------------------->

                            <md-tab >
                              <md-tab-label>
                                <span class="ms-form-wizard-step-label">
                                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-currency-eur s16"></i>
                                    </span-->
                                  <span class="ms-form-wizard-step-text">Formation emies</span>
                                </span>
                              </md-tab-label>
                              
                              <md-tab-body>
                                <div style="widht:100%;">
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterModule_emies()" style="width:10%;" ng-show="vm.showbuttonNouvformemies">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerModule_emies()" style="width:10%;" ng-show="vm.showbuttonValidationformemies && vm.permissionboutonvaliderformemies && vm.validation_formationemies==0">
                                          Validation
                                        </md-button><br>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.module_emies_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="module_emies in vm.allmodule_emies"  ng-class="{selected: module_emies.$selected}" ng-click="vm.selectionModule_emies(module_emies)">
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-datepicker ng-model="module_emies.date_debut_previ_form" md-placeholder="Date de debut prévisionnelle" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_emies.$edit">{{vm.formatDate(module_emies.date_debut_previ_form)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-datepicker ng-model="module_emies.date_fin_previ_form" md-placeholder="Date de fin prévisionnelle" md-max-date="vm.datenow" md-min-date="module_emies.date_debut_previ_form" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_emies.$edit">{{vm.formatDate(module_emies.date_fin_previ_form)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-datepicker ng-model="module_emies.date_previ_resti" md-placeholder="Date prévisionnelle de restitution" md-max-date="vm.datenow" md-min-date="module_emies.date_debut_previ_form" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_emies.$edit">{{vm.formatDate(module_emies.date_previ_resti)}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-datepicker ng-model="module_emies.date_debut_reel_form" md-placeholder="Date de debut réelle" md-min-date="module_emies.date_previ_resti" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{vm.formatDate(module_emies.date_debut_reel_form)}}</span>
                                      </td>
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-datepicker ng-model="module_emies.date_fin_reel_form" md-placeholder="Date de fin réelle" md-min-date="module_emies.date_debut_reel_form" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_emies.$edit">{{vm.formatDate(module_emies.date_fin_reel_form)}}</span>
                                      </td>
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-datepicker ng-model="module_emies.date_reel_resti" md-placeholder="Date réelle de restitution" md-min-date="module_emies.date_previ_resti" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_emies.$edit">{{vm.formatDate(module_emies.date_reel_resti)}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre previsionnel participant</label>
                                            <input name="nbr_previ_parti" type="number" ng-model="module_emies.nbr_previ_parti"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{module_emies.nbr_previ_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre participant</label>
                                            <input name="nbr_parti" type="number" ng-model="module_emies.nbr_parti" disabled />
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{module_emies.nbr_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre previsionnel femme participant</label>
                                            <input name="nbr_previ_fem_parti" type="number" ng-model="module_emies.nbr_previ_fem_parti"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{module_emies.nbr_previ_fem_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre réel femme participant</label>
                                            <input name="nbr_reel_fem_parti" type="number" ng-model="module_emies.nbr_reel_fem_parti" disabled />
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{module_emies.nbr_reel_fem_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Lieu formation</label>
                                            <input name="lieu_formation" type="text" ng-model="module_emies.lieu_formation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{module_emies.lieu_formation}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_emies.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Observation</label>
                                            <input name="observation" type="text" ng-model="module_emies.observation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_emies.$edit">{{module_emies.observation}}</span>
                                      </td>
                                                                   
                                      <td>
                                        <a ng-if="!module_emies.$edit && module_emies.validation==0" ng-click="vm.modifierModule_emies(module_emies)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                        </a>
                                                      
                                        <a ng-if="!module_emies.$edit && module_emies.validation==0" ng-click="vm.supprimerModule_emies(module_emies)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!module_emies.$edit && module_emies.validation==1">Aucune action disponible</span>
                                                  
                                        <a ng-if="module_emies.$edit" ng-click="vm.annulerModule_emies(module_emies)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="module_emies.$edit && module_emies.date_debut_previ_form && module_emies.date_fin_previ_form && module_emies.date_previ_resti && module_emies.date_debut_reel_form && module_emies.nbr_previ_parti && module_emies.date_fin_reel_form && module_emies.date_reel_resti && module_emies.nbr_previ_fem_parti && module_emies.lieu_formation && module_emies.observation >''" ng-click="vm.ajoutModule_emies(module_emies,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>

                            </md-tab-body>
                            </md-tab>
                        <!---------------------------------Fin Formation emies------------------------------------------>

                        <!---------------------------------Debut participant_emies ------------------------------------->
                            <md-tab ng-disabled="!vm.stepparticipantemies">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                      <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                        <i class="icon-check s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Participant emies</span>
                                  </span>
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterParticipant_emies()" style="width:10%;" ng-show="vm.validation_formationemies==0">
                                        Nouveau
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" >
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="mem in ::vm.participant_emies_column">
                                          <div class="table-header">
                                            <span class="column-title">{{mem.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="participant_emies in vm.allparticipant_emies"  ng-class="{selected: participant_emies.$selected}" ng-click="vm.selectionParticipant_emies(participant_emies)">           
                                        <td>
                                          <span ng-if="participant_emies.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nom</label>
                                              <input name="nom" type="text" ng-model="participant_emies.nom"/>
                                            </md-input-container>
                                          </span>                          
                                          <span ng-if="!participant_emies.$edit">{{participant_emies.nom}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="participant_emies.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Prenom</label>
                                              <input name="prenom" type="text" ng-model="participant_emies.prenom"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!participant_emies.$edit">{{participant_emies.prenom}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="participant_emies.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Sexe</label>
                                              <md-select ng-model="participant_emies.sexe"style="overflow: hidden;text-overflow: ellipsis;">
                                                  <md-option value="1">Masculin
                                                  </md-option>
                                                  <md-option value="2">Femimin
                                                  </md-option>
                                                </md-select>
                                            </md-input-container>
                                          </span>                          
                                          <span ng-if="!participant_emies.$edit">{{vm.affichage_sexe(participant_emies.sexe)}}</span>
                                        </td> 

                                        <td>
                                          <span ng-if="participant_emies.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Site</label>
                                              <md-select ng-model="participant_emies.id_situation_participant_emies"style="overflow: hidden;text-overflow: ellipsis;">
                                                <md-option ng-repeat="situation_participant_emies in vm.allsituation_participant_emies" value="{{situation_participant_emies.id}}">
                                                                                      {{situation_participant_emies.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!participant_emies.$edit">{{participant_emies.situation_participant_emies.libelle}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!participant_emies.$edit && vm.validation_formationemies==0" ng-click="vm.modifierParticipant_emies(participant_emies)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!participant_emies.$edit && vm.validation_formationemies==0" ng-click="vm.supprimerParticipant_emies(participant_emies)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                             <span ng-if="!participant_emies.$edit && vm.validation_formationemies==1">Aucune action disponible</span> 
                                                    
                                          <a ng-if="participant_emies.$edit" ng-click="vm.annulerParticipant_emies(participant_emies)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="participant_emies.$edit && participant_emies.nom && participant_emies.prenom && participant_emies.sexe && participant_emies.id_situation_participant_emies>''" ng-click="vm.ajoutParticipant_emies(participant_emies,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                            </md-tab>
                      <!---------------------------------------FIN participant_emies ----------------------------------->


                       <!---------------------------------------DEBUT Formation gfpc--------------------------------------->

                            <md-tab >
                              <md-tab-label>
                                <span class="ms-form-wizard-step-label">
                                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-currency-eur s16"></i>
                                    </span-->
                                  <span class="ms-form-wizard-step-text">Formation gfpc</span>
                                </span>
                              </md-tab-label>
                              
                             <md-tab-body>
                                  <div style="widht:100%;">
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterModule_gfpc()" style="width:10%;" ng-show="vm.showbuttonNouvformgfpc">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerModule_gfpc()" style="width:10%;" ng-show="vm.showbuttonValidationformgfpc && vm.permissionboutonvaliderformgfpc && vm.validation_formationgfpc==0">
                                          Validation
                                        </md-button><br>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="mem in ::vm.module_gfpc_column">
                                          <div class="table-header">
                                            <span class="column-title">{{mem.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="module_gfpc in vm.allmodule_gfpc"  ng-class="{selected: module_gfpc.$selected}" ng-click="vm.selectionModule_gfpc(module_gfpc)">
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-datepicker ng-model="module_gfpc.date_debut_previ_form" md-placeholder="Date de debut prévisionnelle" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_gfpc.$edit">{{vm.formatDate(module_gfpc.date_debut_previ_form)}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-datepicker ng-model="module_gfpc.date_fin_previ_form" md-placeholder="Date de fin prévisionnelle" md-max-date="vm.datenow" md-min-date="module_gfpc.date_debut_previ_form" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_gfpc.$edit">{{vm.formatDate(module_gfpc.date_fin_previ_form)}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-datepicker ng-model="module_gfpc.date_previ_resti" md-placeholder="Date prévisionnelle de restitution" md-max-date="vm.datenow" md-min-date="module_gfpc.date_debut_previ_form" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_gfpc.$edit">{{vm.formatDate(module_gfpc.date_previ_resti)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-datepicker ng-model="module_gfpc.date_debut_reel_form" md-placeholder="Date de debut réelle" md-min-date="module_gfpc.date_previ_resti" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{vm.formatDate(module_gfpc.date_debut_reel_form)}}</span>
                                        </td>
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-datepicker ng-model="module_gfpc.date_fin_reel_form" md-placeholder="Date de fin réelle" md-min-date="module_gfpc.date_debut_reel_form" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_gfpc.$edit">{{vm.formatDate(module_gfpc.date_fin_reel_form)}}</span>
                                        </td>
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-datepicker ng-model="module_gfpc.date_reel_resti" md-placeholder="Date réelle de restitution" md-min-date="module_gfpc.date_previ_resti" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!module_gfpc.$edit">{{vm.formatDate(module_gfpc.date_reel_resti)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre previsionnel participant</label>
                                              <input name="nbr_previ_parti" type="number" ng-model="module_gfpc.nbr_previ_parti"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{module_gfpc.nbr_previ_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre participant</label>
                                              <input name="nbr_parti" type="number" ng-model="module_gfpc.nbr_parti" disabled />
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{module_gfpc.nbr_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre previsionnel femme participant</label>
                                              <input name="nbr_previ_fem_parti" type="number" ng-model="module_gfpc.nbr_previ_fem_parti"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{module_gfpc.nbr_previ_fem_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nombre réel femme participant</label>
                                              <input name="nbr_reel_fem_parti" type="number" ng-model="module_gfpc.nbr_reel_fem_parti" disabled />
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{module_gfpc.nbr_reel_fem_parti}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Lieu formation</label>
                                              <input name="lieu_formation" type="text" ng-model="module_gfpc.lieu_formation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{module_gfpc.lieu_formation}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="module_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="module_gfpc.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!module_gfpc.$edit">{{module_gfpc.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!module_gfpc.$edit && module_gfpc.validation==0" ng-click="vm.modifierModule_gfpc(module_gfpc)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                        
                                          <a ng-if="!module_gfpc.$edit && module_gfpc.validation==0" ng-click="vm.supprimerModule_gfpc(module_gfpc)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!module_gfpc.$edit && module_gfpc.validation==1">Aucune action disponible</span>
                                                    
                                          <a ng-if="module_gfpc.$edit" ng-click="vm.annulerModule_gfpc(module_gfpc)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="module_gfpc.$edit && module_gfpc.date_debut_previ_form && module_gfpc.date_fin_previ_form && module_gfpc.date_previ_resti && module_gfpc.date_debut_reel_form && module_gfpc.nbr_previ_parti && module_gfpc.date_fin_reel_form && module_gfpc.date_reel_resti && module_gfpc.nbr_previ_fem_parti && module_gfpc.lieu_formation && module_gfpc.observation >''" ng-click="vm.ajoutModule_gfpc(module_gfpc,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                            </md-tab>
                        <!---------------------------------Fin Formation gfpc------------------------------------------>

                        <!---------------------------------Debut participant_gfpc -------------------------------------->
                            <md-tab ng-disabled="!vm.stepparticipantgfpc">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                      <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                        <i class="icon-check s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Participant gfpc</span>
                                  </span>
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterParticipant_gfpc()" style="width:10%;"ng-show="vm.validation_formationgfpc==0">
                                        Nouveau
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" >
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="mem in ::vm.participant_gfpc_column">
                                          <div class="table-header">
                                            <span class="column-title">{{mem.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="participant_gfpc in vm.allparticipant_gfpc"  ng-class="{selected: participant_gfpc.$selected}" ng-click="vm.selectionParticipant_gfpc(participant_gfpc)">           
                                        <td>
                                          <span ng-if="participant_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nom</label>
                                              <input name="nom" type="text" ng-model="participant_gfpc.nom"/>
                                            </md-input-container>
                                          </span>                          
                                          <span ng-if="!participant_gfpc.$edit">{{participant_gfpc.nom}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="participant_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Prenom</label>
                                              <input name="prenom" type="text" ng-model="participant_gfpc.prenom"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!participant_gfpc.$edit">{{participant_gfpc.prenom}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="participant_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Sexe</label>
                                              <md-select ng-model="participant_gfpc.sexe"style="overflow: hidden;text-overflow: ellipsis;">
                                                  <md-option value="1">Masculin
                                                  </md-option>
                                                  <md-option value="2">Femimin
                                                  </md-option>
                                                </md-select>
                                            </md-input-container>
                                          </span>                          
                                          <span ng-if="!participant_gfpc.$edit">{{vm.affichage_sexe(participant_gfpc.sexe)}}</span>
                                        </td> 

                                        <td>
                                          <span ng-if="participant_gfpc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Site</label>
                                              <md-select ng-model="participant_gfpc.id_situation_participant_gfpc"style="overflow: hidden;text-overflow: ellipsis;">
                                                <md-option ng-repeat="situation_participant_gfpc in vm.allsituation_participant_gfpc" value="{{situation_participant_gfpc.id}}">
                                                                                      {{situation_participant_gfpc.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!participant_gfpc.$edit">{{participant_gfpc.situation_participant_gfpc.libelle}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!participant_gfpc.$edit && vm.validation_formationgfpc==0" ng-click="vm.modifierParticipant_gfpc(participant_gfpc)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!participant_gfpc.$edit && vm.validation_formationgfpc==0" ng-click="vm.supprimerParticipant_gfpc(participant_gfpc)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                             <span ng-if="!participant_gfpc.$edit && vm.validation_formationgfpc==1">Aucune action disponible</span> 
                                                    
                                          <a ng-if="participant_gfpc.$edit" ng-click="vm.annulerParticipant_gfpc(participant_gfpc)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="participant_gfpc.$edit && participant_gfpc.nom && participant_gfpc.prenom && participant_gfpc.sexe && participant_gfpc.id_situation_participant_gfpc>''" ng-click="vm.ajoutParticipant_gfpc(participant_gfpc,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                            </md-tab>
                      <!-----------------------------------FIN participant_gfpc --------------------------------------->

                        <!---------------------------------DEBUT Formation pmc----------------------------------------->

                            <md-tab >
                              <md-tab-label>
                                <span class="ms-form-wizard-step-label">
                                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-currency-eur s16"></i>
                                    </span-->
                                  <span class="ms-form-wizard-step-text">Formation pmc</span>
                                </span>
                              </md-tab-label>
                              
                              <md-tab-body>
                                <div style="widht:100%;">
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterModule_pmc()" style="width:10%;" ng-show="vm.showbuttonNouvformpmc">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerModule_pmc()" style="width:10%;" ng-show="vm.showbuttonValidationformpmc && vm.permissionboutonvaliderformpmc && vm.validation_formationpmc==0">
                                          Validation
                                        </md-button><br>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.module_pmc_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="module_pmc in vm.allmodule_pmc"  ng-class="{selected: module_pmc.$selected}" ng-click="vm.selectionModule_pmc(module_pmc)">
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-datepicker ng-model="module_pmc.date_debut_previ_form" md-placeholder="Date de debut prévisionnelle" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_pmc.$edit">{{vm.formatDate(module_pmc.date_debut_previ_form)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-datepicker ng-model="module_pmc.date_fin_previ_form" md-placeholder="Date de fin prévisionnelle" md-max-date="vm.datenow" md-min-date="module_pmc.date_debut_previ_form" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_pmc.$edit">{{vm.formatDate(module_pmc.date_fin_previ_form)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-datepicker ng-model="module_pmc.date_previ_resti" md-placeholder="Date prévisionnelle de restitution" md-max-date="vm.datenow" md-min-date="module_pmc.date_debut_previ_form" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_pmc.$edit">{{vm.formatDate(module_pmc.date_previ_resti)}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-datepicker ng-model="module_pmc.date_debut_reel_form" md-placeholder="Date de debut réelle" md-min-date="module_pmc.date_previ_resti" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{vm.formatDate(module_pmc.date_debut_reel_form)}}</span>
                                      </td>
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-datepicker ng-model="module_pmc.date_fin_reel_form" md-placeholder="Date de fin réelle" md-min-date="module_pmc.date_debut_reel_form" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_pmc.$edit">{{vm.formatDate(module_pmc.date_fin_reel_form)}}</span>
                                      </td>
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-datepicker ng-model="module_pmc.date_reel_resti" md-placeholder="Date réelle de restitution" md-min-date="module_pmc.date_previ_resti" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_pmc.$edit">{{vm.formatDate(module_pmc.date_reel_resti)}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre previsionnel participant</label>
                                            <input name="nbr_previ_parti" type="number" ng-model="module_pmc.nbr_previ_parti"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{module_pmc.nbr_previ_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre participant</label>
                                            <input name="nbr_parti" type="number" ng-model="module_pmc.nbr_parti" disabled />
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{module_pmc.nbr_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre previsionnel femme participant</label>
                                            <input name="nbr_previ_fem_parti" type="number" ng-model="module_pmc.nbr_previ_fem_parti"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{module_pmc.nbr_previ_fem_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre réel femme participant</label>
                                            <input name="nbr_reel_fem_parti" type="number" ng-model="module_pmc.nbr_reel_fem_parti" disabled />
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{module_pmc.nbr_reel_fem_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Lieu formation</label>
                                            <input name="lieu_formation" type="text" ng-model="module_pmc.lieu_formation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{module_pmc.lieu_formation}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_pmc.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Observation</label>
                                            <input name="observation" type="text" ng-model="module_pmc.observation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_pmc.$edit">{{module_pmc.observation}}</span>
                                      </td>
                                                                   
                                      <td>
                                        <a ng-if="!module_pmc.$edit && module_pmc.validation==0" ng-click="vm.modifierModule_pmc(module_pmc)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                        </a>
                                                      
                                        <a ng-if="!module_pmc.$edit && module_pmc.validation==0" ng-click="vm.supprimerModule_pmc(module_pmc)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!module_pmc.$edit && module_pmc.validation==1">Aucune action disponible</span>
                                                  
                                        <a ng-if="module_pmc.$edit" ng-click="vm.annulerModule_pmc(module_pmc)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="module_pmc.$edit && module_pmc.date_debut_previ_form && module_pmc.date_fin_previ_form && module_pmc.date_previ_resti && module_pmc.date_debut_reel_form && module_pmc.nbr_previ_parti && module_pmc.date_fin_reel_form && module_pmc.date_reel_resti && module_pmc.nbr_previ_fem_parti && module_pmc.lieu_formation && module_pmc.observation >''" ng-click="vm.ajoutModule_pmc(module_pmc,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>

                            </md-tab-body>
                            </md-tab>
                        <!---------------------------------Fin Formation pmc------------------------------------------>

                         <!-------------------------------Debut participant_pmc --------------------------------------->
                            <md-tab ng-disabled="!vm.stepparticipantpmc">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                      <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                        <i class="icon-check s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Participant pmc</span>
                                  </span>
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterParticipant_pmc()" style="width:10%;"ng-show="vm.validation_formationpmc==0">
                                        Nouveau
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" >
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="mem in ::vm.participant_pmc_column">
                                          <div class="table-header">
                                            <span class="column-title">{{mem.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="participant_pmc in vm.allparticipant_pmc"  ng-class="{selected: participant_pmc.$selected}" ng-click="vm.selectionParticipant_pmc(participant_pmc)">           
                                        <td>
                                          <span ng-if="participant_pmc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Nom</label>
                                              <input name="nom" type="text" ng-model="participant_pmc.nom"/>
                                            </md-input-container>
                                          </span>                          
                                          <span ng-if="!participant_pmc.$edit">{{participant_pmc.nom}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="participant_pmc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Prenom</label>
                                              <input name="prenom" type="text" ng-model="participant_pmc.prenom"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!participant_pmc.$edit">{{participant_pmc.prenom}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="participant_pmc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Sexe</label>
                                              <md-select ng-model="participant_pmc.sexe"style="overflow: hidden;text-overflow: ellipsis;">
                                                  <md-option value="1">Masculin
                                                  </md-option>
                                                  <md-option value="2">Femimin
                                                  </md-option>
                                                </md-select>
                                            </md-input-container>
                                          </span>                          
                                          <span ng-if="!participant_pmc.$edit">{{vm.affichage_sexe(participant_pmc.sexe)}}</span>
                                        </td> 

                                        <td>
                                          <span ng-if="participant_pmc.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Site</label>
                                              <md-select ng-model="participant_pmc.id_situation_participant_pmc"style="overflow: hidden;text-overflow: ellipsis;">
                                                <md-option ng-repeat="situation_participant_pmc in vm.allsituation_participant_pmc" value="{{situation_participant_pmc.id}}">
                                                                                      {{situation_participant_pmc.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!participant_pmc.$edit">{{participant_pmc.situation_participant_pmc.libelle}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!participant_pmc.$edit && vm.validation_formationpmc==0" ng-click="vm.modifierParticipant_pmc(participant_pmc)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!participant_pmc.$edit && vm.validation_formationpmc==0" ng-click="vm.supprimerParticipant_pmc(participant_pmc)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                             <span ng-if="!participant_pmc.$edit && vm.validation_formationpmc==1">Aucune action disponible</span> 
                                                    
                                          <a ng-if="participant_pmc.$edit" ng-click="vm.annulerParticipant_pmc(participant_pmc)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="participant_pmc.$edit && participant_pmc.nom && participant_pmc.prenom && participant_pmc.sexe && participant_pmc.id_situation_participant_pmc>''" ng-click="vm.ajoutParticipant_pmc(participant_pmc,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                            </md-tab>
                        <!-----------------------------------------FIN participant_pmc ---------------------------------->
                        <!---------------------------------------DEBUT Formation sep------------------------------------->

                            <md-tab >
                              <md-tab-label>
                                <span class="ms-form-wizard-step-label">
                                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-currency-eur s16"></i>
                                    </span-->
                                  <span class="ms-form-wizard-step-text">Formation sep</span>
                                </span>
                              </md-tab-label>
                              
                              <md-tab-body>
                                <div style="widht:100%;">
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterModule_sep()" style="width:10%;" ng-show="vm.showbuttonNouvformsep">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerModule_sep()" style="width:10%;" ng-show="vm.showbuttonValidationformsep && vm.permissionboutonvaliderformsep && vm.validation_formationsep==0">
                                          Validation
                                        </md-button><br>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.module_sep_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="module_sep in vm.allmodule_sep"  ng-class="{selected: module_sep.$selected}" ng-click="vm.selectionModule_sep(module_sep)">
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-datepicker ng-model="module_sep.date_debut_previ_form" md-placeholder="Date de debut prévisionnelle" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_sep.$edit">{{vm.formatDate(module_sep.date_debut_previ_form)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-datepicker ng-model="module_sep.date_fin_previ_form" md-placeholder="Date de fin prévisionnelle" md-max-date="vm.datenow" md-min-date="module_sep.date_debut_previ_form" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_sep.$edit">{{vm.formatDate(module_sep.date_fin_previ_form)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-datepicker ng-model="module_sep.date_previ_resti" md-placeholder="Date prévisionnelle de restitution" md-max-date="vm.datenow" md-min-date="module_sep.date_debut_previ_form" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_sep.$edit">{{vm.formatDate(module_sep.date_previ_resti)}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-datepicker ng-model="module_sep.date_debut_reel_form" md-placeholder="Date de debut réelle" md-min-date="module_sep.date_previ_resti" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{vm.formatDate(module_sep.date_debut_reel_form)}}</span>
                                      </td>
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-datepicker ng-model="module_sep.date_fin_reel_form" md-placeholder="Date de fin réelle" md-min-date="module_sep.date_debut_reel_form" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_sep.$edit">{{vm.formatDate(module_sep.date_fin_reel_form)}}</span>
                                      </td>
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-datepicker ng-model="module_sep.date_reel_resti" md-placeholder="Date réelle de restitution" md-min-date="module_sep.date_previ_resti" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!module_sep.$edit">{{vm.formatDate(module_sep.date_reel_resti)}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre previsionnel participant</label>
                                            <input name="nbr_previ_parti" type="number" ng-model="module_sep.nbr_previ_parti"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{module_sep.nbr_previ_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre participant</label>
                                            <input name="nbr_parti" type="number" ng-model="module_sep.nbr_parti" disabled />
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{module_sep.nbr_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre previsionnel femme participant</label>
                                            <input name="nbr_previ_fem_parti" type="number" ng-model="module_sep.nbr_previ_fem_parti"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{module_sep.nbr_previ_fem_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Nombre réel femme participant</label>
                                            <input name="nbr_reel_fem_parti" type="number" ng-model="module_sep.nbr_reel_fem_parti" disabled />
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{module_sep.nbr_reel_fem_parti}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Lieu formation</label>
                                            <input name="lieu_formation" type="text" ng-model="module_sep.lieu_formation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{module_sep.lieu_formation}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="module_sep.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Observation</label>
                                            <input name="observation" type="text" ng-model="module_sep.observation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!module_sep.$edit">{{module_sep.observation}}</span>
                                      </td>
                                                                   
                                      <td>
                                        <a ng-if="!module_sep.$edit && module_sep.validation==0" ng-click="vm.modifierModule_sep(module_sep)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                        </a>
                                                      
                                        <a ng-if="!module_sep.$edit && module_sep.validation==0" ng-click="vm.supprimerModule_sep(module_sep)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!module_sep.$edit && module_sep.validation==1">Aucune action disponible</span>
                                                  
                                        <a ng-if="module_sep.$edit" ng-click="vm.annulerModule_sep(module_sep)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="module_sep.$edit && module_sep.date_debut_previ_form && module_sep.date_fin_previ_form && module_sep.date_previ_resti && module_sep.date_debut_reel_form && module_sep.nbr_previ_parti && module_sep.date_fin_reel_form && module_sep.date_reel_resti && module_sep.nbr_previ_fem_parti && module_sep.lieu_formation && module_sep.observation >''" ng-click="vm.ajoutModule_sep(module_sep,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>

                            </md-tab-body>
                            </md-tab>
                        <!---------------------------------Fin Formation sep------------------------------------------>

                         <!--------------------------------Debut participant_sep -------------------------------------->
                              <md-tab ng-disabled="!vm.stepparticipantsep">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                        <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                          <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Participant sep</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterParticipant_sep()" style="width:10%;"ng-show="vm.validation_formationsep==0">
                                          Nouveau
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" >
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.participant_sep_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="participant_sep in vm.allparticipant_sep"  ng-class="{selected: participant_sep.$selected}" ng-click="vm.selectionParticipant_sep(participant_sep)">           
                                          <td>
                                            <span ng-if="participant_sep.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Nom</label>
                                                <input name="nom" type="text" ng-model="participant_sep.nom"/>
                                              </md-input-container>
                                            </span>                          
                                            <span ng-if="!participant_sep.$edit">{{participant_sep.nom}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="participant_sep.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Prenom</label>
                                                <input name="prenom" type="text" ng-model="participant_sep.prenom"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!participant_sep.$edit">{{participant_sep.prenom}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="participant_sep.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Sexe</label>
                                                <md-select ng-model="participant_sep.sexe"style="overflow: hidden;text-overflow: ellipsis;">
                                                    <md-option value="1">Masculin
                                                    </md-option>
                                                    <md-option value="2">Femimin
                                                    </md-option>
                                                  </md-select>
                                              </md-input-container>
                                            </span>                          
                                            <span ng-if="!participant_sep.$edit">{{vm.affichage_sexe(participant_sep.sexe)}}</span>
                                          </td> 

                                          <td>
                                            <span ng-if="participant_sep.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Site</label>
                                                <md-select ng-model="participant_sep.id_situation_participant_sep"style="overflow: hidden;text-overflow: ellipsis;">
                                                  <md-option ng-repeat="situation_participant_sep in vm.allsituation_participant_sep" value="{{situation_participant_sep.id}}">
                                                                                        {{situation_participant_sep.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!participant_sep.$edit">{{participant_sep.situation_participant_sep.libelle}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!participant_sep.$edit && vm.validation_formationsep==0" ng-click="vm.modifierParticipant_sep(participant_sep)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!participant_sep.$edit && vm.validation_formationsep==0" ng-click="vm.supprimerParticipant_sep(participant_sep)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                             <span ng-if="!participant_sep.$edit && vm.validation_formationsep==1">Aucune action disponible</span> 
                                                      
                                            <a ng-if="participant_sep.$edit" ng-click="vm.annulerParticipant_sep(participant_sep)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="participant_sep.$edit && participant_sep.nom && participant_sep.prenom && participant_sep.sexe && participant_sep.id_situation_participant_sep>''" ng-click="vm.ajoutParticipant_sep(participant_sep,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!--------------------------------------FIN participant_sep ------------------------------------->         
                              <md-tab>
                              </md-tab>
                      <!---------------------convention cisco/feffi---------------->
                      
                            </md-tabs> 
                          </ms-form-wizard>
                    <!---------------------------------FILS PRESTATION-----------------------------------------------> 

                        </md-tab-body>
                    </md-tab>
                    <!---------------------------------Avenant partenaire-----------------------------------------------> 
                    <md-tab ng-disabled="!vm.stepprestaion_pr || vm.validation_contrat_pr==0">                    
                      <md-tab-label >
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Avenant</span>
                        </span>
                       
                      </md-tab-label>

                      <md-tab-body>
                        <div style="widht:100%;">  
                                    <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvenant_partenaire()" style="width:10%;" ng-show="vm.showbuttonNouvavenant_partenaire">
                                      Nouveau
                                    </md-button>
                                  <md-button type="submit" ng-show="vm.showbuttonValidation_avenant_partenaire && vm.permissionboutonvalideravenant_partenaire && vm.validation_avenant_partenaire==0" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerAvenant_partenaire()" style="width:10%;">
                                    Valider
                                  </md-button>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.avenant_partenaire_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="avenant_partenaire in vm.allavenant_partenaire"  ng-class="{selected: avenant_partenaire.$selected}" ng-click="vm.selectionAvenant_partenaire(avenant_partenaire)">
                                                
                                      <td>
                                        <span ng-if="avenant_partenaire.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Descriprtion</label>
                                            <input name="description" type="text" ng-model="avenant_partenaire.description"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_partenaire.$edit">{{avenant_partenaire.description}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_partenaire.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Référence avenant</label>
                                            <input name="ref_avenant" type="text" ng-model="avenant_partenaire.ref_avenant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_partenaire.$edit">{{avenant_partenaire.ref_avenant}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_partenaire.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout batiment</label>
                                            <input name="montant" type="text" ng-model="avenant_partenaire.montant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_partenaire.$edit">{{avenant_partenaire.montant}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_partenaire.$edit">
                                          <md-datepicker ng-model="avenant_partenaire.date_signature" md-placeholder="Date de signature" md-max-date="vm.date_now" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!avenant_partenaire.$edit">{{vm.formatDate(avenant_partenaire.date_signature)}}</span>
                                      </td>                      
                                      <td>
                                        <a ng-if="!avenant_partenaire.$edit && avenant_partenaire.validation==0" ng-click="vm.modifierAvenant_partenaire(avenant_partenaire)" title="Modifier">
                                          <span class="icon-table-edit"></span>
                                        </a>
                                                  
                                        <a ng-if="!avenant_partenaire.$edit && avenant_partenaire.validation==0" ng-click="vm.supprimerAvenant_partenaire(avenant_partenaire)" title="Supprimer">
                                          <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!avenant_partenaire.$edit && avenant_partenaire.validation==1">Aucune action disponible</span>          
                                        <a ng-if="avenant_partenaire.$edit" ng-click="vm.annulerAvenant_partenaire(avenant_partenaire)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="avenant_partenaire.$edit && avenant_partenaire.description &&  avenant_partenaire.montant &&  avenant_partenaire.date_signature>''" ng-click="vm.ajoutAvenant_partenaire(avenant_partenaire,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                      </md-tab-body>
                    </md-tab>
                    <!---------------------------------Avenant partenaire-----------------------------------------------> 
                    
                    <!-------------------------------Debut document moe -------------------------------------------->
                    <md-tab >
                        <md-tab-label>
                          <span class="ms-form-wizard-step-label">
                              <span class="ms-form-wizard-step-text">Importer document</span>
                          </span>
                        </md-tab-label>
                        
                        <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDocument_pr_scan()" style="width:10%;" ng-show="vm.showbuttonValidation_document_pr_scan && vm.permissionboutonvaliderdocument_pr_scan && vm.validation_document_pr_scan==0">
                                Validation
                              </md-button>
                          </div><br>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Code</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Intitule</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Existance</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Fichier</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Date Elaboration</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Observation</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Action</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="document_pr_scan in vm.alldocument_pr_scan"  ng-class="{selected: document_pr_scan.$selected}" ng-click="vm.selectionDocument_pr_scan(document_pr_scan)">

                                <td>                                            
                                  <span>{{document_pr_scan.code}}</span>
                                </td>

                                <td>                                            
                                  <span>{{document_pr_scan.intitule}}</span>
                                </td>
                                
                                <td>                                 
                                   <md-checkbox ng-model="document_pr_scan.existance" aria-label="Checkbox 1" disabled>
                                  </md-checkbox>
                                </td>
                                          
                                <td>
                                  <span ng-if="document_pr_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                      <input name="fichier" type="text" ng-model="document_pr_scan.fichier" disabled/>
                                    </md-input-container>   
                                  </span>

                                  <span ng-if="document_pr_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                    <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile_doc_pr"  ng-model="fichier" id="fileid"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_pr_scan.$edit">{{document_pr_scan.fichier}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_pr_scan.$edit">
                                    <md-datepicker ng-model="document_pr_scan.date_elaboration" md-placeholder="Date de elaboration" md-max-date="vm.date_now" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!document_pr_scan.$edit">{{vm.formatDate(document_pr_scan.date_elaboration)}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_pr_scan.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Observation</label>
                                      <input name="observation" type="text" ng-model="document_pr_scan.observation"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_pr_scan.$edit">{{document_pr_scan.observation}}</span>
                                </td>

                                <td>
                                  <a ng-if="!document_pr_scan.$edit && (document_pr_scan.validation==0 || document_pr_scan.validation==null)" ng-click="vm.modifierDocument_pr_scan(document_pr_scan)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!document_pr_scan.$edit && document_pr_scan.validation==0" ng-click="vm.supprimerDocument_pr_scan(document_pr_scan)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>                        
                                            
                                  <a ng-if="!document_pr_scan.$edit && document_pr_scan.existance" ng-click="vm.download_document_pr_scan(document_pr_scan)" title="Telecharger fichier">
                                    <span class="icon-box-download"></span>
                                  </a>
                                            
                                  <a ng-if="document_pr_scan.$edit" ng-click="vm.annulerDocument_pr_scan(document_pr_scan)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="document_pr_scan.$edit && document_pr_scan.fichier && document_pr_scan.date_elaboration >''" ng-click="vm.ajoutDocument_pr_scan(document_pr_scan,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <!--------------------------------------FIN document moe --------------------------------------------> 
            
                  </md-tabs> 
                </ms-form-wizard>               
              </md-tab-body>
            </md-tab>

            <!-----------------------DEBUT MAITRISE DOEUVRE------------------------------------>
            <md-tab ng-disabled="vm.stepMenu_moe==false">
              <md-tab-label >
                <span class="ms-form-wizard-step-label">
                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                      <i class="icon-drawing-box s16"></i>
                    </span-->
                    <span class="ms-form-wizard-step-text">MAITRISE D'ŒUVRE</span>
                    <span class="ms-form-wizard-step-number md-accent-bg notification" >4</span>
                </span>
               
              </md-tab-label>
              
              <md-tab-body>
               <ms-form-wizard flex id="sousmenu"> 
                <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                    <!-------------------convention cisco/feffi----------------->
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">DF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Passation des marchés</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPassation_marches_moe()" style="width:10%;" ng-show="vm.showbuttonNouvPassation_moe">
                                Nouveau
                              </md-button>
                              <md-button type="submit" class="md-raised md-warn" aria-label="valider" ng-click="vm.validation_passation_marche_moe()" style="width:10%;" ng-show="vm.showbuttonValidationpassation_moe && vm.permissionboutonvaliderpassation_moe && vm.validation_passation_moe==0">
                                    Validation
                              </md-button>
                          </div>
                         <div>       
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text" ng-repeat="mem in ::vm.passation_marches_moe_column">
                                  <div class="table-header">
                                    <span class="column-title">{{mem.titre}}</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="passation_marches_moe in vm.allpassation_marches_moe"  ng-class="{selected: passation_marches_moe.$selected}" ng-click="vm.selectionPassation_marches_moe(passation_marches_moe)">

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_shortlist" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_shortlist)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_manifestation" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_manifestation)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_lancement_dp" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_lancement_dp)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_remise" md-placeholder="Date de signature" md-min-date="passation_marches_moe.date_lancement_dp" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_remise)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Nombre offre recu</label>
                                      <input name="nbr_offre_recu" type="number" ng-model="passation_marches_moe.nbr_offre_recu"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{passation_marches_moe.nbr_offre_recu}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_rapport_evaluation" md-placeholder="Date de signature" md-min-date="passation_marches_moe.date_remise" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_rapport_evaluation)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_demande_ano_dpfi" md-placeholder="Date de signature" md-min-date="passation_marches_moe.date_rapport_evaluation" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_demande_ano_dpfi)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_ano_dpfi" md-placeholder="Date de signature" md-min-date="passation_marches_moe.date_demande_ano_dpfi" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>  
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_ano_dpfi)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.notification_intention" md-placeholder="Date de notification" md-min-date="passation_marches_moe.date_demande_ano_dpfi" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>  
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.notification_intention)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_notification_attribution" md-placeholder="Date de signature" md-min-date="passation_marches_moe.notification_intention" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_notification_attribution)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_signature_contrat" md-placeholder="Date de signature" md-min-date="passation_marches_moe.date_notification_attribution" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>  
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_signature_contrat)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-datepicker ng-model="passation_marches_moe.date_os" md-placeholder="Date de signature" md-min-date="passation_marches_moe.date_signature_contrat" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.formatDate(passation_marches_moe.date_os)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Statut</label>
                                      <md-select ng-model="passation_marches_moe.statut"style="overflow: hidden;text-overflow: ellipsis;">
                                        <md-option value="1">BE
                                        </md-option>
                                        <md-option value="2">CI
                                        </md-option>
                                      </md-select>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{vm.affichageStatut(passation_marches_moe.statut)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Observation</label>
                                      <input name="observation" type="text" ng-model="passation_marches_moe.observation"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches_moe.$edit">{{passation_marches_moe.observation}}</span>
                                </td>
                                                             
                                <td>
                                  <a ng-if="!passation_marches_moe.$edit && passation_marches_moe.validation==0" ng-click="vm.modifierPassation_marches_moe(passation_marches_moe)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!passation_marches_moe.$edit && passation_marches_moe.validation==0" ng-click="vm.supprimerPassation_marches_moe(passation_marches_moe)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>
                                   <span ng-if="!passation_marches_moe.$edit && passation_marches_moe.validation==1">Aucune action disponible</span>         
                                  <a ng-if="passation_marches_moe.$edit" ng-click="vm.annulerPassation_marches_moe(passation_marches_moe)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="passation_marches_moe.$edit && passation_marches_moe.date_shortlist && passation_marches_moe.date_manifestation && passation_marches_moe.date_lancement_dp && passation_marches_moe.date_remise && passation_marches_moe.nbr_offre_recu && passation_marches_moe.date_rapport_evaluation && passation_marches_moe.date_demande_ano_dpfi && passation_marches_moe.date_ano_dpfi && passation_marches_moe.notification_intention && passation_marches_moe.date_notification_attribution && passation_marches_moe.date_signature_contrat && passation_marches_moe.date_os && passation_marches_moe.statut && passation_marches_moe.observation >''" ng-click="vm.ajoutPassation_marches_moe(passation_marches_moe,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Contrat</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterContrat_moe()" style="width:10%;"  ng-show="vm.showbuttonNouvcontrat_moe">
                                Nouveau
                              </md-button>
                            <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_contrat_moe()" style="width:10%;" ng-show="vm.showbuttonValidationcontrat_moe && vm.permissionboutonvalidercontrat_moe && vm.validation_contrat_moe==0">
                              Validation
                            </md-button><br>
                          </div>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text" ng-repeat="mem in ::vm.contrat_moe_column">
                                  <div class="table-header">
                                    <span class="column-title">{{mem.titre}}</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="contrat_moe in vm.allcontrat_moe"  ng-class="{selected: contrat_moe.$selected}" ng-click="vm.selectionContrat_moe(contrat_moe)">
                                          
                                <td>
                                  <span ng-if="contrat_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>moe</label>
                                      <md-select ng-model="contrat_moe.id_moe"style="overflow: hidden;text-overflow: ellipsis;">
                                        <md-option ng-repeat="moe in vm.allmoe" value="{{moe.id}}">
                                                                              {{moe.nom}}
                                        </md-option>
                                      </md-select>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_moe.$edit">{{contrat_moe.bureau_etude.nom}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Intitule objet</label>
                                      <input name="intitule" type="text" ng-model="contrat_moe.intitule"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_moe.$edit">{{contrat_moe.intitule}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Réference contrat</label>
                                      <input name="ref_contrat" type="text" ng-model="contrat_moe.ref_contrat"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_moe.$edit">{{contrat_moe.ref_contrat}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_moe.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Montant contrat</label>
                                      <input name="montant_contrat" type="number" ng-model="contrat_moe.montant_contrat"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_moe.$edit">{{contrat_moe.montant_contrat}}</span>
                                </td>

                                <td>
                                  <span ng-if="contrat_moe.$edit">
                                    <md-datepicker ng-model="contrat_moe.date_signature" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!contrat_moe.$edit">{{vm.formatDate(contrat_moe.date_signature)}}</span>
                                </td>
                                                             
                                <td>
                                  <a ng-if="!contrat_moe.$edit && contrat_moe.validation==0" ng-click="vm.modifierContrat_moe(contrat_moe)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!contrat_moe.$edit && contrat_moe.validation==0" ng-click="vm.supprimerContrat_moe(contrat_moe)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>
                                 <span ng-if="!contrat_moe.$edit && contrat_moe.validation==1">Aucune action disponible</span>
                                  <a ng-if="contrat_moe.$edit" ng-click="vm.annulerContrat_moe(contrat_moe)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="contrat_moe.$edit && contrat_moe.intitule && contrat_moe.ref_contrat && contrat_moe.montant_contrat &&  contrat_moe.date_signature && contrat_moe.id_moe>''" ng-click="vm.ajoutContrat_moe(contrat_moe,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <md-tab ng-disabled="!vm.stepprestation_moe">
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Prestation</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                       <!---------------------------------FILS PRESTATION----------------------------------------------->       
                         <ms-form-wizard flex id="soussousmenu"> 
                          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                        <!-----------------------------DEBUT FORMATION DPP--------------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span>                          
                                      
                                      <span class="ms-form-wizard-step-text">Memoire technique</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterMemoire_technique()" style="width:10%;" ng-show="vm.showbuttonNouvMemoire_technique">
                                        Nouveau
                                      </md-button>  
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerMemoire_technique()" style="width:10%;" ng-show="vm.showbuttonValidationMemoire_technique && vm.permissionboutonvaliderMemoire_technique && vm.validation_memoire_technique==0">
                                        Validation
                                      </md-button>
                                  </div><br>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text">
                                          <div class="table-header">
                                            <span class="column-title">Description</span>
                                          </div>
                                        </th>
                                        <th class="secondary-text">
                                          <div class="table-header">
                                            <span class="column-title">Date livraison</span>
                                          </div>
                                        </th>
                                        <th class="secondary-text">
                                          <div class="table-header">
                                            <span class="column-title">Date Approbation</span>
                                          </div>
                                        </th>
                                        <th class="secondary-text">
                                          <div class="table-header">
                                            <span class="column-title">Observation</span>
                                          </div>
                                        </th>
                                        <th class="secondary-text">
                                          <div class="table-header">
                                            <span class="column-title">Action</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="memoire_technique in vm.allmemoire_technique"  ng-class="{selected: memoire_technique.$selected}" ng-click="vm.selectionMemoire_technique(memoire_technique)">
                                                 
                                        <td>
                                          <span ng-if="memoire_technique.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Description</label>
                                              <input name="description" type="text" ng-model="memoire_technique.description"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!memoire_technique.$edit">{{memoire_technique.description}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="memoire_technique.$edit">
                                            <md-datepicker ng-model="memoire_technique.date_livraison" md-placeholder="Date de livraison" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!memoire_technique.$edit">{{vm.formatDate(memoire_technique.date_livraison)}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="memoire_technique.$edit">
                                            <md-datepicker ng-model="memoire_technique.date_approbation" md-placeholder="Date de approbation" md-max-date="vm.datenow" md-min-date="memoire_technique.date_livraison" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!memoire_technique.$edit">{{vm.formatDate(memoire_technique.date_approbation)}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="memoire_technique.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="memoire_technique.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!memoire_technique.$edit">{{memoire_technique.observation}}</span>
                                        </td>

                                        <td>
                                          <a ng-if="!memoire_technique.$edit && memoire_technique.validation==0" ng-click="vm.modifierMemoire_technique(memoire_technique)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!memoire_technique.$edit && memoire_technique.validation==0" ng-click="vm.supprimerMemoire_technique(memoire_technique)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!memoire_technique.$edit && memoire_technique.validation==1">Aucune action disponible</span>
                                                    
                                          <a ng-if="memoire_technique.$edit" ng-click="vm.annulerMemoire_technique(memoire_technique)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="memoire_technique.$edit && memoire_technique.description && memoire_technique.date_livraison && memoire_technique.date_approbation>''" ng-click="vm.ajoutMemoire_technique(memoire_technique,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN FORMATION DPP----------------------------------------------->

                        <!----------------------------------Debut participant_dpp ----------------------------------------->
                              <md-tab>
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Appel d'offre</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAppel_offre()" style="width:10%;" ng-show="vm.showbuttonNouvAppel_offre">
                                            Nouveau
                                          </md-button>  
                                          <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerAppel_offre()" style="width:10%;" ng-show="vm.showbuttonValidationAppel_offre && vm.permissionboutonvaliderAppel_offre && vm.validation_appel_offre==0">
                                            Validation
                                          </md-button>
                                      </div><br>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Date livraison</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Date Approbation</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Observation</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="appel_offre in vm.allappel_offre"  ng-class="{selected: appel_offre.$selected}" ng-click="vm.selectionAppel_offre(appel_offre)">
                                                     
                                            <td>
                                              <span ng-if="appel_offre.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="appel_offre.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!appel_offre.$edit">{{appel_offre.description}}</span>
                                            </td>

                                            <td>
                                              <span ng-if="appel_offre.$edit">
                                                <md-datepicker ng-model="appel_offre.date_livraison" md-placeholder="Date de livraison" md-max-date="vm.datenow" required>                       
                                                </md-datepicker>
                                              </span>                          
                                              <span ng-if="!appel_offre.$edit">{{vm.formatDate(appel_offre.date_livraison)}}</span>
                                            </td>

                                            <td>
                                              <span ng-if="appel_offre.$edit">
                                                <md-datepicker ng-model="appel_offre.date_approbation" md-placeholder="Date de approbation" md-max-date="vm.datenow" md-min-date="appel_offre.date_livraison" required>                       
                                                </md-datepicker>
                                              </span>                          
                                              <span ng-if="!appel_offre.$edit">{{vm.formatDate(appel_offre.date_approbation)}}</span>
                                            </td>

                                            <td>
                                              <span ng-if="appel_offre.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Observation</label>
                                                  <input name="observation" type="text" ng-model="appel_offre.observation"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!appel_offre.$edit">{{appel_offre.observation}}</span>
                                            </td>

                                            <td>
                                              <a ng-if="!appel_offre.$edit && appel_offre.validation==0" ng-click="vm.modifierAppel_offre(appel_offre)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!appel_offre.$edit && appel_offre.validation==0" ng-click="vm.supprimerAppel_offre(appel_offre)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>                        
                                                        
                                              <span ng-if="!appel_offre.$edit && appel_offre.validation==1">Aucune action disponible</span>
                                                        
                                              <a ng-if="appel_offre.$edit" ng-click="vm.annulerAppel_offre(appel_offre)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="appel_offre.$edit && appel_offre.description && appel_offre.date_livraison && appel_offre.date_approbation>''" ng-click="vm.ajoutAppel_offre(appel_offre,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN participant_dpp ------------------------------------------>


                        <!---------------------------------DEBUT FORMATION ODC------------------------------------------->
                              <md-tab >
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Rapport mensuel</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterRapport_mensuel()" style="width:10%;" ng-show="vm.showbuttonNouvRapport_mensuel">
                                          Nouveau
                                        </md-button>  
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerRapport_mensuel()" style="width:10%;" ng-show="vm.showbuttonValidationRapport_mensuel && vm.permissionboutonvaliderRapport_mensuel && vm.validation_rapport_mensuel==0">
                                          Validation
                                        </md-button>
                                    </div><br>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text">
                                            <div class="table-header">
                                              <span class="column-title">Description</span>
                                            </div>
                                          </th>
                                          <th class="secondary-text">
                                            <div class="table-header">
                                              <span class="column-title">Date livraison</span>
                                            </div>
                                          </th>
                                          <th class="secondary-text">
                                            <div class="table-header">
                                              <span class="column-title">Observation</span>
                                            </div>
                                          </th>
                                          <th class="secondary-text">
                                            <div class="table-header">
                                              <span class="column-title">Action</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="rapport_mensuel in vm.allrapport_mensuel"  ng-class="{selected: rapport_mensuel.$selected}" ng-click="vm.selectionRapport_mensuel(rapport_mensuel)">
                                                  
                                          <td>
                                            <span ng-if="rapport_mensuel.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="rapport_mensuel.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!rapport_mensuel.$edit">{{rapport_mensuel.description}}</span>
                                          </td>
                                          <td>
                                            <span ng-if="rapport_mensuel.$edit">
                                              <md-datepicker ng-model="rapport_mensuel.date_livraison" md-placeholder="Date de livraison" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!rapport_mensuel.$edit">{{vm.formatDate(rapport_mensuel.date_livraison)}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="rapport_mensuel.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Observation</label>
                                                <input name="observation" type="text" ng-model="rapport_mensuel.observation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!rapport_mensuel.$edit">{{rapport_mensuel.observation}}</span>
                                          </td>

                                          <td>
                                            <a ng-if="!rapport_mensuel.$edit && rapport_mensuel.validation==0" ng-click="vm.modifierRapport_mensuel(rapport_mensuel)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!rapport_mensuel.$edit && rapport_mensuel.validation==0" ng-click="vm.supprimerRapport_mensuel(rapport_mensuel)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>                        
                                                      
                                            <span ng-if="!rapport_mensuel.$edit && rapport_mensuel.validation==1">Aucune action disponible</span>
                                                      
                                            <a ng-if="rapport_mensuel.$edit" ng-click="vm.annulerRapport_mensuel(rapport_mensuel)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="rapport_mensuel.$edit && rapport_mensuel.description && rapport_mensuel.date_livraison>''" ng-click="vm.ajoutRapport_mensuel(rapport_mensuel,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>

                       <!---------------------------------FIN FORMATION ODC------------------------------------------->

                       <!---------------------------------FIN participant ODC------------------------------------------->
                              <md-tab>
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==false">P</span>
                                        <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepTwo==true">
                                          <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Manuel de gestion</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterManuel_gestion()" style="width:10%;" ng-show="vm.showbuttonNouvManuel_gestion">
                                            Nouveau
                                          </md-button>  
                                          <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerManuel_gestion()" style="width:10%;" ng-show="vm.showbuttonValidationManuel_gestion && vm.permissionboutonvaliderManuel_gestion && vm.validation_manuel_gestion==0">
                                            Validation
                                          </md-button>
                                      </div><br>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Date livraison</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Observation</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="manuel_gestion in vm.allmanuel_gestion"  ng-class="{selected: manuel_gestion.$selected}" ng-click="vm.selectionManuel_gestion(manuel_gestion)">
                                                     
                                            <td>
                                              <span ng-if="manuel_gestion.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="manuel_gestion.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!manuel_gestion.$edit">{{manuel_gestion.description}}</span>
                                            </td>

                                            <td>
                                              <span ng-if="manuel_gestion.$edit">
                                                <md-datepicker ng-model="manuel_gestion.date_livraison" md-placeholder="Date de livraison" md-max-date="vm.datenow" required>                       
                                                </md-datepicker>
                                              </span>                          
                                              <span ng-if="!manuel_gestion.$edit">{{vm.formatDate(manuel_gestion.date_livraison)}}</span>
                                            </td>

                                            <td>
                                              <span ng-if="manuel_gestion.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Observation</label>
                                                  <input name="observation" type="text" ng-model="manuel_gestion.observation"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!manuel_gestion.$edit">{{manuel_gestion.observation}}</span>
                                            </td>

                                            <td>
                                              <a ng-if="!manuel_gestion.$edit && manuel_gestion.validation==0" ng-click="vm.modifierManuel_gestion(manuel_gestion)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!manuel_gestion.$edit && manuel_gestion.validation==0" ng-click="vm.supprimerManuel_gestion(manuel_gestion)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>                        
                                                        
                                              <span ng-if="!manuel_gestion.$edit && manuel_gestion.validation==1">Aucune action disponible</span>
                                                        
                                              <a ng-if="manuel_gestion.$edit" ng-click="vm.annulerManuel_gestion(manuel_gestion)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="manuel_gestion.$edit && manuel_gestion.description && manuel_gestion.date_livraison>''" ng-click="vm.ajoutManuel_gestion(manuel_gestion,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                       <!--------------------------------DEBUT participant emies----------------------------------------->

                       <!--------------------------------DEBUT Formation emies----------------------------------------->

                            <md-tab >
                              <md-tab-label>
                                <span class="ms-form-wizard-step-label">
                                    <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-currency-eur s16"></i>
                                    </span-->
                                  <span class="ms-form-wizard-step-text">Police d'assurance</span>
                                </span>
                              </md-tab-label>
                              
                              <md-tab-body>
                                <div style="widht:100%;">  
                                    <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.ajouterPolice_assurance()" style="width:10%;" ng-show="vm.showbuttonNouvPolice_assurance">
                                      Nouveau
                                    </md-button>  
                                    <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.validerPolice_assurance()" style="width:10%;" ng-show="vm.showbuttonValidationPolice_assurance && vm.permissionboutonvaliderPolice_assurance && vm.validation_police_assurance==0">
                                      Validation
                                    </md-button>
                                </div><br>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text">
                                        <div class="table-header">
                                          <span class="column-title">Description</span>
                                        </div>
                                      </th>
                                      <th class="secondary-text">
                                        <div class="table-header">
                                          <span class="column-title">Date expiration</span>
                                        </div>
                                      </th>
                                      <th class="secondary-text">
                                        <div class="table-header">
                                          <span class="column-title">Observation</span>
                                        </div>
                                      </th>
                                      <th class="secondary-text">
                                        <div class="table-header">
                                          <span class="column-title">Action</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="police_assurance in vm.allpolice_assurance"  ng-class="{selected: police_assurance.$selected}" ng-click="vm.selectionPolice_assurance(police_assurance)">
                                                
                                      <td>
                                        <span ng-if="police_assurance.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Description</label>
                                            <input name="description" type="text" ng-model="police_assurance.description"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!police_assurance.$edit">{{police_assurance.description}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="police_assurance.$edit">
                                          <md-datepicker ng-model="police_assurance.date_expiration" md-placeholder="Date de expiration" md-max-date="vm.datenow" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!police_assurance.$edit">{{vm.formatDate(police_assurance.date_expiration)}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="police_assurance.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Observation</label>
                                            <input name="observation" type="text" ng-model="police_assurance.observation"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!police_assurance.$edit">{{police_assurance.observation}}</span>
                                      </td>

                                      <td>
                                        <a ng-if="!police_assurance.$edit && police_assurance.validation==0" ng-click="vm.modifierPolice_assurance(police_assurance)" title="Modifier">
                                          <span class="icon-table-edit"></span>
                                        </a>
                                                  
                                        <a ng-if="!police_assurance.$edit && police_assurance.validation==0" ng-click="vm.supprimerPolice_assurance(police_assurance)" title="Supprimer">
                                          <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!police_assurance.$edit && police_assurance.validation==1">Aucune action disponible</span>          
                                        <a ng-if="police_assurance.$edit" ng-click="vm.annulerPolice_assurance(police_assurance)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="police_assurance.$edit && police_assurance.description && police_assurance.date_expiration>''" ng-click="vm.ajoutPolice_assurance(police_assurance,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>

                            </md-tab-body>
                            </md-tab>
                        <!---------------------------------Fin Formation emies------------------------------------------>
                                
                              <md-tab>
                              </md-tab>
                      <!---------------------convention cisco/feffi---------------->
                      
                            </md-tabs> 
                          </ms-form-wizard>
                    <!---------------------------------FILS PRESTATION-----------------------------------------------> 

                      </md-tab-body>
                    </md-tab>

                    <md-tab ng-disabled="!vm.stepprestation_moe">
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Suivi payement</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                       <!---------------------------------FILS PRESTATION----------------------------------------------->       
                         <ms-form-wizard flex id="soussousmenu"> 
                          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                        <!-----------------------------DEBUT demande debut travaux moe-------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Preparation travaux</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_debut_travaux_moe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_debut_travaux_moe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_debut_travaux_moe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_debut_travaux_moe_creer  && vm.permissionboutonvaliderDemande_debut_travaux_moe_creer &&  vm.validation_demande_debut_travaux_moe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_debut_travaux_moe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_debut_travaux_moe_encourdpfi  && vm.permissionboutonvaliderDemande_debut_travaux_moe_encourdpfi &&  vm.validation_demande_debut_travaux_moe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_debut_travaux_moe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_debut_travaux_moe_rejedpfi  && vm.permissionboutonvaliderDemande_debut_travaux_moe_rejedpfi &&  vm.validation_demande_debut_travaux_moe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_debut_travaux_moe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_debut_travaux_moe_validedpfi  && vm.permissionboutonvaliderDemande_debut_travaux_moe_validedpfi &&  vm.validation_demande_debut_travaux_moe ==2">
                                          Valider
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_debut_travaux_moe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_debut_travaux_moe in vm.alldemande_debut_travaux_moe"  ng-class="{selected: demande_debut_travaux_moe.$selected}" ng-click="vm.selectionDemande_debut_travaux_moe(demande_debut_travaux_moe)">
                                                   
                                          <td>
                                            <span ng-if="demande_debut_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_debut_travaux_moe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_debut_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_debut_travaux_moe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_debut_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence latrine_bur</label>
                                                <input name="ref_facture" type="text" ng-model="demande_debut_travaux_moe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_debut_travaux_moe.id_tranche_d_debut_travaux_moe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_debut_moe(demande_debut_travaux_moe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_d_debut_travaux_moe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_debut_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_debut_travaux_moe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_debut_travaux_moe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_debut_travaux_moe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_debut_travaux_moe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_debut_travaux_moe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_debut_travaux_moe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_debut_travaux_moe.$edit">{{demande_debut_travaux_moe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_debut_travaux_moe.$edit">
                                              <md-datepicker ng-model="demande_debut_travaux_moe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_debut_travaux_moe.$edit">{{vm.formatDate(demande_debut_travaux_moe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_debut_travaux_moe.$edit && demande_debut_travaux_moe.validation==0" ng-click="vm.modifierDemande_debut_travaux_moe(demande_debut_travaux_moe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_debut_travaux_moe.$edit  && demande_debut_travaux_moe.validation==0" ng-click="vm.supprimerDemande_debut_travaux_moe(demande_debut_travaux_moe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_debut_travaux_moe.$edit  && demande_debut_travaux_moe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_debut_travaux_moe.$edit" ng-click="vm.annulerDemande_debut_travaux_moe(demande_debut_travaux_moe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_debut_travaux_moe.$edit && demande_debut_travaux_moe.objet && demande_debut_travaux_moe.description && demande_debut_travaux_moe.montant && demande_debut_travaux_moe.date  && demande_debut_travaux_moe.ref_facture && demande_debut_travaux_moe.id_tranche_d_debut_travaux_moe && demande_debut_travaux_moe.cumul && demande_debut_travaux_moe.reste>''" ng-click="vm.ajoutDemande_debut_travaux_moe(demande_debut_travaux_moe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande debut travaux moe---------------------------------->

                        <!----------------------------------Debut justificatif debut travaux moe-------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_debut_travaux_moe()" style="width:10%;" ng-show="vm.validation_demande_debut_travaux_moe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_debut_travaux_moe in vm.alljustificatif_debut_travaux_moe"  ng-class="{selected: justificatif_debut_travaux_moe.$selected}" ng-click="vm.selectionJustificatif_debut_travaux_moe(justificatif_debut_travaux_moe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_debut_travaux_moe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_debut_travaux_moe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_debut_travaux_moe.$edit">{{justificatif_debut_travaux_moe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_debut_travaux_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_debut_travaux_moe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_debut_travaux_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_debut_travaux_moe.$edit">{{justificatif_debut_travaux_moe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_debut_travaux_moe.$edit && vm.validation_demande_debut_travaux_moe ==0" ng-click="vm.modifierJustificatif_debut_travaux_moe(justificatif_debut_travaux_moe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_debut_travaux_moe.$edit && vm.validation_demande_debut_travaux_moe ==0" ng-click="vm.supprimerJustificatif_debut_travaux_moe(justificatif_debut_travaux_moe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_debut_travaux_moe.$edit" ng-click="vm.download_piece(justificatif_debut_travaux_moe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_debut_travaux_moe.$edit" ng-click="vm.annulerJustificatif_debut_travaux_moe(justificatif_debut_travaux_moe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_debut_travaux_moe.$edit && justificatif_debut_travaux_moe.description && justificatif_debut_travaux_moe.fichier>''" ng-click="vm.ajoutJustificatif_debut_travaux_moe(justificatif_debut_travaux_moe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif debut travaux moe--------------------------->


                        <!---------------------------------DEBUT paiement debut travaux moe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe || vm.validation_demande_debut_travaux_moe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_debut_travaux_moe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_debut_travaux_moe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_debut_travaux_moe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_debut_travaux_moe && vm.permissionboutonvaliderPaiement_debut_travaux_moe && vm.validation_paiement_debut_travaux_moe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_debut_travaux_moe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_debut_travaux_moe in vm.allpaiement_debut_travaux_moe"  ng-class="{selected: paiement_debut_travaux_moe.$selected}" ng-click="vm.selectionPaiement_debut_travaux_moe(paiement_debut_travaux_moe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_debut_travaux_moe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_debut_travaux_moe.$edit">{{paiement_debut_travaux_moe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_debut_travaux_moe.$edit">
                                            <md-datepicker ng-model="paiement_debut_travaux_moe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_debut_travaux_moe.$edit">{{vm.formatDate(paiement_debut_travaux_moe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_debut_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_debut_travaux_moe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_debut_travaux_moe.$edit">{{paiement_debut_travaux_moe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_debut_travaux_moe.$edit && paiement_debut_travaux_moe.validation ==0" ng-click="vm.modifierPaiement_debut_travaux_moe(paiement_debut_travaux_moe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_debut_travaux_moe.$edit && paiement_debut_travaux_moe.validation ==0" ng-click="vm.supprimerPaiement_debut_travaux_moe(paiement_debut_travaux_moe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_debut_travaux_moe.$edit && paiement_debut_travaux_moe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_debut_travaux_moe.$edit" ng-click="vm.annulerPaiement_debut_travaux_moe(paiement_debut_travaux_moe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_debut_travaux_moe.$edit && paiement_debut_travaux_moe.montant_paiement && paiement_debut_travaux_moe.date_paiement >''" ng-click="vm.ajoutPaiement_debut_travaux_moe(paiement_debut_travaux_moe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                              </md-tab>

                       <!---------------------------------FIN paiement debut travaux moe------------------------------->

                       <!-----------------------------DEBUT demande Batiment moe------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Batiment</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_batiment_moe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_batiment_moe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_moe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_batiment_moe_creer  && vm.permissionboutonvaliderDemande_batiment_moe_creer &&  vm.validation_demande_batiment_moe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_moe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_batiment_moe_encourdpfi  && vm.permissionboutonvaliderDemande_batiment_moe_encourdpfi &&  vm.validation_demande_batiment_moe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_moe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_batiment_moe_rejedpfi  && vm.permissionboutonvaliderDemande_batiment_moe_rejedpfi &&  vm.validation_demande_batiment_moe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_moe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_batiment_moe_validedpfi  && vm.permissionboutonvaliderDemande_batiment_moe_validedpfi &&  vm.validation_demande_batiment_moe ==2">
                                          Valider
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_batiment_moe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_batiment_moe in vm.alldemande_batiment_moe"  ng-class="{selected: demande_batiment_moe.$selected}" ng-click="vm.selectionDemande_batiment_moe(demande_batiment_moe)">
                                                   
                                          <td>
                                            <span ng-if="demande_batiment_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_batiment_moe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_batiment_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_batiment_moe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_batiment_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence latrine_bur</label>
                                                <input name="ref_facture" type="text" ng-model="demande_batiment_moe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_batiment_moe.id_tranche_demande_batiment_moe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_batiment_moe(demande_batiment_moe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_demande_batiment_moe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_batiment_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_batiment_moe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_batiment_moe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_batiment_moe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_batiment_moe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_batiment_moe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_batiment_moe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_moe.$edit">{{demande_batiment_moe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_batiment_moe.$edit">
                                              <md-datepicker ng-model="demande_batiment_moe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_batiment_moe.$edit">{{vm.formatDate(demande_batiment_moe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_batiment_moe.$edit && demande_batiment_moe.validation==0" ng-click="vm.modifierDemande_batiment_moe(demande_batiment_moe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_batiment_moe.$edit  && demande_batiment_moe.validation==0" ng-click="vm.supprimerDemande_batiment_moe(demande_batiment_moe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_batiment_moe.$edit  && demande_batiment_moe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_batiment_moe.$edit" ng-click="vm.annulerDemande_batiment_moe(demande_batiment_moe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_batiment_moe.$edit && demande_batiment_moe.objet && demande_batiment_moe.description && demande_batiment_moe.montant && demande_batiment_moe.date  && demande_batiment_moe.ref_facture && demande_batiment_moe.id_tranche_demande_batiment_moe && demande_batiment_moe.cumul && demande_batiment_moe.reste>''" ng-click="vm.ajoutDemande_batiment_moe(demande_batiment_moe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande batiment moe--------------------------------------->

                        <!----------------------------------Debut justificatif batiment moe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_batiment_moe()" style="width:10%;" ng-show="vm.validation_demande_batiment_moe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_batiment_moe in vm.alljustificatif_batiment_moe"  ng-class="{selected: justificatif_batiment_moe.$selected}" ng-click="vm.selectionJustificatif_batiment_moe(justificatif_batiment_moe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_batiment_moe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_batiment_moe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_batiment_moe.$edit">{{justificatif_batiment_moe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_batiment_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_batiment_moe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_batiment_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_batiment_moe.$edit">{{justificatif_batiment_moe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_batiment_moe.$edit && vm.validation_demande_batiment_moe ==0" ng-click="vm.modifierJustificatif_batiment_moe(justificatif_batiment_moe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_batiment_moe.$edit && vm.validation_demande_batiment_moe ==0" ng-click="vm.supprimerJustificatif_batiment_moe(justificatif_batiment_moe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_batiment_moe.$edit" ng-click="vm.download_piece(justificatif_batiment_moe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_batiment_moe.$edit" ng-click="vm.annulerJustificatif_batiment_moe(justificatif_batiment_moe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_batiment_moe.$edit && justificatif_batiment_moe.description && justificatif_batiment_moe.fichier>''" ng-click="vm.ajoutJustificatif_batiment_moe(justificatif_batiment_moe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif batiment moe-------------------------------->


                        <!---------------------------------DEBUT paiement batiment moe------------------------------------>
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe || vm.validation_demande_batiment_moe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_batiment_moe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_batiment_moe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_batiment_moe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_batiment_moe && vm.permissionboutonvaliderPaiement_batiment_moe && vm.validation_paiement_batiment_moe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_batiment_moe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_batiment_moe in vm.allpaiement_batiment_moe"  ng-class="{selected: paiement_batiment_moe.$selected}" ng-click="vm.selectionPaiement_batiment_moe(paiement_batiment_moe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_batiment_moe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_batiment_moe.$edit">{{paiement_batiment_moe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_batiment_moe.$edit">
                                            <md-datepicker ng-model="paiement_batiment_moe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_batiment_moe.$edit">{{vm.formatDate(paiement_batiment_moe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_batiment_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_batiment_moe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_batiment_moe.$edit">{{paiement_batiment_moe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_batiment_moe.$edit && paiement_batiment_moe.validation ==0" ng-click="vm.modifierPaiement_batiment_moe(paiement_batiment_moe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_batiment_moe.$edit && paiement_batiment_moe.validation ==0" ng-click="vm.supprimerPaiement_batiment_moe(paiement_batiment_moe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_batiment_moe.$edit && paiement_batiment_moe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_batiment_moe.$edit" ng-click="vm.annulerPaiement_batiment_moe(paiement_batiment_moe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_batiment_moe.$edit && paiement_batiment_moe.montant_paiement && paiement_batiment_moe.date_paiement >''" ng-click="vm.ajoutPaiement_batiment_moe(paiement_batiment_moe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                              </md-tab>

                       <!---------------------------------FIN paiement batiment moe------------------------------------>

                        <!-----------------------------DEBUT demande latrine moe------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Latrine</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">                                    
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_latrine_moe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_latrine_moe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_moe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_latrine_moe_creer  && vm.permissionboutonvaliderDemande_latrine_moe_creer &&  vm.validation_demande_latrine_moe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_moe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_latrine_moe_encourdpfi  && vm.permissionboutonvaliderDemande_latrine_moe_encourdpfi &&  vm.validation_demande_latrine_moe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_moe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_latrine_moe_rejedpfi  && vm.permissionboutonvaliderDemande_latrine_moe_rejedpfi &&  vm.validation_demande_latrine_moe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_moe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_latrine_moe_validedpfi  && vm.permissionboutonvaliderDemande_latrine_moe_validedpfi &&  vm.validation_demande_latrine_moe ==2">
                                          Valider
                                        </md-button>
                                         <span>{{vm.showbuttonValidationDemande_latrine_moe_creer}}1</span> <span>{{vm.permissionboutonvaliderDemande_latrine_moe_creer}}2</span><span>{{vm.validation_demande_latrine_moe}}3</span>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_latrine_moe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_latrine_moe in vm.alldemande_latrine_moe"  ng-class="{selected: demande_latrine_moe.$selected}" ng-click="vm.selectionDemande_latrine_moe(demande_latrine_moe)">
                                                   
                                          <td>
                                            <span ng-if="demande_latrine_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_latrine_moe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_latrine_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_latrine_moe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_latrine_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence latrine_bur</label>
                                                <input name="ref_facture" type="text" ng-model="demande_latrine_moe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_latrine_moe.id_tranche_demande_latrine_moe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_latrine_moe(demande_latrine_moe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_demande_latrine_moe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_latrine_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_latrine_moe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_latrine_moe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_latrine_moe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_latrine_moe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_latrine_moe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_latrine_moe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_moe.$edit">{{demande_latrine_moe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_latrine_moe.$edit">
                                              <md-datepicker ng-model="demande_latrine_moe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_latrine_moe.$edit">{{vm.formatDate(demande_latrine_moe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_latrine_moe.$edit && demande_latrine_moe.validation==0" ng-click="vm.modifierDemande_latrine_moe(demande_latrine_moe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_latrine_moe.$edit  && demande_latrine_moe.validation==0" ng-click="vm.supprimerDemande_latrine_moe(demande_latrine_moe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_latrine_moe.$edit  && demande_latrine_moe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_latrine_moe.$edit" ng-click="vm.annulerDemande_latrine_moe(demande_latrine_moe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_latrine_moe.$edit && demande_latrine_moe.objet && demande_latrine_moe.description && demande_latrine_moe.montant && demande_latrine_moe.date  && demande_latrine_moe.ref_facture && demande_latrine_moe.id_tranche_demande_latrine_moe && demande_latrine_moe.cumul && demande_latrine_moe.reste>''" ng-click="vm.ajoutDemande_latrine_moe(demande_latrine_moe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande latrine moe--------------------------------------->

                        <!----------------------------------Debut justificatif latrine moe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_latrine_moe()" style="width:10%;" ng-show="vm.validation_demande_latrine_moe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_latrine_moe in vm.alljustificatif_latrine_moe"  ng-class="{selected: justificatif_latrine_moe.$selected}" ng-click="vm.selectionJustificatif_latrine_moe(justificatif_latrine_moe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_latrine_moe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_latrine_moe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_latrine_moe.$edit">{{justificatif_latrine_moe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_latrine_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_latrine_moe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_latrine_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_latrine_moe.$edit">{{justificatif_latrine_moe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_latrine_moe.$edit && vm.validation_demande_latrine_moe ==0" ng-click="vm.modifierJustificatif_latrine_moe(justificatif_latrine_moe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_latrine_moe.$edit && vm.validation_demande_latrine_moe ==0" ng-click="vm.supprimerJustificatif_latrine_moe(justificatif_latrine_moe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_latrine_moe.$edit" ng-click="vm.download_piece(justificatif_latrine_moe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_latrine_moe.$edit" ng-click="vm.annulerJustificatif_latrine_moe(justificatif_latrine_moe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_latrine_moe.$edit && justificatif_latrine_moe.description && justificatif_latrine_moe.fichier>''" ng-click="vm.ajoutJustificatif_latrine_moe(justificatif_latrine_moe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif latrine moe-------------------------------->


                        <!---------------------------------DEBUT paiement latrine moe------------------------------------>
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe || vm.validation_demande_latrine_moe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_latrine_moe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_latrine_moe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_latrine_moe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_latrine_moe && vm.permissionboutonvaliderPaiement_latrine_moe && vm.validation_paiement_latrine_moe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_latrine_moe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_latrine_moe in vm.allpaiement_latrine_moe"  ng-class="{selected: paiement_latrine_moe.$selected}" ng-click="vm.selectionPaiement_latrine_moe(paiement_latrine_moe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_latrine_moe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_latrine_moe.$edit">{{paiement_latrine_moe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_latrine_moe.$edit">
                                            <md-datepicker ng-model="paiement_latrine_moe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_latrine_moe.$edit">{{vm.formatDate(paiement_latrine_moe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_latrine_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_latrine_moe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_latrine_moe.$edit">{{paiement_latrine_moe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_latrine_moe.$edit && paiement_latrine_moe.validation ==0" ng-click="vm.modifierPaiement_latrine_moe(paiement_latrine_moe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_latrine_moe.$edit && paiement_latrine_moe.validation ==0" ng-click="vm.supprimerPaiement_latrine_moe(paiement_latrine_moe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_latrine_moe.$edit && paiement_latrine_moe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_latrine_moe.$edit" ng-click="vm.annulerPaiement_latrine_moe(paiement_latrine_moe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_latrine_moe.$edit && paiement_latrine_moe.montant_paiement && paiement_latrine_moe.date_paiement >''" ng-click="vm.ajoutPaiement_latrine_moe(paiement_latrine_moe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                              </md-tab>

                       <!---------------------------------FIN paiement batiment moe------------------------------------>

 <!-----------------------------DEBUT demande debut travaux moe-------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">A la fin travaux</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_fin_travaux_moe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_fin_travaux_moe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_fin_travaux_moe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_fin_travaux_moe_creer  && vm.permissionboutonvaliderDemande_fin_travaux_moe_creer &&  vm.validation_demande_fin_travaux_moe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_fin_travaux_moe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_fin_travaux_moe_encourdpfi  && vm.permissionboutonvaliderDemande_fin_travaux_moe_encourdpfi &&  vm.validation_demande_fin_travaux_moe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_fin_travaux_moe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_fin_travaux_moe_rejedpfi  && vm.permissionboutonvaliderDemande_fin_travaux_moe_rejedpfi &&  vm.validation_demande_fin_travaux_moe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_fin_travaux_moe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_fin_travaux_moe_validedpfi  && vm.permissionboutonvaliderDemande_fin_travaux_moe_validedpfi &&  vm.validation_demande_fin_travaux_moe ==2">
                                          Valider
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_fin_travaux_moe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_fin_travaux_moe in vm.alldemande_fin_travaux_moe"  ng-class="{selected: demande_fin_travaux_moe.$selected}" ng-click="vm.selectionDemande_fin_travaux_moe(demande_fin_travaux_moe)">
                                                   
                                          <td>
                                            <span ng-if="demande_fin_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_fin_travaux_moe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_fin_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_fin_travaux_moe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_fin_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence latrine_bur</label>
                                                <input name="ref_facture" type="text" ng-model="demande_fin_travaux_moe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_fin_travaux_moe.id_tranche_d_fin_travaux_moe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_fin_moe(demande_fin_travaux_moe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_d_fin_travaux_moe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_fin_travaux_moe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_fin_travaux_moe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_fin_travaux_moe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_fin_travaux_moe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_fin_travaux_moe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_fin_travaux_moe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_fin_travaux_moe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_fin_travaux_moe.$edit">{{demande_fin_travaux_moe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_fin_travaux_moe.$edit">
                                              <md-datepicker ng-model="demande_fin_travaux_moe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_fin_travaux_moe.$edit">{{vm.formatDate(demande_fin_travaux_moe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_fin_travaux_moe.$edit && demande_fin_travaux_moe.validation==0" ng-click="vm.modifierDemande_fin_travaux_moe(demande_fin_travaux_moe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_fin_travaux_moe.$edit  && demande_fin_travaux_moe.validation==0" ng-click="vm.supprimerDemande_fin_travaux_moe(demande_fin_travaux_moe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_fin_travaux_moe.$edit  && demande_fin_travaux_moe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_fin_travaux_moe.$edit" ng-click="vm.annulerDemande_fin_travaux_moe(demande_fin_travaux_moe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_fin_travaux_moe.$edit && demande_fin_travaux_moe.objet && demande_fin_travaux_moe.description && demande_fin_travaux_moe.montant && demande_fin_travaux_moe.date  && demande_fin_travaux_moe.ref_facture && demande_fin_travaux_moe.id_tranche_d_fin_travaux_moe && demande_fin_travaux_moe.cumul && demande_fin_travaux_moe.reste>''" ng-click="vm.ajoutDemande_fin_travaux_moe(demande_fin_travaux_moe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande fin travaux moe---------------------------------->

                        <!----------------------------------fin justificatif fin travaux moe-------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_fin_travaux_moe()" style="width:10%;" ng-show="vm.validation_demande_fin_travaux_moe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_fin_travaux_moe in vm.alljustificatif_fin_travaux_moe"  ng-class="{selected: justificatif_fin_travaux_moe.$selected}" ng-click="vm.selectionJustificatif_fin_travaux_moe(justificatif_fin_travaux_moe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_fin_travaux_moe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_fin_travaux_moe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_fin_travaux_moe.$edit">{{justificatif_fin_travaux_moe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_fin_travaux_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_fin_travaux_moe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_fin_travaux_moe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_fin_travaux_moe.$edit">{{justificatif_fin_travaux_moe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_fin_travaux_moe.$edit && vm.validation_demande_fin_travaux_moe ==0" ng-click="vm.modifierJustificatif_fin_travaux_moe(justificatif_fin_travaux_moe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_fin_travaux_moe.$edit && vm.validation_demande_fin_travaux_moe ==0" ng-click="vm.supprimerJustificatif_fin_travaux_moe(justificatif_fin_travaux_moe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_fin_travaux_moe.$edit" ng-click="vm.download_piece(justificatif_fin_travaux_moe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_fin_travaux_moe.$edit" ng-click="vm.annulerJustificatif_fin_travaux_moe(justificatif_fin_travaux_moe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_fin_travaux_moe.$edit && justificatif_fin_travaux_moe.description && justificatif_fin_travaux_moe.fichier>''" ng-click="vm.ajoutJustificatif_fin_travaux_moe(justificatif_fin_travaux_moe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif fin travaux moe--------------------------->


                        <!---------------------------------fin paiement fin travaux moe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_d_tra_moe || vm.validation_demande_fin_travaux_moe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_fin_travaux_moe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_fin_travaux_moe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_fin_travaux_moe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_fin_travaux_moe && vm.permissionboutonvaliderPaiement_fin_travaux_moe && vm.validation_paiement_fin_travaux_moe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_fin_travaux_moe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_fin_travaux_moe in vm.allpaiement_fin_travaux_moe"  ng-class="{selected: paiement_fin_travaux_moe.$selected}" ng-click="vm.selectionPaiement_fin_travaux_moe(paiement_fin_travaux_moe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_fin_travaux_moe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_fin_travaux_moe.$edit">{{paiement_fin_travaux_moe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_fin_travaux_moe.$edit">
                                            <md-datepicker ng-model="paiement_fin_travaux_moe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_fin_travaux_moe.$edit">{{vm.formatDate(paiement_fin_travaux_moe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_fin_travaux_moe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_fin_travaux_moe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_fin_travaux_moe.$edit">{{paiement_fin_travaux_moe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_fin_travaux_moe.$edit && paiement_fin_travaux_moe.validation ==0" ng-click="vm.modifierPaiement_fin_travaux_moe(paiement_fin_travaux_moe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_fin_travaux_moe.$edit && paiement_fin_travaux_moe.validation ==0" ng-click="vm.supprimerPaiement_fin_travaux_moe(paiement_fin_travaux_moe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_fin_travaux_moe.$edit && paiement_fin_travaux_moe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_fin_travaux_moe.$edit" ng-click="vm.annulerPaiement_fin_travaux_moe(paiement_fin_travaux_moe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_fin_travaux_moe.$edit && paiement_fin_travaux_moe.montant_paiement && paiement_fin_travaux_moe.date_paiement >''" ng-click="vm.ajoutPaiement_fin_travaux_moe(paiement_fin_travaux_moe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              </md-tab-body>
                              </md-tab>
                       <!---------------------------------FIN paiement fin travaux moe------------------------------->
                              <md-tab>
                              </md-tab>
                      <!---------------------convention cisco/feffi---------------->
                      
                            </md-tabs> 
                          </ms-form-wizard>
                    <!---------------------------------FILS PRESTATION-----------------------------------------------> 

                      </md-tab-body>
                    </md-tab>
                    
                    <!---------------------------------Avenant MOE-----------------------------------------------> 
                    <md-tab ng-disabled="!vm.stepprestation_moe">                    
                      <md-tab-label >
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Avenant</span>
                        </span>
                       
                      </md-tab-label>

                      <md-tab-body>
                        <div style="widht:100%;">  
                                    <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvenant_moe()" style="width:10%;" ng-show="vm.showbuttonNouvavenant_moe">
                                      Nouveau
                                    </md-button>
                                  <md-button type="submit" ng-show="vm.showbuttonValidation_avenant_moe && vm.permissionboutonvalideravenant_moe && vm.validation_avenant_moe==0" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerAvenant_moe()" style="width:10%;">
                                    Valider
                                  </md-button>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.avenant_moe_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="avenant_moe in vm.allavenant_moe"  ng-class="{selected: avenant_moe.$selected}" ng-click="vm.selectionAvenant_moe(avenant_moe)">
                                                
                                      <td>
                                        <span ng-if="avenant_moe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Descriprtion</label>
                                            <input name="description" type="text" ng-model="avenant_moe.description"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_moe.$edit">{{avenant_moe.description}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_moe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Référence avenant</label>
                                            <input name="ref_avenant" type="text" ng-model="avenant_moe.ref_avenant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_moe.$edit">{{avenant_moe.ref_avenant}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_moe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout batiment</label>
                                            <input name="montant" type="text" ng-model="avenant_moe.montant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_moe.$edit">{{avenant_moe.montant}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_moe.$edit">
                                          <md-datepicker ng-model="avenant_moe.date_signature" md-placeholder="Date de signature" md-max-date="vm.date_now" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!avenant_moe.$edit">{{vm.formatDate(avenant_moe.date_signature)}}</span>
                                      </td>                      
                                      <td>
                                        <a ng-if="!avenant_moe.$edit && avenant_moe.validation==0" ng-click="vm.modifierAvenant_moe(avenant_moe)" title="Modifier">
                                          <span class="icon-table-edit"></span>
                                        </a>
                                                  
                                        <a ng-if="!avenant_moe.$edit && avenant_moe.validation==0" ng-click="vm.supprimerAvenant_moe(avenant_moe)" title="Supprimer">
                                          <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!avenant_moe.$edit && avenant_moe.validation==1">Aucune action disponible</span>          
                                        <a ng-if="avenant_moe.$edit" ng-click="vm.annulerAvenant_moe(avenant_moe)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="avenant_moe.$edit && avenant_moe.description &&  avenant_moe.montant &&  avenant_moe.date_signature>''" ng-click="vm.ajoutAvenant_moe(avenant_moe,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                      </md-tab-body>
                    </md-tab>
                    <!---------------------------------Avenant MOE-----------------------------------------------> 
                    <!-------------------------------Debut document moe -------------------------------------------->
                    <md-tab >
                        <md-tab-label>
                          <span class="ms-form-wizard-step-label">
                              <span class="ms-form-wizard-step-text">Importer document</span>
                          </span>
                        </md-tab-label>
                        
                        <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDocument_moe_scan()" style="width:10%;" ng-show="vm.showbuttonValidation_document_moe_scan && vm.permissionboutonvaliderdocument_moe_scan && vm.validation_document_moe_scan==0">
                                Validation
                              </md-button>
                          </div><br>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Code</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Intitule</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Existance</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Fichier</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Date Elaboration</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Observation</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Action</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="document_moe_scan in vm.alldocument_moe_scan"  ng-class="{selected: document_moe_scan.$selected}" ng-click="vm.selectionDocument_moe_scan(document_moe_scan)">

                                <td>                                            
                                  <span>{{document_moe_scan.code}}</span>
                                </td>

                                <td>                                            
                                  <span>{{document_moe_scan.intitule}}</span>
                                </td>
                                
                                <td>                                 
                                   <md-checkbox ng-model="document_moe_scan.existance" aria-label="Checkbox 1" disabled>
                                  </md-checkbox>
                                </td>
                                          
                                <td>
                                  <span ng-if="document_moe_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                      <input name="fichier" type="text" ng-model="document_moe_scan.fichier" disabled/>
                                    </md-input-container>   
                                  </span>

                                  <span ng-if="document_moe_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                    <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile_doc_moe"  ng-model="fichier" id="fileid"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_moe_scan.$edit">{{document_moe_scan.fichier}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_moe_scan.$edit">
                                    <md-datepicker ng-model="document_moe_scan.date_elaboration" md-placeholder="Date de elaboration" md-max-date="vm.date_now" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!document_moe_scan.$edit">{{vm.formatDate(document_moe_scan.date_elaboration)}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_moe_scan.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Observation</label>
                                      <input name="observation" type="text" ng-model="document_moe_scan.observation"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_moe_scan.$edit">{{document_moe_scan.observation}}</span>
                                </td>

                                <td>
                                  <a ng-if="!document_moe_scan.$edit && (document_moe_scan.validation==0 || document_moe_scan.validation==null)" ng-click="vm.modifierDocument_moe_scan(document_moe_scan)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!document_moe_scan.$edit && document_moe_scan.validation==0" ng-click="vm.supprimerDocument_moe_scan(document_moe_scan)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>                        
                                            
                                  <a ng-if="!document_moe_scan.$edit && document_moe_scan.existance" ng-click="vm.download_document_moe_scan(document_moe_scan)" title="Telecharger fichier">
                                    <span class="icon-box-download"></span>
                                  </a>
                                            
                                  <a ng-if="document_moe_scan.$edit" ng-click="vm.annulerDocument_moe_scan(document_moe_scan)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="document_moe_scan.$edit && document_moe_scan.fichier && document_moe_scan.date_elaboration >''" ng-click="vm.ajoutDocument_moe_scan(document_moe_scan,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <!--------------------------------------FIN document moe -------------------------------------------->            
                  </md-tabs> 
                </ms-form-wizard>               
              </md-tab-body>
            </md-tab> 

            <!-----------------------FIN MAITRISE DOEUVRE--------------------------------------------->


             <!-----------------------DEBUT ENTREPRISE------------------------------------>
            <md-tab ng-disabled="vm.stepMenu_mpe==false">
              <md-tab-label >
                <span class="ms-form-wizard-step-label">
                    <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepMenu==true">
                      <i class="icon-worker s16"></i>
                    </span-->
                    <span class="ms-form-wizard-step-text">ENTREPRISE</span>
                    <span class="ms-form-wizard-step-number md-accent-bg notification" >4</span>
                </span>
               
              </md-tab-label>
              
              <md-tab-body>
               <ms-form-wizard flex id="sousmenu"> 
                <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">DF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Passation des marchés</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPassation_marches()" style="width:10%;" ng-show="vm.showbuttonNouvPassation">
                                Nouveau
                              </md-button>

                              <md-button type="submit" class="md-raised md-warn" aria-label="Valide" ng-click="vm.validation_passation_marche_mpe()" style="width:10%;" ng-show="vm.showbuttonValidationpassation && vm.permissionboutonvaliderpassation && vm.validation_passation==0">
                                    Validation
                              </md-button>
                          </div>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text" ng-repeat="mem in ::vm.passation_marches_column">
                                  <div class="table-header">
                                    <span class="column-title">{{mem.titre}}</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="passation_marches in vm.allpassation_marches"  ng-class="{selected: passation_marches.$selected}" ng-click="vm.selectionPassation_marches(passation_marches)">           
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_lancement" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_lancement)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_remise" md-placeholder="Date de signature" md-min-date="passation_marches.date_lancement" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_remise)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Nombre offre recu</label>
                                      <input name="nbr_offre_recu" type="text" ng-model="passation_marches.nbr_offre_recu" disabled/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches.$edit">{{passation_marches.nbr_offre_recu}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Montant moins chere</label>
                                      <input name="montant_moin_chere" type="text" ng-model="passation_marches.montant_moin_chere"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches.$edit">{{passation_marches.montant_moin_chere}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_rapport_evaluation" md-placeholder="Date de signature" md-min-date="passation_marches.date_remise" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_rapport_evaluation)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_demande_ano_dpfi" md-placeholder="Date de signature" md-min-date="passation_marches.date_rapport_evaluation" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_demande_ano_dpfi)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_ano_dpfi" md-placeholder="Date de signature" md-min-date="passation_marches.date_demande_ano_dpfi" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>  
                                  </span>
                                            
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_ano_dpfi)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.notification_intention" md-placeholder="Date de notification" md-min-date="passation_marches.date_demande_ano_dpfi" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>  
                                  </span>
                                            
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.notification_intention)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_notification_attribution" md-placeholder="Date de signature" md-min-date="passation_marches.notification_intention" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_notification_attribution)}}</span>
                                </td>

                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-datepicker ng-model="passation_marches.date_os" md-placeholder="Date de signature" md-min-date="passation_marches.date_signature_contrat" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!passation_marches.$edit">{{vm.formatDate(passation_marches.date_os)}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="passation_marches.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Observation</label>
                                      <input name="observation" type="text" ng-model="passation_marches.observation"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!passation_marches.$edit">{{passation_marches.observation}}</span>
                                </td>
                                                             
                                <td>
                                  <a ng-if="!passation_marches.$edit && passation_marches.validation ==0" ng-click="vm.modifierPassation_marches(passation_marches)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!passation_marches.$edit && passation_marches.validation ==0" ng-click="vm.supprimerPassation_marches(passation_marches)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>

                                  <span ng-if="!passation_marches.$edit && passation_marches.validation ==1">Aucune action disponible</span> 
                                            
                                  <a ng-if="passation_marches.$edit" ng-click="vm.annulerPassation_marches(passation_marches)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="passation_marches.$edit && passation_marches.date_lancement && passation_marches.date_remise && passation_marches.montant_moin_chere && passation_marches.date_rapport_evaluation && passation_marches.date_demande_ano_dpfi && passation_marches.date_ano_dpfi && passation_marches.notification_intention && passation_marches.date_notification_attribution && passation_marches.date_os && passation_marches.observation >''" ng-click="vm.ajoutPassation_marches(passation_marches,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>                    
                    <!------------------------------------------------Fin Passation marches-------------------------------------------->

                    <!------------------------------------------------MPE sousmissionnaire-------------------------------------------->
                       <md-tab ng-disabled="!vm.stepsoumissionnaire">
                          <md-tab-label>
                            <span class="ms-form-wizard-step-label">
                                <span class="ms-form-wizard-step-text">mpe soumissionaire</span>
                            </span>
                          </md-tab-label>
                          
                          <md-tab-body>
                            <div style="widht:100%;">  
                                <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterMpe_soumissionaire()" style="width:10%;" ng-if="vm.validation_passation==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                  Nouveau
                                </md-button>
                            </div>
                           <div>        
                            <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                              <thead>
                                <tr>
                                  <th class="secondary-text" ng-repeat="mem in ::vm.mpe_soumissionaire_column">
                                    <div class="table-header">
                                      <span class="column-title">{{mem.titre}}</span>
                                    </div>
                                  </th>
                                </tr>
                              </thead>
                                       
                              <tbody>
                                <tr ng-repeat="mpe_soumissionaire in vm.allmpe_soumissionaire"  ng-class="{selected: mpe_soumissionaire.$selected}" ng-click="vm.selectionMpe_soumissionaire(mpe_soumissionaire)">
                                            
                                  <td>
                                    <span ng-if="mpe_soumissionaire.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Prestataire</label>
                                        <md-select ng-model="mpe_soumissionaire.id_prestataire"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.changePrestataire(mpe_soumissionaire)">
                                          <md-option ng-repeat="prestataire in vm.allprestataire" value="{{prestataire.id}}">
                                                                                {{prestataire.nom}}
                                          </md-option>
                                        </md-select>
                                      </md-input-container>   
                                    </span> 
                                    <span ng-if="!mpe_soumissionaire.$edit">{{mpe_soumissionaire.prestataire.nom}}</span>
                                  </td>          
                                  <td>
                                    <span ng-if="mpe_soumissionaire.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Telephone</label>
                                        <input name="telephone" type="text" ng-model="mpe_soumissionaire.telephone" disabled/>
                                      </md-input-container>   
                                    </span>
                                              
                                    <span ng-if="!mpe_soumissionaire.$edit">{{mpe_soumissionaire.prestataire.telephone}}</span>
                                  </td>
                                            
                                  <td>
                                    <span ng-if="mpe_soumissionaire.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Siège</label>
                                        <input name="siege" type="text" ng-model="mpe_soumissionaire.siege" disabled/>
                                      </md-input-container>   
                                    </span>
                                              
                                    <span ng-if="!mpe_soumissionaire.$edit">{{mpe_soumissionaire.prestataire.siege}}</span>
                                  </td>                       
                                  <td>
                                    <a ng-if="!mpe_soumissionaire.$edit && vm.validation_passation ==0" ng-click="vm.modifierMpe_soumissionaire(mpe_soumissionaire)" title="Modifier">
                                      <span class="icon-table-edit"></span>
                                    </a>
                                              
                                    <a ng-if="!mpe_soumissionaire.$edit  && vm.validation_passation ==0" ng-click="vm.supprimerMpe_soumissionaire(mpe_soumissionaire)" title="Supprimer">
                                      <span class="icon-delete"></span>
                                    </a>
                                    <span ng-if="!mpe_soumissionaire.$edit  && vm.validation_passation ==1">Aucune action disponible</span>          
                                    <a ng-if="mpe_soumissionaire.$edit" ng-click="vm.annulerMpe_soumissionaire(mpe_soumissionaire)" title="Annuler modification">
                                      <span class="icon-cancel"></span>
                                    </a>
                                              
                                    <a ng-if="mpe_soumissionaire.$edit && mpe_soumissionaire.id_prestataire>''" ng-click="vm.ajoutMpe_soumissionaire(mpe_soumissionaire,0)" title="Sauvegarder">
                                      <span class="icon-content-save"></span>
                                    </a>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>

                        </md-tab-body>
                      </md-tab>
                    <!------------------------------------------------MPE sousmissionnaire-------------------------------------------->

                    <!------------------------------------------------Debut contrat mpe----------------------------------------->
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Contrat</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterContrat_prestataire()" style="width:10%;" ng-show="vm.showbuttonNouvcontrat_prestataire">
                                Nouveau
                              </md-button>
                              <md-button type="submit" class="md-raised md-warn" aria-label="Validation" ng-click="vm.valider_contrat_prestataire()" style="width:10%;" ng-show="vm.showbuttonValidationcontrat_prestataire && vm.permissionboutonvalidercontrat_prestataire && vm.validation_contrat_prestataire==0">
                                        Validation
                              </md-button><br>
                          </div>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text" ng-repeat="mem in ::vm.contrat_prestataire_column">
                                  <div class="table-header">
                                    <span class="column-title">{{mem.titre}}</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="contrat_prestataire in vm.allcontrat_prestataire"  ng-class="{selected: contrat_prestataire.$selected}" ng-click="vm.selectionContrat_prestataire(contrat_prestataire)">
                                          
                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Prestataire</label>
                                      <md-select ng-model="contrat_prestataire.id_prestataire"style="overflow: hidden;text-overflow: ellipsis;">
                                        <md-option ng-repeat="prestataire in vm.allprestataire" value="{{prestataire.id}}">
                                                                              {{prestataire.nom}}
                                        </md-option>
                                      </md-select>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.prestataire.nom}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Descriprtion</label>
                                      <input name="description" type="text" ng-model="contrat_prestataire.description"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.description}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Numero contrat</label>
                                      <input name="num_contrat" type="text" ng-model="contrat_prestataire.num_contrat"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.num_contrat}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Cout batiment</label>
                                      <input name="cout_batiment" type="number" ng-model="contrat_prestataire.cout_batiment"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.cout_batiment}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Cout latrine</label>
                                      <input name="cout_latrine" type="number" ng-model="contrat_prestataire.cout_latrine"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.cout_latrine}}</span>
                                </td>
                                          
                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Cout Mobilier</label>
                                      <input name="cout_mobilier" type="number" ng-model="contrat_prestataire.cout_mobilier"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.cout_mobilier}}</span>
                                </td>

                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-datepicker ng-model="contrat_prestataire.date_signature" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!contrat_prestataire.$edit">{{vm.formatDate(contrat_prestataire.date_signature)}}</span>
                                </td>

                                <!--td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-datepicker ng-model="contrat_prestataire.date_prev_deb_trav" md-placeholder="Date prévisionnel travaux" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!contrat_prestataire.$edit">{{vm.formatDate(contrat_prestataire.date_prev_deb_trav)}}</span>
                                </td>

                                <td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-datepicker ng-model="contrat_prestataire.date_reel_deb_trav" md-placeholder="Date réel travaux" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!contrat_prestataire.$edit">{{vm.formatDate(contrat_prestataire.date_reel_deb_trav)}}</span>
                                </td-->

                                          
                                <!--td>
                                  <span ng-if="contrat_prestataire.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Delai éxecution</label>
                                      <input name="delai_execution" type="number" ng-model="contrat_prestataire.delai_execution"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!contrat_prestataire.$edit">{{contrat_prestataire.delai_execution}}</span>
                                </td-->
                                                             
                                <td>
                                  <a ng-if="!contrat_prestataire.$edit && contrat_prestataire.validation==0" ng-click="vm.modifierContrat_prestataire(contrat_prestataire)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!contrat_prestataire.$edit && contrat_prestataire.validation==0" ng-click="vm.supprimerContrat_prestataire(contrat_prestataire)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>
                                  <span ng-if="!contrat_prestataire.$edit && contrat_prestataire.validation==1">Aucune action disponible</span>          
                                  <a ng-if="contrat_prestataire.$edit" ng-click="vm.annulerContrat_prestataire(contrat_prestataire)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="contrat_prestataire.$edit && contrat_prestataire.description && contrat_prestataire.num_contrat && contrat_prestataire.cout_mobilier && contrat_prestataire.cout_latrine && contrat_prestataire.cout_batiment &&  contrat_prestataire.date_signature && contrat_prestataire.id_prestataire>''" ng-click="vm.ajoutContrat_prestataire(contrat_prestataire,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <md-tab ng-disabled = "!vm.stepsuiviexecution">
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Suivi de l'exécution des travaux</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                       <ms-form-wizard flex id="sousmenu"> 
                          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">                    
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <span class="ms-form-wizard-step-text">Delai d'execution</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDelai_travaux()" style="width:10%;" ng-show="vm.showbuttonNouvdelai_travaux">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Validation" ng-click="vm.valider_delai_travaux()" style="width:10%;" ng-show="vm.showbuttonValidationdelai_travaux && vm.permissionboutonvaliderdelai_travaux && vm.validation_delai_travaux==0">
                                                  Validation
                                        </md-button><br>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.delai_travaux_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="delai_travaux in vm.alldelai_travaux"  ng-class="{selected: delai_travaux.$selected}" ng-click="vm.selectionDelai_travaux(delai_travaux)">      
                                          <td>
                                            <span ng-if="delai_travaux.$edit">
                                              <md-datepicker ng-model="delai_travaux.date_prev_debu_travau" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!delai_travaux.$edit">{{vm.formatDate(delai_travaux.date_prev_debu_travau)}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="delai_travaux.$edit">
                                              <md-datepicker ng-model="delai_travaux.date_reel_debu_travau" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!delai_travaux.$edit">{{vm.formatDate(delai_travaux.date_reel_debu_travau)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="delai_travaux.$edit">
                                              <md-datepicker ng-model="delai_travaux.date_expiration_police" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!delai_travaux.$edit">{{vm.formatDate(delai_travaux.date_expiration_police)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="delai_travaux.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Delai éxecution</label>
                                                <input name="delai_execution" type="number" ng-model="delai_travaux.delai_execution"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!delai_travaux.$edit">{{delai_travaux.delai_execution}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!delai_travaux.$edit && delai_travaux.validation==0" ng-click="vm.modifierDelai_travaux(delai_travaux)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!delai_travaux.$edit && delai_travaux.validation==0" ng-click="vm.supprimerDelai_travaux(delai_travaux)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            <span ng-if="!delai_travaux.$edit && delai_travaux.validation==1">Aucune action disponible</span>          
                                            <a ng-if="delai_travaux.$edit" ng-click="vm.annulerDelai_travaux(delai_travaux)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="delai_travaux.$edit && delai_travaux.date_prev_debu_travau && delai_travaux.date_expiration_police && delai_travaux.date_reel_debu_travau && delai_travaux.delai_execution>''" ng-click="vm.ajoutDelai_travaux(delai_travaux,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>          
                              <md-tab ng-disabled = "!vm.stepphase">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">DF</span>
                                      <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                                        <i class="icon-check s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Phase sous projet</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPhase_sous_projet()" style="width:10%;" ng-show="vm.showbuttonNouvPhase_sous_projet">
                                          Nouveau
                                        </md-button>

                                        <md-button type="submit" class="md-raised md-warn" aria-label="Valide" ng-click="vm.valider_phase_sous_projet()" style="width:10%;" ng-show="vm.showbuttonValidationphase_sous_projet && vm.permissionboutonvaliderphase_sous_projet && vm.validation_phase_sous_projet==0">
                                              Validation
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.phase_sous_projet_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="phase_sous_projet in vm.allphase_sous_projet"  ng-class="{selected: phase_sous_projet.$selected}" ng-click="vm.selectionPhase_sous_projet(phase_sous_projet)">           
                                          <td>
                                            <span ng-if="phase_sous_projet.$edit">
                                              <md-input-container style="width:100%;">
                                                <label>Phase sous projet</label>
                                                <md-select ng-model="phase_sous_projet.id_etape_sousprojet"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.change_etape(phase_sous_projet)">
                                                  <md-option ng-repeat="etape_sousprojet in vm.allcurentetape_sousprojet" value="{{etape_sousprojet.id}}">
                                                                                        {{etape_sousprojet.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!phase_sous_projet.$edit">{{phase_sous_projet.etape_sousprojet.libelle}}</span>
                                          </td>
                                                    
                                          <td>
                                                      
                                            <span>{{phase_sous_projet.etape_sousprojet.description}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="phase_sous_projet.$edit">
                                              <md-datepicker ng-model="phase_sous_projet.date_travaux" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!phase_sous_projet.$edit">{{vm.formatDate(phase_sous_projet.date_travaux)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!phase_sous_projet.$edit && phase_sous_projet.validation ==0" ng-click="vm.modifierPhase_sous_projet(phase_sous_projet)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!phase_sous_projet.$edit && phase_sous_projet.validation ==0" ng-click="vm.supprimerPhase_sous_projet(phase_sous_projet)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>

                                            <span ng-if="!phase_sous_projet.$edit && phase_sous_projet.validation ==1">Aucune action disponible</span> 
                                                      
                                            <a ng-if="phase_sous_projet.$edit" ng-click="vm.annulerPhase_sous_projet(phase_sous_projet)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="phase_sous_projet.$edit && phase_sous_projet.id_etape_sousprojet>''" ng-click="vm.ajoutPhase_sous_projet(phase_sous_projet,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                              <md-tab>
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <!--pan class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">R</span>
                                        <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                                          <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">reception_mpe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterReception_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvReception_mpe">
                                          Nouveau
                                        </md-button>                    
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Valider" ng-click="vm.valider_reception()" style="width:10%;" ng-show="vm.showbuttonValidationreception_mpe && vm.permissionboutonvaliderreception_mpe && vm.validation_reception_mpe==0">
                                        Valider
                                      </md-button>
                                    </div>
                                      <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text" ng-repeat="mem in ::vm.reception_mpe_column">
                                              <div class="table-header">
                                                <span class="column-title">{{mem.titre}}</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="reception_mpe in vm.allreception_mpe"  ng-class="{selected: reception_mpe.$selected}" ng-click="vm.selectionReception_mpe(reception_mpe)">  
                                           
                                            <td>
                                              <span ng-if="reception_mpe.$edit">
                                                <md-datepicker ng-model="reception_mpe.date_previ_recep_tech" md-placeholder="Date de signature" md-max-date="vm.datenow" required>                       
                                                </md-datepicker>
                                              </span>                          
                                              <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_previ_recep_tech)}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="reception_mpe.$edit">
                                                <md-datepicker ng-model="reception_mpe.date_reel_tech" md-placeholder="Date de signature" md-min-date="reception_mpe.date_previ_recep_tech" md-max-date="vm.datenow" required>                       
                                                </md-datepicker>   
                                              </span>
                                                        
                                              <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_reel_tech)}}</span>
                                            </td>

                                            <td>
                                              <span ng-if="reception_mpe.$edit">
                                                <md-datepicker ng-model="reception_mpe.date_leve_recep_tech" md-placeholder="Date de signature" md-min-date="reception_mpe.date_previ_recep_tech" md-max-date="vm.datenow" required>                       
                                                </md-datepicker>   
                                              </span>
                                                        
                                              <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_leve_recep_tech)}}</span>
                                            </td>
                                            <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-datepicker ng-model="reception_mpe.date_previ_recep_prov" md-placeholder="Date de signature" md-min-date="reception_mpe.date_reel_tech" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_previ_recep_prov)}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-datepicker ng-model="reception_mpe.date_reel_recep_prov" md-placeholder="Date de signature" md-min-date="reception_mpe.date_previ_recep_prov" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_reel_recep_prov)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-datepicker ng-model="reception_mpe.date_previ_leve" md-placeholder="Date de signature" md-min-date="reception_mpe.date_reel_recep_prov" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>  
                                            </span>
                                                      
                                            <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_previ_leve)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-datepicker ng-model="reception_mpe.date_reel_lev_ava_rd" md-placeholder="Date de signature" md-min-date="reception_mpe.date_reel_recep_prov" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>  
                                            </span>
                                                      
                                            <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_reel_lev_ava_rd)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-datepicker ng-model="reception_mpe.date_previ_recep_defi" md-placeholder="Date de notification" md-min-date="reception_mpe.date_reel_recep_prov" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>  
                                            </span>
                                                      
                                            <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_previ_recep_defi)}}</span>
                                          </td>
                                          <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-datepicker ng-model="reception_mpe.date_reel_recep_defi" md-placeholder="Date de signature" md-min-date="reception_mpe.date_previ_recep_defi" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!reception_mpe.$edit">{{vm.formatDate(reception_mpe.date_reel_recep_defi)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="reception_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Observation</label>
                                                <input name="observation" type="text" ng-model="reception_mpe.observation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!reception_mpe.$edit">{{reception_mpe.observation}}</span>
                                          </td>
                                          <td>
                                            <a ng-if="!reception_mpe.$edit && reception_mpe.validation ==0" ng-click="vm.modifierReception_mpe(reception_mpe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!reception_mpe.$edit && reception_mpe.validation ==0" ng-click="vm.supprimerReception_mpe(reception_mpe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                              <span ng-if="!reception_mpe.$edit && reception_mpe.validation ==1">Aucune action disponible</span>         
                                            <a ng-if="reception_mpe.$edit" ng-click="vm.annulerReception_mpe(reception_mpe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="reception_mpe.$edit && reception_mpe.date_previ_recep_tech && reception_mpe.date_reel_tech && reception_mpe.date_leve_recep_tech && reception_mpe.date_previ_recep_prov && reception_mpe.date_reel_recep_prov && reception_mpe.date_previ_leve && reception_mpe.date_reel_lev_ava_rd && reception_mpe.date_previ_recep_defi && reception_mpe.date_reel_recep_defi && reception_mpe.observation >''" type="submit" class="md-raised md-accent>''" ng-click="vm.ajoutReception_mpe(reception_mpe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>                       
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>
                                </md-tab-body>
                              </md-tab>
                  <!---------------------------------------------Debut avancement_batiment -------------------------------------------->
                              <md-tab>
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                          <!--span class="ms-form-wizard-step-number md-accent-bg">
                                            <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Avancement batiment</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvancement_batiment()" style="width:10%;" ng-show="vm.showbuttonNouvAvancement_batiment">
                                          Nouveau
                                        </md-button>                     
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Valider" ng-click="vm.valider_avancement_batiment()" style="width:10%;" ng-show="vm.showbuttonValidationavancement_batiment && vm.permissionboutonvalideravancement_batiment && vm.validation_avancement_batiment==0">
                                        Valider
                                      </md-button>
                                      <span>{{vm.permissionboutonvalideravancement_batiment}}1</span>
                                      <span>{{vm.showbuttonValidationavancement_batiment}}2</span>
                                      <span>{{vm.validation_avancement_batiment}}3</span>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.avancement_batiment_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="avancement_batiment in vm.allavancement_batiment"  ng-class="{selected: avancement_batiment.$selected}" ng-click="vm.selectionAvancement_batiment(avancement_batiment)">
                                                                           
                                          <td>
                                            <span ng-if="avancement_batiment.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Intitule</label>
                                                <input name="intitule" type="text" ng-model="avancement_batiment.intitule"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_batiment.$edit">{{avancement_batiment.intitule}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="avancement_batiment.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Descriprtion</label>
                                                <input name="description" type="text" ng-model="avancement_batiment.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_batiment.$edit">{{avancement_batiment.description}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="avancement_batiment.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Attachement</label>
                                                <md-select ng-model="avancement_batiment.id_attachement_batiment"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.changeAttachement_batiment(avancement_batiment)">
                                                  <md-option ng-repeat="attachement_batiment in vm.allcurrentattachement_batiment" value="{{attachement_batiment.id}}">
                                                          {{attachement_batiment.ponderation_batiment}}%  {{attachement_batiment.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_batiment.$edit">{{avancement_batiment.attachement_batiment.ponderation_batiment}}% {{avancement_batiment.attachement_batiment.libelle}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="avancement_batiment.$edit">
                                              <md-datepicker ng-model="avancement_batiment.date" md-placeholder="Date" md-max-date="vm.date_now" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!avancement_batiment.$edit">{{vm.formatDate(avancement_batiment.date)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="avancement_batiment.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Observation</label>
                                                <input name="cout_batiment" type="text" ng-model="avancement_batiment.observation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_batiment.$edit">{{avancement_batiment.observation}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!avancement_batiment.$edit && avancement_batiment.validation==0" ng-click="vm.modifierAvancement_batiment(avancement_batiment)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!avancement_batiment.$edit && avancement_batiment.validation==0" ng-click="vm.supprimerAvancement_batiment(avancement_batiment)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            <span ng-if="!avancement_batiment.$edit && avancement_batiment.validation==1">Aucune action disponible</span>
          
                                            <a ng-if="avancement_batiment.$edit" ng-click="vm.annulerAvancement_batiment(avancement_batiment)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="avancement_batiment.$edit && avancement_batiment.description && avancement_batiment.intitule && avancement_batiment.id_attachement_batiment && avancement_batiment.date>''" ng-click="vm.ajoutAvancement_batiment(avancement_batiment,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                  <!------------------------------------------FIN avancement_batiment ------------------------------------------------->
                  <!---------------------------------------------Debut avancement_batiment -------------------------------------------->
                              <md-tab>
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                          <!--span class="ms-form-wizard-step-number md-accent-bg">
                                            <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Avancement latrine</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvancement_latrine()" style="width:10%;" ng-show="vm.showbuttonNouvAvancement_latrine">
                                          Nouveau
                                        </md-button>                     
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Valider" ng-click="vm.valider_avancement_latrine()" style="width:10%;" ng-show="vm.showbuttonValidationavancement_latrine && vm.permissionboutonvalideravancement_latrine && vm.validation_avancement_latrine==0">
                                        Valider
                                      </md-button>
                                      <span>{{vm.permissionboutonvalideravancement_latrine}}1</span>
                                      <span>{{vm.showbuttonValidationavancement_latrine}}2</span>
                                      <span>{{vm.validation_avancement_latrine}}3</span>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.avancement_latrine_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="avancement_latrine in vm.allavancement_latrine"  ng-class="{selected: avancement_latrine.$selected}" ng-click="vm.selectionAvancement_latrine(avancement_latrine)">
                                                                           
                                          <td>
                                            <span ng-if="avancement_latrine.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Intitule</label>
                                                <input name="intitule" type="text" ng-model="avancement_latrine.intitule"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_latrine.$edit">{{avancement_latrine.intitule}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="avancement_latrine.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Descriprtion</label>
                                                <input name="description" type="text" ng-model="avancement_latrine.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_latrine.$edit">{{avancement_latrine.description}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="avancement_latrine.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Attachement</label>
                                                <md-select ng-model="avancement_latrine.id_attachement_latrine"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.changeAttachement_latrine(avancement_latrine)">
                                                  <md-option ng-repeat="attachement_latrine in vm.allcurrentattachement_latrine" value="{{attachement_latrine.id}}">
                                                          {{attachement_latrine.ponderation_latrine}}%  {{attachement_latrine.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_latrine.$edit">{{avancement_latrine.attachement_latrine.ponderation_latrine}}% {{avancement_latrine.attachement_latrine.libelle}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="avancement_latrine.$edit">
                                              <md-datepicker ng-model="avancement_latrine.date" md-placeholder="Date" md-max-date="vm.date_now" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!avancement_latrine.$edit">{{vm.formatDate(avancement_latrine.date)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="avancement_latrine.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Observation</label>
                                                <input name="cout_latrine" type="text" ng-model="avancement_latrine.observation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_latrine.$edit">{{avancement_latrine.observation}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!avancement_latrine.$edit && avancement_latrine.validation==0" ng-click="vm.modifierAvancement_latrine(avancement_latrine)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!avancement_latrine.$edit && avancement_latrine.validation==0" ng-click="vm.supprimerAvancement_latrine(avancement_latrine)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            <span ng-if="!avancement_latrine.$edit && avancement_latrine.validation==1">Aucune action disponible</span>
          
                                            <a ng-if="avancement_latrine.$edit" ng-click="vm.annulerAvancement_latrine(avancement_latrine)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="avancement_latrine.$edit && avancement_latrine.description && avancement_latrine.intitule && avancement_latrine.id_attachement_latrine && avancement_latrine.date>''" ng-click="vm.ajoutAvancement_latrine(avancement_latrine,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                  <!------------------------------------------FIN avancement_latrine ------------------------------------------------->
                  <!---------------------------------------------Debut avancement_mobilier -------------------------------------------->
                              <md-tab ng-disabled="vm.stepTwo==false">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                          <!--span class="ms-form-wizard-step-number md-accent-bg">
                                            <i class="icon-check s16"></i>
                                        </span-->
                                        <span class="ms-form-wizard-step-text">Avancement mobilier</span>
                                    </span>
                                  </md-tab-label>
                                  
                                  <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvancement_mobilier()" style="width:10%;" ng-show="vm.showbuttonNouvAvancement_mobilier">
                                          Nouveau
                                        </md-button>                     
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Valider" ng-click="vm.valider_avancement_mobilier()" style="width:10%;" ng-show="vm.showbuttonValidationavancement_mobilier && vm.permissionboutonvalideravancement_mobilier && vm.validation_avancement_mobilier==0">
                                        Valider
                                      </md-button>
                                      <span>{{vm.permissionboutonvalideravancement_mobilier}}1</span>
                                      <span>{{vm.showbuttonValidationavancement_mobilier}}2</span>
                                      <span>{{vm.validation_avancement_mobilier}}3</span>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.avancement_mobilier_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="avancement_mobilier in vm.allavancement_mobilier"  ng-class="{selected: avancement_mobilier.$selected}" ng-click="vm.selectionAvancement_mobilier(avancement_mobilier)">
                                                                           
                                          <td>
                                            <span ng-if="avancement_mobilier.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Intitule</label>
                                                <input name="intitule" type="text" ng-model="avancement_mobilier.intitule"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_mobilier.$edit">{{avancement_mobilier.intitule}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="avancement_mobilier.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Descriprtion</label>
                                                <input name="description" type="text" ng-model="avancement_mobilier.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_mobilier.$edit">{{avancement_mobilier.description}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="avancement_mobilier.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Attachement</label>
                                                <md-select ng-model="avancement_mobilier.id_attachement_mobilier"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.changeAttachement_mobilier(avancement_mobilier)">
                                                  <md-option ng-repeat="attachement_mobilier in vm.allcurrentattachement_mobilier" value="{{attachement_mobilier.id}}">
                                                          {{attachement_mobilier.ponderation_mobilier}}%  {{attachement_mobilier.libelle}}
                                                  </md-option>
                                                </md-select>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_mobilier.$edit">{{avancement_mobilier.attachement_mobilier.ponderation_mobilier}}% {{avancement_mobilier.attachement_mobilier.libelle}}</span>
                                          </td>

                                          <td>
                                            <span ng-if="avancement_mobilier.$edit">
                                              <md-datepicker ng-model="avancement_mobilier.date" md-placeholder="Date" md-max-date="vm.date_now" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!avancement_mobilier.$edit">{{vm.formatDate(avancement_mobilier.date)}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="avancement_mobilier.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Observation</label>
                                                <input name="cout_mobilier" type="text" ng-model="avancement_mobilier.observation"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!avancement_mobilier.$edit">{{avancement_mobilier.observation}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!avancement_mobilier.$edit && avancement_mobilier.validation==0" ng-click="vm.modifierAvancement_mobilier(avancement_mobilier)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!avancement_mobilier.$edit && avancement_mobilier.validation==0" ng-click="vm.supprimerAvancement_mobilier(avancement_mobilier)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            <span ng-if="!avancement_mobilier.$edit && avancement_mobilier.validation==1">Aucune action disponible</span>
          
                                            <a ng-if="avancement_mobilier.$edit" ng-click="vm.annulerAvancement_mobilier(avancement_mobilier)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="avancement_mobilier.$edit && avancement_mobilier.description && avancement_mobilier.intitule && avancement_mobilier.id_attachement_mobilier && avancement_mobilier.date>''" ng-click="vm.ajoutAvancement_mobilier(avancement_mobilier,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                  <!------------------------------------------FIN avancement_mobilier ------------------------------------------------->            
                            </md-tabs> 
                          </ms-form-wizard>               
                        </md-tab-body>
                    </md-tab>
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==false">FF</span>
                            <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepOne==true">
                              <i class="icon-check s16"></i>
                            </span-->
                            <span class="ms-form-wizard-step-text">Suivi de paiement des travaux</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                        <!---------------------------------FILS PRESTATION----------------------------------------------->       
                         <ms-form-wizard flex id="soussousmenu"> 
                          <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">

                            <!-----------------------------DEBUT demande batiment mpe------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Batiment</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_batiment_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_batiment_mpe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_mpe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_batiment_mpe_creer  && vm.permissionboutonvaliderDemande_batiment_mpe_creer &&  vm.validation_demande_batiment_mpe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_mpe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_batiment_mpe_encourdpfi  && vm.permissionboutonvaliderDemande_batiment_mpe_encourdpfi &&  vm.validation_demande_batiment_mpe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_mpe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_batiment_mpe_rejedpfi  && vm.permissionboutonvaliderDemande_batiment_mpe_rejedpfi &&  vm.validation_demande_batiment_mpe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_batiment_mpe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_batiment_mpe_validedpfi  && vm.permissionboutonvaliderDemande_batiment_mpe_validedpfi &&  vm.validation_demande_batiment_mpe ==2">
                                          Valider
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_batiment_mpe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_batiment_mpe in vm.alldemande_batiment_mpe"  ng-class="{selected: demande_batiment_mpe.$selected}" ng-click="vm.selectionDemande_batiment_mpe(demande_batiment_mpe)">
                                                   
                                          <td>
                                            <span ng-if="demande_batiment_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_batiment_mpe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_batiment_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_batiment_mpe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_batiment_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence facture</label>
                                                <input name="ref_facture" type="text" ng-model="demande_batiment_mpe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_batiment_mpe.id_tranche_demande_mpe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_batiment_mpe(demande_batiment_mpe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_demande_batiment_mpe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_batiment_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_batiment_mpe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_batiment_mpe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_batiment_mpe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_batiment_mpe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_batiment_mpe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_batiment_mpe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_batiment_mpe.$edit">{{demande_batiment_mpe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_batiment_mpe.$edit">
                                              <md-datepicker ng-model="demande_batiment_mpe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_batiment_mpe.$edit">{{vm.formatDate(demande_batiment_mpe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_batiment_mpe.$edit && demande_batiment_mpe.validation==0" ng-click="vm.modifierDemande_batiment_mpe(demande_batiment_mpe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_batiment_mpe.$edit  && demande_batiment_mpe.validation==0" ng-click="vm.supprimerDemande_batiment_mpe(demande_batiment_mpe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_batiment_mpe.$edit  && demande_batiment_mpe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_batiment_mpe.$edit" ng-click="vm.annulerDemande_batiment_mpe(demande_batiment_mpe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_batiment_mpe.$edit && demande_batiment_mpe.objet && demande_batiment_mpe.description && demande_batiment_mpe.montant && demande_batiment_mpe.date  && demande_batiment_mpe.ref_facture && demande_batiment_mpe.id_tranche_demande_mpe && demande_batiment_mpe.cumul && demande_batiment_mpe.reste>''" ng-click="vm.ajoutDemande_batiment_mpe(demande_batiment_mpe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande batiment mpe--------------------------------------->

                        <!----------------------------------Debut justificatif batiment mpe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_bat_mpe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_batiment_mpe()" style="width:10%;" ng-show="vm.validation_demande_batiment_mpe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_batiment_mpe in vm.alljustificatif_batiment_pre"  ng-class="{selected: justificatif_batiment_mpe.$selected}" ng-click="vm.selectionJustificatif_batiment_mpe(justificatif_batiment_mpe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_batiment_mpe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_batiment_mpe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_batiment_mpe.$edit">{{justificatif_batiment_mpe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_batiment_mpe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_batiment_mpe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_batiment_mpe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFilebatiment_mpe"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_batiment_mpe.$edit">{{justificatif_batiment_mpe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_batiment_mpe.$edit && vm.validation_demande_batiment_mpe ==0" ng-click="vm.modifierJustificatif_batiment_mpe(justificatif_batiment_mpe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_batiment_mpe.$edit && vm.validation_demande_batiment_mpe ==0" ng-click="vm.supprimerJustificatif_batiment_mpe(justificatif_batiment_mpe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_batiment_mpe.$edit" ng-click="vm.download_piece(justificatif_batiment_mpe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_batiment_mpe.$edit" ng-click="vm.annulerJustificatif_batiment_mpe(justificatif_batiment_mpe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_batiment_mpe.$edit && justificatif_batiment_mpe.description && justificatif_batiment_mpe.fichier>''" ng-click="vm.ajoutJustificatif_batiment_mpe(justificatif_batiment_mpe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif batiment mpe-------------------------------->


                        <!---------------------------------DEBUT paiement batiment mpe------------------------------------>
                              <md-tab ng-disabled="!vm.stepjusti_bat_mpe || vm.validation_demande_batiment_mpe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_batiment_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_batiment_mpe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_batiment_mpe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_batiment_mpe && vm.permissionboutonvaliderPaiement_batiment_mpe && vm.validation_paiement_batiment_mpe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_batiment_mpe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_batiment_mpe in vm.allpaiement_batiment_mpe"  ng-class="{selected: paiement_batiment_mpe.$selected}" ng-click="vm.selectionPaiement_batiment_mpe(paiement_batiment_mpe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_batiment_mpe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_batiment_mpe.$edit">{{paiement_batiment_mpe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_batiment_mpe.$edit">
                                            <md-datepicker ng-model="paiement_batiment_mpe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_batiment_mpe.$edit">{{vm.formatDate(paiement_batiment_mpe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_batiment_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_batiment_mpe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_batiment_mpe.$edit">{{paiement_batiment_mpe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_batiment_mpe.$edit && paiement_batiment_mpe.validation ==0" ng-click="vm.modifierPaiement_batiment_mpe(paiement_batiment_mpe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_batiment_mpe.$edit && paiement_batiment_mpe.validation ==0" ng-click="vm.supprimerPaiement_batiment_mpe(paiement_batiment_mpe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_batiment_mpe.$edit && paiement_batiment_mpe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_batiment_mpe.$edit" ng-click="vm.annulerPaiement_batiment_mpe(paiement_batiment_mpe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_batiment_mpe.$edit && paiement_batiment_mpe.montant_paiement && paiement_batiment_mpe.date_paiement >''" ng-click="vm.ajoutPaiement_batiment_mpe(paiement_batiment_mpe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              
                              </md-tab-body>
                            </md-tab>

                       <!---------------------------------FIN paiement batiment mpe------------------------------------>

                       <!-----------------------------DEBUT demande latrine mpe------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Latrine</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_latrine_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_latrine_mpe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_mpe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_latrine_mpe_creer  && vm.permissionboutonvaliderDemande_latrine_mpe_creer &&  vm.validation_demande_latrine_mpe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_mpe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_latrine_mpe_encourdpfi  && vm.permissionboutonvaliderDemande_latrine_mpe_encourdpfi &&  vm.validation_demande_latrine_mpe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_mpe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_latrine_mpe_rejedpfi  && vm.permissionboutonvaliderDemande_latrine_mpe_rejedpfi &&  vm.validation_demande_latrine_mpe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_latrine_mpe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_latrine_mpe_validedpfi  && vm.permissionboutonvaliderDemande_latrine_mpe_validedpfi &&  vm.validation_demande_latrine_mpe ==2">
                                          Valider
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_latrine_mpe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_latrine_mpe in vm.alldemande_latrine_mpe"  ng-class="{selected: demande_latrine_mpe.$selected}" ng-click="vm.selectionDemande_latrine_mpe(demande_latrine_mpe)">
                                                   
                                          <td>
                                            <span ng-if="demande_latrine_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_latrine_mpe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_latrine_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_latrine_mpe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_latrine_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence facture</label>
                                                <input name="ref_facture" type="text" ng-model="demande_latrine_mpe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_latrine_mpe.id_tranche_demande_mpe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_latrine_mpe(demande_latrine_mpe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_demande_latrine_mpe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_latrine_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_latrine_mpe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_latrine_mpe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_latrine_mpe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_latrine_mpe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_latrine_mpe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_latrine_mpe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_latrine_mpe.$edit">{{demande_latrine_mpe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_latrine_mpe.$edit">
                                              <md-datepicker ng-model="demande_latrine_mpe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_latrine_mpe.$edit">{{vm.formatDate(demande_latrine_mpe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_latrine_mpe.$edit && demande_latrine_mpe.validation==0" ng-click="vm.modifierDemande_latrine_mpe(demande_latrine_mpe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_latrine_mpe.$edit  && demande_latrine_mpe.validation==0" ng-click="vm.supprimerDemande_latrine_mpe(demande_latrine_mpe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_latrine_mpe.$edit  && demande_latrine_mpe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_latrine_mpe.$edit" ng-click="vm.annulerDemande_latrine_mpe(demande_latrine_mpe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_latrine_mpe.$edit && demande_latrine_mpe.objet && demande_latrine_mpe.description && demande_latrine_mpe.montant && demande_latrine_mpe.date  && demande_latrine_mpe.ref_facture && demande_latrine_mpe.id_tranche_demande_mpe && demande_latrine_mpe.cumul && demande_latrine_mpe.reste>''" ng-click="vm.ajoutDemande_latrine_mpe(demande_latrine_mpe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande latrine mpe--------------------------------------->

                        <!----------------------------------Debut justificatif latrine mpe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_bat_mpe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_latrine_mpe()" style="width:10%;" ng-show="vm.validation_demande_latrine_mpe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_latrine_mpe in vm.alljustificatif_latrine_pre"  ng-class="{selected: justificatif_latrine_mpe.$selected}" ng-click="vm.selectionJustificatif_latrine_mpe(justificatif_latrine_mpe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_latrine_mpe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_latrine_mpe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_latrine_mpe.$edit">{{justificatif_latrine_mpe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_latrine_mpe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_latrine_mpe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_latrine_mpe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFilelatrine_mpe"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_latrine_mpe.$edit">{{justificatif_latrine_mpe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_latrine_mpe.$edit && vm.validation_demande_latrine_mpe ==0" ng-click="vm.modifierJustificatif_latrine_mpe(justificatif_latrine_mpe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_latrine_mpe.$edit && vm.validation_demande_latrine_mpe ==0" ng-click="vm.supprimerJustificatif_latrine_mpe(justificatif_latrine_mpe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_latrine_mpe.$edit" ng-click="vm.download_piece(justificatif_latrine_mpe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_latrine_mpe.$edit" ng-click="vm.annulerJustificatif_latrine_mpe(justificatif_latrine_mpe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_latrine_mpe.$edit && justificatif_latrine_mpe.description && justificatif_latrine_mpe.fichier>''" ng-click="vm.ajoutJustificatif_latrine_mpe(justificatif_latrine_mpe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif latrine mpe-------------------------------->


                        <!---------------------------------DEBUT paiement latrine mpe------------------------------------>
                              <md-tab ng-disabled="!vm.stepjusti_bat_mpe || vm.validation_demande_latrine_mpe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_latrine_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_latrine_mpe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_latrine_mpe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_latrine_mpe && vm.permissionboutonvaliderPaiement_latrine_mpe && vm.validation_paiement_latrine_mpe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_latrine_mpe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_latrine_mpe in vm.allpaiement_latrine_mpe"  ng-class="{selected: paiement_latrine_mpe.$selected}" ng-click="vm.selectionPaiement_latrine_mpe(paiement_latrine_mpe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_latrine_mpe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_latrine_mpe.$edit">{{paiement_latrine_mpe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_latrine_mpe.$edit">
                                            <md-datepicker ng-model="paiement_latrine_mpe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_latrine_mpe.$edit">{{vm.formatDate(paiement_latrine_mpe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_latrine_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_latrine_mpe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_latrine_mpe.$edit">{{paiement_latrine_mpe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_latrine_mpe.$edit && paiement_latrine_mpe.validation ==0" ng-click="vm.modifierPaiement_latrine_mpe(paiement_latrine_mpe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_latrine_mpe.$edit && paiement_latrine_mpe.validation ==0" ng-click="vm.supprimerPaiement_latrine_mpe(paiement_latrine_mpe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_latrine_mpe.$edit && paiement_latrine_mpe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_latrine_mpe.$edit" ng-click="vm.annulerPaiement_latrine_mpe(paiement_latrine_mpe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_latrine_mpe.$edit && paiement_latrine_mpe.montant_paiement && paiement_latrine_mpe.date_paiement >''" ng-click="vm.ajoutPaiement_latrine_mpe(paiement_latrine_mpe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              
                              </md-tab-body>
                            </md-tab>
                            <!-----------------------------DEBUT demande latrine mpe------------------------------> 
                            <!-----------------------------DEBUT demande mobilier mpe------------------------------> 
                              <md-tab>
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-basket-fill s16"></i>
                                      </span-->                          
                                      
                                      <span class="ms-form-wizard-step-text">Mobilier</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                    <div style="widht:100%;">  
                                        <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDemande_mobilier_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvDemande_mobilier_mpe_creer">
                                          Nouveau
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_mobilier_mpe_creer()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_mobilier_mpe_creer  && vm.permissionboutonvaliderDemande_mobilier_mpe_creer &&  vm.validation_demande_mobilier_mpe ==0">
                                          Validation
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_mobilier_mpe_encourdpfi()" style="width:14%;" ng-show="vm.showbuttonValidationDemande_mobilier_mpe_encourdpfi  && vm.permissionboutonvaliderDemande_mobilier_mpe_encourdpfi &&  vm.validation_demande_mobilier_mpe ==1">
                                          Mettre en-cours
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_mobilier_mpe_rejedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_mobilier_mpe_rejedpfi  && vm.permissionboutonvaliderDemande_mobilier_mpe_rejedpfi &&  vm.validation_demande_mobilier_mpe ==2">
                                          Rejeter
                                        </md-button>
                                        <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDemande_mobilier_mpe_validedpfi()" style="width:10%;" ng-show="vm.showbuttonValidationDemande_mobilier_mpe_validedpfi  && vm.permissionboutonvaliderDemande_mobilier_mpe_validedpfi &&  vm.validation_demande_mobilier_mpe ==2">
                                          Valider
                                        </md-button>
                                    </div>
                                   <div>        
                                    <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                      <thead>
                                        <tr>
                                          <th class="secondary-text" ng-repeat="mem in ::vm.demande_mobilier_mpe_column">
                                            <div class="table-header">
                                              <span class="column-title">{{mem.titre}}</span>
                                            </div>
                                          </th>
                                        </tr>
                                      </thead>
                                               
                                      <tbody>
                                        <tr ng-repeat="demande_mobilier_mpe in vm.alldemande_mobilier_mpe"  ng-class="{selected: demande_mobilier_mpe.$selected}" ng-click="vm.selectionDemande_mobilier_mpe(demande_mobilier_mpe)">
                                                   
                                          <td>
                                            <span ng-if="demande_mobilier_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Objet</label>
                                                <input name="objet" type="text" ng-model="demande_mobilier_mpe.objet"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.objet}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_mobilier_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Description</label>
                                                <input name="description" type="text" ng-model="demande_mobilier_mpe.description"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.description}}</span>
                                          </td>
                                                    
                                          <td>
                                            <span ng-if="demande_mobilier_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Référence facture</label>
                                                <input name="ref_facture" type="text" ng-model="demande_mobilier_mpe.ref_facture"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.ref_facture}}</span>
                                          </td>                      

                                        <td>
                                          <span ng-if="demande_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Tranche</label>
                                              <md-select ng-model="demande_mobilier_mpe.id_tranche_demande_mpe"style="overflow: hidden;text-overflow: ellipsis;" ng-change="vm.tranchechange_mobilier_mpe(demande_mobilier_mpe)">
                                                <md-option ng-repeat="tranche in vm.allcurenttranche_demande_mobilier_mpe" value="{{tranche.id}}">
                                                                                            {{tranche.libelle}}
                                                </md-option>
                                              </md-select>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.tranche.libelle}}</span>
                                        </td>
                                                    
                                          <td>
                                            <span ng-if="demande_mobilier_mpe.$edit">
                                              <md-input-container style="width:100%;display: flex !important;">
                                                <label>Montant</label>
                                                <input name="montant" type="number" ng-model="demande_mobilier_mpe.montant"/>
                                              </md-input-container>   
                                            </span>
                                                      
                                            <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.montant}}</span>
                                          </td>

                                        <td>
                                          <span ng-if="demande_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Cumul</label>
                                              <input name="cumul" type="text" ng-model="demande_mobilier_mpe.cumul" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.cumul}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Anterieur</label>
                                              <input name="anterieur" type="text" ng-model="demande_mobilier_mpe.anterieur" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.anterieur}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Periode</label>
                                              <input name="periode" type="text" ng-model="demande_mobilier_mpe.periode"disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.tranche.periode}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Pourcentage</label>
                                              <input name="pourcentage" type="text" ng-model="demande_mobilier_mpe.pourcentage" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.tranche.pourcentage}}</span>
                                        </td>

                                        <td>
                                          <span ng-if="demande_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Reste</label>
                                              <input name="reste" type="text" ng-model="demande_mobilier_mpe.reste" disabled/>
                                            </md-input-container>  
                                          </span>
                                          <span ng-if="!demande_mobilier_mpe.$edit">{{demande_mobilier_mpe.reste}}</span>
                                        </td>

                                           <td>
                                            <span ng-if="demande_mobilier_mpe.$edit">
                                              <md-datepicker ng-model="demande_mobilier_mpe.date" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                              </md-datepicker>
                                            </span>                          
                                            <span ng-if="!demande_mobilier_mpe.$edit">{{vm.formatDate(demande_mobilier_mpe.date)}}</span>
                                          </td>
                                                                       
                                          <td>
                                            <a ng-if="!demande_mobilier_mpe.$edit && demande_mobilier_mpe.validation==0" ng-click="vm.modifierDemande_mobilier_mpe(demande_mobilier_mpe)" title="Modifier">
                                              <span class="icon-table-edit"></span>
                                            </a>
                                                      
                                            <a ng-if="!demande_mobilier_mpe.$edit  && demande_mobilier_mpe.validation==0" ng-click="vm.supprimerDemande_mobilier_mpe(demande_mobilier_mpe)" title="Supprimer">
                                              <span class="icon-delete"></span>
                                            </a>
                                            
                                            <span ng-if="!demande_mobilier_mpe.$edit  && demande_mobilier_mpe.validation!=0">Aucune action disponible</span>
                                                      
                                            <a ng-if="demande_mobilier_mpe.$edit" ng-click="vm.annulerDemande_mobilier_mpe(demande_mobilier_mpe)" title="Annuler modification">
                                              <span class="icon-cancel"></span>
                                            </a>
                                                      
                                            <a ng-if="demande_mobilier_mpe.$edit && demande_mobilier_mpe.objet && demande_mobilier_mpe.description && demande_mobilier_mpe.montant && demande_mobilier_mpe.date  && demande_mobilier_mpe.ref_facture && demande_mobilier_mpe.id_tranche_demande_mpe && demande_mobilier_mpe.cumul && demande_mobilier_mpe.reste>''" ng-click="vm.ajoutDemande_mobilier_mpe(demande_mobilier_mpe,0)" title="Sauvegarder">
                                              <span class="icon-content-save"></span>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>

                                </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN demande mobilier mpe--------------------------------------->

                        <!----------------------------------Debut justificatif mobilier mpe------------------------------->
                              <md-tab ng-disabled="!vm.stepjusti_bat_mpe">
                                  <md-tab-label>
                                    <span class="ms-form-wizard-step-label">
                                        <span class="ms-form-wizard-step-text">Pièce jointe</span>
                                    </span>
                                  </md-tab-label>
                                  
                                   <md-tab-body>
                                      <div style="widht:100%;">  
                                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_mobilier_mpe()" style="width:10%;" ng-show="vm.validation_demande_mobilier_mpe ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                                            Nouveau
                                          </md-button><br>
                                      </div>
                                     <div>        
                                      <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                        <thead>
                                          <tr>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Description</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Fichier</span>
                                              </div>
                                            </th>
                                            <th class="secondary-text">
                                              <div class="table-header">
                                                <span class="column-title">Action</span>
                                              </div>
                                            </th>
                                          </tr>
                                        </thead>
                                                 
                                        <tbody>
                                          <tr ng-repeat="justificatif_mobilier_mpe in vm.alljustificatif_mobilier_pre"  ng-class="{selected: justificatif_mobilier_mpe.$selected}" ng-click="vm.selectionJustificatif_mobilier_mpe(justificatif_mobilier_mpe)">
                                                     
                                            <td>
                                              <span ng-if="justificatif_mobilier_mpe.$edit">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Description</label>
                                                  <input name="description" type="text" ng-model="justificatif_mobilier_mpe.description"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_mobilier_mpe.$edit">{{justificatif_mobilier_mpe.description}}</span>
                                            </td>
                                                      
                                            <td>
                                              <span ng-if="justificatif_mobilier_mpe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                  <input name="fichier" type="text" ng-model="justificatif_mobilier_mpe.fichier" disabled/>
                                                </md-input-container>   
                                              </span>

                                              <span ng-if="justificatif_mobilier_mpe.$edit" style="display: inline-block !important;">
                                                <md-input-container style="width:100%;display: flex !important;">
                                                  <label>Fichier</label>
                                                <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFilemobilier_mpe"  ng-model="fichier" id="fileid"/>
                                                </md-input-container>   
                                              </span>
                                                        
                                              <span ng-if="!justificatif_mobilier_mpe.$edit">{{justificatif_mobilier_mpe.fichier}}</span>
                                            </td>                       
                                            <td>
                                              <a ng-if="!justificatif_mobilier_mpe.$edit && vm.validation_demande_mobilier_mpe ==0" ng-click="vm.modifierJustificatif_mobilier_mpe(justificatif_mobilier_mpe)" title="Modifier">
                                                <span class="icon-table-edit"></span>
                                              </a>
                                                        
                                              <a ng-if="!justificatif_mobilier_mpe.$edit && vm.validation_demande_mobilier_mpe ==0" ng-click="vm.supprimerJustificatif_mobilier_mpe(justificatif_mobilier_mpe)" title="Supprimer">
                                                <span class="icon-delete"></span>
                                              </a>
                                              <a ng-if="!justificatif_mobilier_mpe.$edit" ng-click="vm.download_piece(justificatif_mobilier_mpe)" title="Telecharger">
                                                <span class="icon-box-download"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_mobilier_mpe.$edit" ng-click="vm.annulerJustificatif_mobilier_mpe(justificatif_mobilier_mpe)" title="Annuler modification">
                                                <span class="icon-cancel"></span>
                                              </a>
                                                        
                                              <a ng-if="justificatif_mobilier_mpe.$edit && justificatif_mobilier_mpe.description && justificatif_mobilier_mpe.fichier>''" ng-click="vm.ajoutJustificatif_mobilier_mpe(justificatif_mobilier_mpe,0)" title="Sauvegarder">
                                                <span class="icon-content-save"></span>
                                              </a>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>

                                  </md-tab-body>
                              </md-tab>
                        <!---------------------------------FIN justificatif mobilier mpe-------------------------------->


                        <!---------------------------------DEBUT paiement mobilier mpe------------------------------------>
                              <md-tab ng-disabled="!vm.stepjusti_bat_mpe || vm.validation_demande_mobilier_mpe!=4">
                                <md-tab-label>
                                  <span class="ms-form-wizard-step-label">
                                      <!--span class="ms-form-wizard-step-number md-accent-bg">
                                        <i class="icon-attachment s16"></i>
                                      </span-->
                                      <span class="ms-form-wizard-step-text">Paiement</span>
                                  </span>
                                 
                                </md-tab-label>
                                
                                <md-tab-body>
                                  <div style="widht:100%;">  
                                      <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterPaiement_mobilier_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvPaiement_mobilier_mpe">
                                        Nouveau
                                      </md-button>
                                      <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.valider_paiement_mobilier_mpe()" style="width:10%;" ng-if="vm.showbuttonValidationPaiement_mobilier_mpe && vm.permissionboutonvaliderPaiement_mobilier_mpe && vm.validation_paiement_mobilier_mpe==0">
                                           Valider
                                      </md-button>
                                  </div>
                                 <div>        
                                  <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                    <thead>
                                      <tr>
                                        <th class="secondary-text" ng-repeat="pai in ::vm.paiement_mobilier_mpe_column">
                                          <div class="table-header">
                                            <span class="column-title">{{pai.titre}}</span>
                                          </div>
                                        </th>
                                      </tr>
                                    </thead>
                                             
                                    <tbody>
                                      <tr ng-repeat="paiement_mobilier_mpe in vm.allpaiement_mobilier_mpe"  ng-class="{selected: paiement_mobilier_mpe.$selected}" ng-click="vm.selectionPaiement_mobilier_mpe(paiement_mobilier_mpe)">
                                                  
                                        <td>
                                          <span ng-if="paiement_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Montant paiement</label>
                                              <input name="montant_paiement" type="number" ng-model="paiement_mobilier_mpe.montant_paiement" disabled/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_mobilier_mpe.$edit">{{paiement_mobilier_mpe.montant_paiement}}</span>
                                        </td>

                                         <td>
                                          <span ng-if="paiement_mobilier_mpe.$edit">
                                            <md-datepicker ng-model="paiement_mobilier_mpe.date_paiement" md-placeholder="Date" md-max-date="vm.datenow" required>                       
                                            </md-datepicker>
                                          </span>                          
                                          <span ng-if="!paiement_mobilier_mpe.$edit">{{vm.formatDate(paiement_mobilier_mpe.date_paiement)}}</span>
                                        </td>
                                                  
                                        <td>
                                          <span ng-if="paiement_mobilier_mpe.$edit">
                                            <md-input-container style="width:100%;display: flex !important;">
                                              <label>Observation</label>
                                              <input name="observation" type="text" ng-model="paiement_mobilier_mpe.observation"/>
                                            </md-input-container>   
                                          </span>
                                                    
                                          <span ng-if="!paiement_mobilier_mpe.$edit">{{paiement_mobilier_mpe.observation}}</span>
                                        </td>
                                                                     
                                        <td>
                                          <a ng-if="!paiement_mobilier_mpe.$edit && paiement_mobilier_mpe.validation ==0" ng-click="vm.modifierPaiement_mobilier_mpe(paiement_mobilier_mpe)" title="Modifier">
                                            <span class="icon-table-edit"></span>
                                          </a>
                                                    
                                          <a ng-if="!paiement_mobilier_mpe.$edit && paiement_mobilier_mpe.validation ==0" ng-click="vm.supprimerPaiement_mobilier_mpe(paiement_mobilier_mpe)" title="Supprimer">
                                            <span class="icon-delete"></span>
                                          </a>
                                          <span ng-if="!paiement_mobilier_mpe.$edit && paiement_mobilier_mpe.validation ==1">Aucune action disponible</span>          
                                          <a ng-if="paiement_mobilier_mpe.$edit" ng-click="vm.annulerPaiement_mobilier_mpe(paiement_mobilier_mpe)" title="Annuler modification">
                                            <span class="icon-cancel"></span>
                                          </a>
                                                    
                                          <a ng-if="paiement_mobilier_mpe.$edit && paiement_mobilier_mpe.montant_paiement && paiement_mobilier_mpe.date_paiement >''" ng-click="vm.ajoutPaiement_mobilier_mpe(paiement_mobilier_mpe,0)" title="Sauvegarder">
                                            <span class="icon-content-save"></span>
                                          </a>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>

                              
                              </md-tab-body>
                            </md-tab>
                        </md-tabs> 
                        </ms-form-wizard>
                      </md-tab-body>
                    </md-tab>                    
                    
                    
                    <!---------------------------------Avenant MOE-----------------------------------------------> 
                    <md-tab ng-disabled="!vm.stepavenant_mpe">                    
                      <md-tab-label >
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Avenant</span>
                        </span>
                       
                      </md-tab-label>

                      <md-tab-body>
                        <div style="widht:100%;">  
                                    <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterAvenant_mpe()" style="width:10%;" ng-show="vm.showbuttonNouvavenant_mpe">
                                      Nouveau
                                    </md-button>
                                  <md-button type="submit" ng-show="vm.showbuttonValidation_avenant_mpe && vm.permissionboutonvalideravenant_mpe && vm.validation_avenant_mpe==0" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerAvenant_mpe()" style="width:10%;">
                                    Valider
                                  </md-button>
                                </div>
                               <div>        
                                <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                                  <thead>
                                    <tr>
                                      <th class="secondary-text" ng-repeat="mem in ::vm.avenant_mpe_column">
                                        <div class="table-header">
                                          <span class="column-title">{{mem.titre}}</span>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                           
                                  <tbody>
                                    <tr ng-repeat="avenant_mpe in vm.allavenant_mpe"  ng-class="{selected: avenant_mpe.$selected}" ng-click="vm.selectionAvenant_mpe(avenant_mpe)">
                                                
                                      <td>
                                        <span ng-if="avenant_mpe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Descriprtion</label>
                                            <input name="description" type="text" ng-model="avenant_mpe.description"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_mpe.$edit">{{avenant_mpe.description}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_mpe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Référence avenant</label>
                                            <input name="ref_avenant" type="text" ng-model="avenant_mpe.ref_avenant"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_mpe.$edit">{{avenant_mpe.ref_avenant}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_mpe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout batiment</label>
                                            <input name="montant" type="text" ng-model="avenant_mpe.cout_batiment"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_mpe.$edit">{{avenant_mpe.cout_batiment}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_mpe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout latrine</label>
                                            <input name="montant" type="text" ng-model="avenant_mpe.cout_latrine"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_mpe.$edit">{{avenant_mpe.cout_latrine}}</span>
                                      </td>
                                                
                                      <td>
                                        <span ng-if="avenant_mpe.$edit">
                                          <md-input-container style="width:100%;display: flex !important;">
                                            <label>Cout mobilier</label>
                                            <input name="montant" type="text" ng-model="avenant_mpe.cout_mobilier"/>
                                          </md-input-container>   
                                        </span>
                                                  
                                        <span ng-if="!avenant_mpe.$edit">{{avenant_mpe.cout_mobilier}}</span>
                                      </td>

                                      <td>
                                        <span ng-if="avenant_mpe.$edit">
                                          <md-datepicker ng-model="avenant_mpe.date_signature" md-placeholder="Date de signature" md-max-date="vm.date_now" required>                       
                                          </md-datepicker>
                                        </span>                          
                                        <span ng-if="!avenant_mpe.$edit">{{vm.formatDate(avenant_mpe.date_signature)}}</span>
                                      </td>                      
                                      <td>
                                        <a ng-if="!avenant_mpe.$edit && avenant_mpe.validation==0" ng-click="vm.modifierAvenant_mpe(avenant_mpe)" title="Modifier">
                                          <span class="icon-table-edit"></span>
                                        </a>
                                                  
                                        <a ng-if="!avenant_mpe.$edit && avenant_mpe.validation==0" ng-click="vm.supprimerAvenant_mpe(avenant_mpe)" title="Supprimer">
                                          <span class="icon-delete"></span>
                                        </a>
                                        <span ng-if="!avenant_mpe.$edit && avenant_mpe.validation==1">Aucune action disponible</span>          
                                        <a ng-if="avenant_mpe.$edit" ng-click="vm.annulerAvenant_mpe(avenant_mpe)" title="Annuler modification">
                                          <span class="icon-cancel"></span>
                                        </a>
                                                  
                                        <a ng-if="avenant_mpe.$edit && avenant_mpe.description &&  avenant_mpe.cout_batiment &&  avenant_mpe.cout_latrine &&  avenant_mpe.cout_mobilier &&  avenant_mpe.date_signature>''" ng-click="vm.ajoutAvenant_mpe(avenant_mpe,0)" title="Sauvegarder">
                                          <span class="icon-content-save"></span>
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                      </md-tab-body>
                    </md-tab>
                    <!--------------------------------------Fin Avenant mpe---------------------------------------------------> 
                    <!-------------------------------Debut document prestataire -------------------------------------------->
                    <md-tab >
                        <md-tab-label>
                          <span class="ms-form-wizard-step-label">
                              <span class="ms-form-wizard-step-text">Scan document</span>
                          </span>
                        </md-tab-label>
                        
                        <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterDocument_prestataire_scan()" style="width:10%;">
                                Nouveau
                              </md-button>  
                              <md-button type="submit" class="md-raised md-warn" aria-label="Nouveau" ng-click="vm.validerDocument_prestataire_scan()" style="width:10%;" ng-show="vm.showbuttonValidation_document_prestataire_scan && vm.permissionboutonvaliderdocument_prestataire_scan && vm.validation_document_prestataire_scan==0">
                                Validation
                              </md-button>
                          </div><br>
                         <div>        
                          <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                              <tr>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Code</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Intitule</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Existance</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Fichier</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Date Elaboration</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Observation</span>
                                  </div>
                                </th>
                                <th class="secondary-text">
                                  <div class="table-header">
                                    <span class="column-title">Action</span>
                                  </div>
                                </th>
                              </tr>
                            </thead>
                                     
                            <tbody>
                              <tr ng-repeat="document_prestataire_scan in vm.alldocument_prestataire_scan"  ng-class="{selected: document_prestataire_scan.$selected}" ng-click="vm.selectionDocument_prestataire_scan(document_prestataire_scan)">

                                <td>                                            
                                  <span>{{document_prestataire_scan.code}}</span>
                                </td>

                                <td>                                            
                                  <span>{{document_prestataire_scan.intitule}}</span>
                                </td>
                                
                                <td>                                 
                                   <md-checkbox ng-model="document_prestataire_scan.existance" aria-label="Checkbox 1" disabled>
                                  </md-checkbox>
                                </td>
                                          
                                <td>
                                  <span ng-if="document_prestataire_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                      <input name="fichier" type="text" ng-model="document_prestataire_scan.fichier" disabled/>
                                    </md-input-container>   
                                  </span>

                                  <span ng-if="document_prestataire_scan.$edit" style="display: inline-block !important;">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Fichier</label>
                                    <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFile_doc_pre"  ng-model="fichier" id="fileid"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_prestataire_scan.$edit">{{document_prestataire_scan.fichier}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_prestataire_scan.$edit">
                                    <md-datepicker ng-model="document_prestataire_scan.date_elaboration" md-placeholder="Date de elaboration" md-max-date="vm.date_now" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!document_prestataire_scan.$edit">{{vm.formatDate(document_prestataire_scan.date_elaboration)}}</span>
                                </td>

                                <td>
                                  <span ng-if="document_prestataire_scan.$edit">
                                    <md-input-container style="width:100%;display: flex !important;">
                                      <label>Observation</label>
                                      <input name="observation" type="text" ng-model="document_prestataire_scan.observation"/>
                                    </md-input-container>   
                                  </span>
                                            
                                  <span ng-if="!document_prestataire_scan.$edit">{{document_prestataire_scan.observation}}</span>
                                </td>

                                <td>
                                  <a ng-if="!document_prestataire_scan.$edit && document_prestataire_scan.validation==0" ng-click="vm.modifierDocument_prestataire_scan(document_prestataire_scan)" title="Modifier">
                                    <span class="icon-table-edit"></span>
                                  </a>
                                            
                                  <a ng-if="!document_prestataire_scan.$edit && document_prestataire_scan.validation==0" ng-click="vm.supprimerDocument_prestataire_scan(document_prestataire_scan)" title="Supprimer">
                                    <span class="icon-delete"></span>
                                  </a>                        
                                            
                                  <a ng-if="!document_prestataire_scan.$edit && document_prestataire_scan.existance" ng-click="vm.download_document_prestataire_scan(document_prestataire_scan)" title="Telecharger fichier">
                                    <span class="icon-box-download"></span>
                                  </a>
                                            
                                  <a ng-if="document_prestataire_scan.$edit" ng-click="vm.annulerDocument_prestataire_scan(document_prestataire_scan)" title="Annuler modification">
                                    <span class="icon-cancel"></span>
                                  </a>
                                            
                                  <a ng-if="document_prestataire_scan.$edit && document_prestataire_scan.fichier && document_prestataire_scan.date_elaboration >''" ng-click="vm.ajoutDocument_prestataire_scan(document_prestataire_scan,0)" title="Sauvegarder">
                                    <span class="icon-content-save"></span>
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </md-tab-body>
                    </md-tab>
                    <!--------------------------------------FIN document prestataire -------------------------------------------->            
                  </md-tabs> 
                </ms-form-wizard>               
              </md-tab-body>
            </md-tab>
            <!-----------------------DEBUT RELIQUAT------------------------------------>
            <md-tab ng-disabled="vm.stepMenu_reliquat==false">
              <md-tab-label >
                <span class="ms-form-wizard-step-label">
                    <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepMenu==true">
                      <i class="icon-worker s16"></i>
                    </span-->
                    <span class="ms-form-wizard-step-text">Reliquat</span>
                    <span class="ms-form-wizard-step-number md-accent-bg notification" >4</span>
                </span>
               
              </md-tab-label>
              
              <md-tab-body>
               <ms-form-wizard flex id="sousmenu"> 
                <md-tabs md-dynamic-height md-selected="msWizard.selectedIndex" md-center-tabs="true">
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Reliquat</span>
                        </span>
                       
                      </md-tab-label>
                      
                      <md-tab-body>
                          <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterTransfert_reliquat()" style="width:10%;" ng-show="vm.showbuttonNouvTransfert_reliquat">
                                Nouveau
                              </md-button>
                            <md-button type="submit" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerTransfert_reliquat()" style="width:10%;" ng-show="vm.showbuttonValidationtransfert_reliquat && vm.permissionboutonvalidertransfert_reliquat && vm.validation_transfert_reliquat==0">
                              Valider
                            </md-button>
                          </div>

                          <div>        
                            <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                              <thead>
                                <tr>
                                  <th class="secondary-text" ng-repeat="ciscT in ::vm.transfert_reliquat_column">
                                    <div class="table-header">
                                      <span class="column-title">{{ciscT.titre}}</span>
                                    </div>
                                  </th>
                                </tr>
                              </thead>
                                       
                              <tbody>
                                <tr ng-repeat="transfert_reliquat in vm.alltransfert_reliquat"  ng-class="{selected: transfert_reliquat.$selected}" ng-click="vm.selectionTransfert_reliquat(transfert_reliquat)">           
                                  
                                  <td>
                                    <span ng-if="transfert_reliquat.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Montant</label>
                                        <input name="montant" type="text" ng-model="transfert_reliquat.montant" ng-change="vm.change_montant(transfert_reliquat)"/>
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!transfert_reliquat.$edit">{{transfert_reliquat.montant}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="transfert_reliquat.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Objet utilisation</label>
                                        <md-select ng-model="transfert_reliquat.objet_utilisation"style="overflow: hidden;text-overflow: ellipsis;" disabled>
                                          <md-option  value="0">
                                            Amelioration infrastructure
                                          </md-option>
                                          <md-option  value="1">
                                            Nouvelle construction
                                          </md-option>
                                        </md-select>
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!transfert_reliquat.$edit">{{vm.afficheobjet_utilisation(transfert_reliquat.objet_utilisation)}}</span>
                                  </td>

                                  <td>
                                  <span ng-if="transfert_reliquat.$edit">
                                    <md-datepicker ng-model="transfert_reliquat.date_transfert" md-placeholder="Date de transfert" md-max-date="vm.datenow" required>                       
                                    </md-datepicker>
                                  </span>                          
                                  <span ng-if="!transfert_reliquat.$edit">{{vm.formatDate(transfert_reliquat.date_transfert)}}</span>
                                </td>

                                  <td>
                                    <span ng-if="transfert_reliquat.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Situation utilisation</label>
                                        <input name="situation_utilisation" type="text" ng-model="transfert_reliquat.situation_utilisation"/>
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!transfert_reliquat.$edit">{{transfert_reliquat.situation_utilisation}}</span>
                                  </td>

                                  <td>
                                    <span ng-if="transfert_reliquat.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Intitule compte</label>
                                        <input name="intitule_compte" type="text" ng-model="transfert_reliquat.intitule_compte"/>
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!transfert_reliquat.$edit">{{transfert_reliquat.intitule_compte}}</span>
                                  </td>

                                  <td>
                                    <span ng-if="transfert_reliquat.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>RIB SAE</label>
                                        <input name="rib" type="number" ng-model="transfert_reliquat.rib"/>
                                      </md-input-container>   
                                    </span>
                                              
                                    <span ng-if="!transfert_reliquat.$edit">{{transfert_reliquat.rib}}</span>
                                  </td> 

                                  <td>
                                    <span ng-if="transfert_reliquat.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Observation</label>
                                        <input name="observation" type="text" ng-model="transfert_reliquat.observation"/>
                                      </md-input-container>   
                                    </span>
                                              
                                    <span ng-if="!transfert_reliquat.$edit">{{transfert_reliquat.observation}}</span>
                                  </td>                       
                                                               
                                  <td>  
                                    <a ng-if="!transfert_reliquat.$edit && transfert_reliquat.validation==0" ng-click="vm.modifierTransfert_reliquat(transfert_reliquat)" title="Modifier">
                                      <span class="icon-table-edit"></span>
                                    </a>
                                              
                                    <a ng-if="!transfert_reliquat.$edit && transfert_reliquat.validation==0" ng-click="vm.supprimerTransfert_reliquat(transfert_reliquat)" title="Supprimer">
                                      <span class="icon-delete"></span>
                                    </a>
                                     <span ng-if="!transfert_reliquat.$edit && transfert_reliquat.validation==1">Aucune action disponible</span>         
                                    <a ng-if="transfert_reliquat.$edit" ng-click="vm.AnnulerTransfert_reliquat(transfert_reliquat)" title="AnnulerTransfert_reliquat modification">
                                      <span class="icon-cancel"></span>
                                    </a>
                                              
                                    <a ng-if="transfert_reliquat.$edit && transfert_reliquat.montant && transfert_reliquat.intitule_compte && transfert_reliquat.rib && transfert_reliquat.date_transfert>''" ng-click="vm.ajoutTransfert_reliquat(transfert_reliquat,0)" title="Sauvegarder">
                                      <span class="icon-content-save"></span>
                                    </a>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>

                      </md-tab-body>
                    </md-tab>
                    <md-tab ng-disabled="!vm.stepjusti_trans_reliqua">
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Justification</span>
                        </span>
                       
                      </md-tab-label>                       
                      
                      <md-tab-body>
                        <div style="widht:100%;">  
                          <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterJustificatif_transfert_reliquat()" style="width:10%;" ng-show="vm.validation_transfert_reliquat ==0 && (vm.session=='OBCAF' || vm.session=='BCAF' || vm.session=='ADMIN')">
                            Nouveau
                          </md-button>
                        </div>
                       <div>        
                        <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                          <thead>
                            <tr>
                              <th class="secondary-text">
                                <div class="table-header">
                                  <span class="column-title">Description</span>
                                </div>
                              </th>
                              <th class="secondary-text">
                                <div class="table-header">
                                  <span class="column-title">Fichier</span>
                                </div>
                              </th>
                              <th class="secondary-text">
                                <div class="table-header">
                                  <span class="column-title">Action</span>
                                </div>
                              </th>
                            </tr>
                          </thead>
                                   
                          <tbody>
                            <tr ng-repeat="justificatif_transfert_reliquat in vm.alljustificatif_transfert_reliquat"  ng-class="{selected: justificatif_transfert_reliquat.$selected}" ng-click="vm.selectionJustificatif_transfert_reliquat(justificatif_transfert_reliquat)">
                                       
                              <td>
                                <span ng-if="justificatif_transfert_reliquat.$edit">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>Description</label>
                                    <input name="description" type="text" ng-model="justificatif_transfert_reliquat.description"/>
                                  </md-input-container>   
                                </span>
                                          
                                <span ng-if="!justificatif_transfert_reliquat.$edit">{{justificatif_transfert_reliquat.description}}</span>
                              </td>
                                        
                              <td>
                                <span ng-if="justificatif_transfert_reliquat.$edit" style="display: inline-block !important;">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>Fichier</label>
                                    <input name="fichier" type="text" ng-model="justificatif_transfert_reliquat.fichier" disabled/>
                                  </md-input-container>   
                                </span>

                                <span ng-if="justificatif_transfert_reliquat.$edit" style="display: inline-block !important;">
                                  <md-input-container style="width:100%;display: flex !important;">
                                    <label>Fichier</label>
                                  <input type="file"name="myFile" aria-label="upload" custom-on-change="uploadFiletransfert_reliquat"  ng-model="fichier" id="fileid"/>
                                  </md-input-container>   
                                </span>
                                          
                                <span ng-if="!justificatif_transfert_reliquat.$edit">{{justificatif_transfert_reliquat.fichier}}</span>
                              </td>                       
                              <td>
                                <a ng-if="!justificatif_transfert_reliquat.$edit && vm.validation_transfert_reliquat==0" ng-click="vm.modifierJustificatif_transfert_reliquat(justificatif_transfert_reliquat)" title="Modifier">
                                  <span class="icon-table-edit"></span>
                                </a>
                                          
                                <a ng-if="!justificatif_transfert_reliquat.$edit && vm.validation_transfert_reliquat==0" ng-click="vm.supprimerJustificatif_transfert_reliquat(justificatif_transfert_reliquat)" title="Supprimer">
                                  <span class="icon-delete"></span>
                                </a>
                                <a ng-if="!justificatif_transfert_reliquat.$edit" ng-click="vm.download_transfert_reliquat(justificatif_transfert_reliquat)" title="Telecharger">
                                    <span class="icon-box-download"></span>
                                </a>          
                                <a ng-if="justificatif_transfert_reliquat.$edit" ng-click="vm.annulerJustificatif_transfert_reliquat(justificatif_transfert_reliquat)" title="Annuler modification">
                                  <span class="icon-cancel"></span>
                                </a>
                                          
                                <a ng-if="justificatif_transfert_reliquat.$edit && justificatif_transfert_reliquat.description && justificatif_transfert_reliquat.fichier>''" ng-click="vm.ajoutJustificatif_transfert_reliquat(justificatif_transfert_reliquat,0)" title="Sauvegarder">
                                  <span class="icon-content-save"></span>
                                </a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      </md-tab-body>
                    </md-tab>
                    <md-tab>
                      <md-tab-label>
                        <span class="ms-form-wizard-step-label">
                            <span class="ms-form-wizard-step-text">Document</span>
                        </span>
                       
                      </md-tab-label>
                        
                      <md-tab-body>
                         
                      </md-tab-body>
                    </md-tab>
                                       
                    <md-tab>
                    </md-tab>            
                  </md-tabs> 
                </ms-form-wizard>               
              </md-tab-body>
            </md-tab>
            <!-----------------------FIN RELIQUAT--------------------------------------------->

            <!-----------------------DEBUT RELIQUAT------------------------------------>
            <md-tab ng-disabled="vm.stepMenu_mpe==false">
              <md-tab-label >
                <span class="ms-form-wizard-step-label">
                    <!--span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.stepMenu==true">
                      <i class="icon-worker s16"></i>
                    </span-->
                    <span class="ms-form-wizard-step-text">Indicateur</span>
                    <span class="ms-form-wizard-step-number md-accent-bg notification" >4</span>
                </span>
               
              </md-tab-label>
              
              <md-tab-body>
                <div style="widht:100%;">  
                              <md-button type="submit" class="md-raised md-accent" aria-label="Nouveau" ng-click="vm.ajouterIndicateur()" style="width:10%;" ng-show="vm.showbuttonNouvIndicateur">
                                Nouveau
                              </md-button>
                            <md-button type="submit" class="md-raised md-warn" aria-label="Valider" ng-click="vm.validerindicateur()" style="width:10%;" ng-show="vm.showbuttonValidationindicateur && vm.permissionboutonvaliderindicateur && vm.validation_indicateur==0">
                              Valider
                            </md-button>
                          </div>

                          <div>        
                            <table class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
                              <thead>
                                <tr>
                                  <th class="secondary-text" ng-repeat="ciscT in ::vm.indicateur_column">
                                    <div class="table-header">
                                      <span class="column-title">{{ciscT.titre}}</span>
                                    </div>
                                  </th>
                                </tr>
                              </thead>
                                       
                              <tbody>
                                <tr ng-repeat="indicateur in vm.allindicateur"  ng-class="{selected: indicateur.$selected}" ng-click="vm.selectionIndicateur(indicateur)">           
                                  

                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre salle</label>
                                        <input name="nbr_salle_const" type="number" ng-model="indicateur.nbr_salle_const"/>
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_salle_const}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre bénéficiaire</label>
                                        <input name="nbr_beneficiaire" type="number" ng-model="indicateur.nbr_beneficiaire" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_beneficiaire}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre école</label>
                                        <input name="nbr_ecole" type="number" ng-model="indicateur.nbr_ecole" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_ecole}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre box</label>
                                        <input name="nbr_box" type="number" ng-model="indicateur.nbr_box" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_box}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre ponit d'eau</label>
                                        <input name="nbr_point_eau" type="number" ng-model="indicateur.nbr_point_eau" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_point_eau}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre banc</label>
                                        <input name="nbr_banc" type="number" ng-model="indicateur.nbr_banc" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_banc}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre table maitre</label>
                                        <input name="nbr_table_maitre" type="number" ng-model="indicateur.nbr_table_maitre" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_table_maitre}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Nombre chaise</label>
                                        <input name="nbr_chaise" type="number" ng-model="indicateur.nbr_chaise" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.nbr_chaise}}</span>
                                  </td>
                                  <td>
                                    <span ng-if="indicateur.$edit">
                                      <md-input-container style="width:100%;display: flex !important;">
                                        <label>Observation</label>
                                        <input name="observation" type="text" ng-model="indicateur.observation" />
                                      </md-input-container>
                                    </span>                          
                                    <span ng-if="!indicateur.$edit">{{indicateur.observation}}</span>
                                  </td>                           
                                                               
                                  <td>  
                                    <a ng-if="!indicateur.$edit && indicateur.validation==0" ng-click="vm.modifierIndicateur(indicateur)" title="Modifier">
                                      <span class="icon-table-edit"></span>
                                    </a>
                                              
                                    <a ng-if="!indicateur.$edit && indicateur.validation==0" ng-click="vm.supprimerIndicateur(indicateur)" title="Supprimer">
                                      <span class="icon-delete"></span>
                                    </a>
                                     <span ng-if="!indicateur.$edit && indicateur.validation==1">Aucune action disponible</span>         
                                    <a ng-if="indicateur.$edit" ng-click="vm.annulerIndicateur(indicateur)" title="Annulerindicateur modification">
                                      <span class="icon-cancel"></span>
                                    </a>
                                              
                                    <a ng-if="indicateur.$edit && indicateur.nbr_salle_const && indicateur.nbr_beneficiaire && indicateur.nbr_ecole && indicateur.nbr_box && indicateur.nbr_point_eau && indicateur.nbr_banc && indicateur.nbr_table_maitre && indicateur.nbr_chaise>''" ng-click="vm.ajoutIndicateur(indicateur,0)" title="Sauvegarder">
                                      <span class="icon-content-save"></span>
                                    </a>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
              </md-tab-body>
            </md-tab>
            <md-tab>
            </md-tab>
            <!-----------------------FIN RELIQUAT--------------------------------------------->
            
          </md-tabs>
        </ms-form-wizard> 
<!------------------------------------FIN TABS MERE--------------------------------------------------->    
       </div>
      
    </div>
    <!-- / CONTENT -->
  </div>